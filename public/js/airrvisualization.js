/*!
 * AIRR Visualization Library v0.4.0 (2021-02-25)
 * 
 * Build Charts for AIIR Data Commons
 * 
 * https://github.com/ireceptorplus-inesctec/airrvisualizationlibrary
 * 
 * @author  Marco Amaro Oliveira <mao@inesctec.pt>  (https://www.linkedin.com/in/marcoamarooliveira/)
 * @license AGPL-3.0-only
 * 
 * @copyright (c) INESCTEC (https://www.inesctec.pt/). All rights reserved.
 * 
 * Bundles JSONPath-plus (https://www.npmjs.com/package/jsonpath-plus)
 */
!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";module.exports=function(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}},{}],2:[function(require,module,exports){"use strict";var arrayLikeToArray=require("./arrayLikeToArray");module.exports=function(arr){if(Array.isArray(arr))return arrayLikeToArray(arr)}},{"./arrayLikeToArray":1}],3:[function(require,module,exports){"use strict";module.exports=function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}},{}],4:[function(require,module,exports){"use strict";module.exports=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}},{}],5:[function(require,module,exports){"use strict";module.exports=function(receiver,privateMap){var descriptor=privateMap.get(receiver);if(!descriptor)throw new TypeError("attempted to get private field on non-instance");return descriptor.get?descriptor.get.call(receiver):descriptor.value}},{}],6:[function(require,module,exports){"use strict";module.exports=function(receiver,privateMap,value){var descriptor=privateMap.get(receiver);if(!descriptor)throw new TypeError("attempted to set private field on non-instance");if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}return value}},{}],7:[function(require,module,exports){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}module.exports=function(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}},{}],8:[function(require,module,exports){"use strict";module.exports=function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}},{}],9:[function(require,module,exports){"use strict";function _getPrototypeOf(o){return module.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}module.exports=_getPrototypeOf},{}],10:[function(require,module,exports){"use strict";var setPrototypeOf=require("./setPrototypeOf");module.exports=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&setPrototypeOf(subClass,superClass)}},{"./setPrototypeOf":15}],11:[function(require,module,exports){"use strict";module.exports=function(obj){return obj&&obj.__esModule?obj:{default:obj}}},{}],12:[function(require,module,exports){"use strict";module.exports=function(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}},{}],13:[function(require,module,exports){"use strict";module.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},{}],14:[function(require,module,exports){"use strict";var _typeof=require("@babel/runtime/helpers/typeof"),assertThisInitialized=require("./assertThisInitialized");module.exports=function(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?assertThisInitialized(self):call}},{"./assertThisInitialized":3,"@babel/runtime/helpers/typeof":17}],15:[function(require,module,exports){"use strict";function _setPrototypeOf(o,p){return module.exports=_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}module.exports=_setPrototypeOf},{}],16:[function(require,module,exports){"use strict";var arrayWithoutHoles=require("./arrayWithoutHoles"),iterableToArray=require("./iterableToArray"),unsupportedIterableToArray=require("./unsupportedIterableToArray"),nonIterableSpread=require("./nonIterableSpread");module.exports=function(arr){return arrayWithoutHoles(arr)||iterableToArray(arr)||unsupportedIterableToArray(arr)||nonIterableSpread()}},{"./arrayWithoutHoles":2,"./iterableToArray":12,"./nonIterableSpread":13,"./unsupportedIterableToArray":18}],17:[function(require,module,exports){"use strict";function _typeof(obj){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?module.exports=_typeof=function(obj){return typeof obj}:module.exports=_typeof=function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}module.exports=_typeof},{}],18:[function(require,module,exports){"use strict";var arrayLikeToArray=require("./arrayLikeToArray");module.exports=function(o,minLen){if(o){if("string"==typeof o)return arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?arrayLikeToArray(o,minLen):void 0}}},{"./arrayLikeToArray":1}],19:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.JSONPath=JSONPath;var _typeof3=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _construct(Parent,args,Class){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance}).apply(null,arguments)}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(Class){if(null===Class||(fn=Class,-1===Function.toString.call(fn).indexOf("[native code]")))return Class;var fn;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)})(Class)}function _possibleConstructorReturn(self,call){return!call||"object"!==(0,_typeof3.default)(call)&&"function"!=typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var hasOwnProp=Object.prototype.hasOwnProperty;function push(arr,item){return(arr=arr.slice()).push(item),arr}function unshift(item,arr){return(arr=arr.slice()).unshift(item),arr}var NewError=function(_Error){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(NewError,_wrapNativeSuper(Error));var Derived,hasNativeReflectConstruct,_super=(Derived=NewError,hasNativeReflectConstruct=_isNativeReflectConstruct(),function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)});function NewError(value){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NewError),(_this=_super.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,_this.value=value,_this.name="NewError",_this}return NewError}();function JSONPath(opts,expr,obj,callback,otherTypeCallback){if(!(this instanceof JSONPath))try{return new JSONPath(opts,expr,obj,callback,otherTypeCallback)}catch(e){if(!e.avoidNew)throw e;return e.value}"string"==typeof opts&&(otherTypeCallback=callback,callback=obj,obj=expr,expr=opts,opts=null);var optObj=opts&&"object"===_typeof(opts);if(opts=opts||{},this.json=opts.json||obj,this.path=opts.path||expr,this.resultType=opts.resultType||"value",this.flatten=opts.flatten||!1,this.wrap=!hasOwnProp.call(opts,"wrap")||opts.wrap,this.sandbox=opts.sandbox||{},this.preventEval=opts.preventEval||!1,this.parent=opts.parent||null,this.parentProperty=opts.parentProperty||null,this.callback=opts.callback||callback||null,this.otherTypeCallback=opts.otherTypeCallback||otherTypeCallback||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==opts.autostart){var args={path:optObj?opts.path:expr};optObj?"json"in opts&&(args.json=opts.json):args.json=obj;var ret=this.evaluate(args);if(!ret||"object"!==_typeof(ret))throw new NewError(ret);return ret}}JSONPath.prototype.evaluate=function(expr,json,callback,otherTypeCallback){var _this2=this,currParent=this.parent,currParentProperty=this.parentProperty,flatten=this.flatten,wrap=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,callback=callback||this.callback,this.currOtherTypeCallback=otherTypeCallback||this.otherTypeCallback,json=json||this.json,(expr=expr||this.path)&&"object"===_typeof(expr)&&!Array.isArray(expr)){if(!expr.path&&""!==expr.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!hasOwnProp.call(expr,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');json=expr.json,flatten=hasOwnProp.call(expr,"flatten")?expr.flatten:flatten,this.currResultType=hasOwnProp.call(expr,"resultType")?expr.resultType:this.currResultType,this.currSandbox=hasOwnProp.call(expr,"sandbox")?expr.sandbox:this.currSandbox,wrap=hasOwnProp.call(expr,"wrap")?expr.wrap:wrap,this.currPreventEval=hasOwnProp.call(expr,"preventEval")?expr.preventEval:this.currPreventEval,callback=hasOwnProp.call(expr,"callback")?expr.callback:callback,this.currOtherTypeCallback=hasOwnProp.call(expr,"otherTypeCallback")?expr.otherTypeCallback:this.currOtherTypeCallback,currParent=hasOwnProp.call(expr,"parent")?expr.parent:currParent,currParentProperty=hasOwnProp.call(expr,"parentProperty")?expr.parentProperty:currParentProperty,expr=expr.path}if(currParent=currParent||null,currParentProperty=currParentProperty||null,Array.isArray(expr)&&(expr=JSONPath.toPathString(expr)),(expr||""===expr)&&json){this._obj=json;var exprList=JSONPath.toPathArray(expr);"$"===exprList[0]&&1<exprList.length&&exprList.shift(),this._hasParentSelector=null;var result=this._trace(exprList,json,["$"],currParent,currParentProperty,callback).filter(function(ea){return ea&&!ea.isParentSelector});return result.length?wrap||1!==result.length||result[0].hasArrExpr?result.reduce(function(rslt,ea){var valOrPath=_this2._getPreferredOutput(ea);return flatten&&Array.isArray(valOrPath)?rslt=rslt.concat(valOrPath):rslt.push(valOrPath),rslt},[]):this._getPreferredOutput(result[0]):wrap?[]:void 0}},JSONPath.prototype._getPreferredOutput=function(ea){var resultType=this.currResultType;switch(resultType){case"all":var path=Array.isArray(ea.path)?ea.path:JSONPath.toPathArray(ea.path);return ea.pointer=JSONPath.toPointer(path),ea.path="string"==typeof ea.path?ea.path:JSONPath.toPathString(ea.path),ea;case"value":case"parent":case"parentProperty":return ea[resultType];case"path":return JSONPath.toPathString(ea[resultType]);case"pointer":return JSONPath.toPointer(ea.path);default:throw new TypeError("Unknown result type")}},JSONPath.prototype._handleCallback=function(fullRetObj,callback,type){if(callback){var preferredOutput=this._getPreferredOutput(fullRetObj);fullRetObj.path="string"==typeof fullRetObj.path?fullRetObj.path:JSONPath.toPathString(fullRetObj.path),callback(preferredOutput,type,fullRetObj)}},JSONPath.prototype._trace=function(expr,val,path,parent,parentPropName,callback,hasArrExpr,literalPriority){var retObj,_this3=this;if(!expr.length)return retObj={path:path,value:val,parent:parent,parentProperty:parentPropName,hasArrExpr:hasArrExpr},this._handleCallback(retObj,callback,"value"),retObj;var loc=expr[0],x=expr.slice(1),ret=[];function addRet(elems){Array.isArray(elems)?elems.forEach(function(t){ret.push(t)}):ret.push(elems)}if(("string"!=typeof loc||literalPriority)&&val&&hasOwnProp.call(val,loc))addRet(this._trace(x,val[loc],push(path,loc),val,loc,callback,hasArrExpr));else if("*"===loc)this._walk(loc,x,val,path,parent,parentPropName,callback,function(m,l,_x,v,p,par,pr,cb){addRet(_this3._trace(unshift(m,_x),v,p,par,pr,cb,!0,!0))});else if(".."===loc)addRet(this._trace(x,val,path,parent,parentPropName,callback,hasArrExpr)),this._walk(loc,x,val,path,parent,parentPropName,callback,function(m,l,_x,v,p,par,pr,cb){"object"===_typeof(v[m])&&addRet(_this3._trace(unshift(l,_x),v[m],push(p,m),v,m,cb,!0))});else{if("^"===loc)return this._hasParentSelector=!0,{path:path.slice(0,-1),expr:x,isParentSelector:!0};if("~"===loc)return retObj={path:push(path,loc),value:parentPropName,parent:parent,parentProperty:null},this._handleCallback(retObj,callback,"property"),retObj;if("$"===loc)addRet(this._trace(x,val,path,null,null,callback,hasArrExpr));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(loc))addRet(this._slice(loc,x,val,path,parent,parentPropName,callback));else if(0===loc.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(loc,x,val,path,parent,parentPropName,callback,function(m,l,_x,v,p,par,pr,cb){_this3._eval(l.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),v[m],m,p,par,pr)&&addRet(_this3._trace(unshift(m,_x),v,p,par,pr,cb,!0))})}else if("("===loc[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");addRet(this._trace(unshift(this._eval(loc,val,path[path.length-1],path.slice(0,-1),parent,parentPropName),x),val,path,parent,parentPropName,callback,hasArrExpr))}else if("@"===loc[0]){var addType=!1,valueType=loc.slice(1,-2);switch(valueType){case"scalar":val&&["object","function"].includes(_typeof(val))||(addType=!0);break;case"boolean":case"string":case"undefined":case"function":_typeof(val)===valueType&&(addType=!0);break;case"integer":!Number.isFinite(val)||val%1||(addType=!0);break;case"number":Number.isFinite(val)&&(addType=!0);break;case"nonFinite":"number"!=typeof val||Number.isFinite(val)||(addType=!0);break;case"object":val&&_typeof(val)===valueType&&(addType=!0);break;case"array":Array.isArray(val)&&(addType=!0);break;case"other":addType=this.currOtherTypeCallback(val,path,parent,parentPropName);break;case"null":null===val&&(addType=!0);break;default:throw new TypeError("Unknown value type "+valueType)}if(addType)return retObj={path:path,value:val,parent:parent,parentProperty:parentPropName},this._handleCallback(retObj,callback,"value"),retObj}else if("`"===loc[0]&&val&&hasOwnProp.call(val,loc.slice(1))){var locProp=loc.slice(1);addRet(this._trace(x,val[locProp],push(path,locProp),val,locProp,callback,hasArrExpr,!0))}else if(loc.includes(",")){var _step,_iterator=function(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=o[Symbol.iterator]()},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(loc.split(","));try{for(_iterator.s();!(_step=_iterator.n()).done;){var part=_step.value;addRet(this._trace(unshift(part,x),val,path,parent,parentPropName,callback,!0))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}else!literalPriority&&val&&hasOwnProp.call(val,loc)&&addRet(this._trace(x,val[loc],push(path,loc),val,loc,callback,hasArrExpr,!0))}if(this._hasParentSelector)for(var t=0;t<ret.length;t++){var rett=ret[t];if(rett&&rett.isParentSelector){var tmp=this._trace(rett.expr,val,rett.path,parent,parentPropName,callback,hasArrExpr);if(Array.isArray(tmp)){ret[t]=tmp[0];for(var tl=tmp.length,tt=1;tt<tl;tt++)t++,ret.splice(t,0,tmp[tt])}else ret[t]=tmp}}return ret},JSONPath.prototype._walk=function(loc,expr,val,path,parent,parentPropName,callback,f){if(Array.isArray(val))for(var n=val.length,i=0;i<n;i++)f(i,loc,expr,val,path,parent,parentPropName,callback);else val&&"object"===_typeof(val)&&Object.keys(val).forEach(function(m){f(m,loc,expr,val,path,parent,parentPropName,callback)})},JSONPath.prototype._slice=function(loc,expr,val,path,parent,parentPropName,callback){if(Array.isArray(val)){var len=val.length,parts=loc.split(":"),step=parts[2]&&Number.parseInt(parts[2])||1,start=parts[0]&&Number.parseInt(parts[0])||0,end=parts[1]&&Number.parseInt(parts[1])||len;start=start<0?Math.max(0,start+len):Math.min(len,start),end=end<0?Math.max(0,end+len):Math.min(len,end);for(var ret=[],i=start;i<end;i+=step){this._trace(unshift(i,expr),val,path,parent,parentPropName,callback,!0).forEach(function(t){ret.push(t)})}return ret}},JSONPath.prototype._eval=function(code,_v,_vname,path,parent,parentPropName){if(!this._obj||!_v)return!1;code.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=parentPropName,code=code.replace(/@parentProperty/g,"_$_parentProperty")),code.includes("@parent")&&(this.currSandbox._$_parent=parent,code=code.replace(/@parent/g,"_$_parent")),code.includes("@property")&&(this.currSandbox._$_property=_vname,code=code.replace(/@property/g,"_$_property")),code.includes("@path")&&(this.currSandbox._$_path=JSONPath.toPathString(path.concat([_vname])),code=code.replace(/@path/g,"_$_path")),code.includes("@root")&&(this.currSandbox._$_root=this.json,code=code.replace(/@root/g,"_$_root")),/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/.test(code)&&(this.currSandbox._$_v=_v,code=code.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return this.vm.runInNewContext(code,this.currSandbox)}catch(e){throw console.log(e),new Error("jsonPath: "+e.message+": "+code)}},JSONPath.cache={},JSONPath.toPathString=function(pathArr){for(var x=pathArr,n=x.length,p="$",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(x[i])||(p+=/^[\*0-9]+$/.test(x[i])?"["+x[i]+"]":"['"+x[i]+"']");return p},JSONPath.toPointer=function(pointer){for(var x=pointer,n=x.length,p="",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(x[i])||(p+="/"+x[i].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return p},JSONPath.toPathArray=function(expr){var cache=JSONPath.cache;if(cache[expr])return cache[expr].concat();var subx=[],exprList=expr.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function($0,$1){return"[#"+(subx.push($1)-1)+"]"}).replace(/\['((?:(?!['\]])[\s\S])*)'\]/g,function($0,prop){return"['"+prop.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/'?\.'?(?!(?:(?!\[)[\s\S])*\])|\['?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function($0,ups){return";"+ups.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(exp){var match=exp.match(/#([0-9]+)/);return match&&match[1]?subx[match[1]]:exp});return cache[expr]=exprList,cache[expr]};JSONPath.prototype.vm={runInNewContext:function(expr,context){var keys=Object.keys(context),funcs=[];!function(source,target,conditionCb){for(var il=source.length,i=0;i<il;i++)conditionCb(source[i])&&target.push(source.splice(i--,1)[0])}(keys,funcs,function(key){return"function"==typeof context[key]});var values=keys.map(function(vr,i){return context[vr]}),funcString=funcs.reduce(function(s,func){var fString=context[func].toString();return/function/.test(fString)||(fString="function "+fString),"var "+func+"="+fString+";"+s},"");/(["'])use strict\1/.test(expr=funcString+expr)||keys.includes("arguments")||(expr="var arguments = undefined;"+expr);var lastStatementEnd=(expr=expr.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),code=-1<lastStatementEnd?expr.slice(0,lastStatementEnd+1)+" return "+expr.slice(lastStatementEnd+1):" return "+expr;return _construct(Function,_toConsumableArray(keys).concat([code])).apply(void 0,_toConsumableArray(values))}}},{"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/typeof":17}],20:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.HighchartsChart=exports.Chart=void 0;var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common.js"),_index=require("./index.js");require("./properties.js"),require("./result.js");function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var result,Super=(0,_getPrototypeOf2.default)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,result)}}var _logger=new WeakMap,_id=new WeakMap,_properties=new WeakMap,_result=new WeakMap,Chart=function(){function Chart(properties){if((0,_classCallCheck2.default)(this,Chart),_logger.set(this,{writable:!0,value:void 0}),_id.set(this,{writable:!0,value:void 0}),_properties.set(this,{writable:!0,value:void 0}),_result.set(this,{writable:!0,value:void 0}),this.constructor===Chart)throw new Error("Can not construct abstract class.");if(this.plot===Chart.prototype.plot)throw new TypeError("Please implement abstract method plot.");(0,_classPrivateFieldSet2.default)(this,_logger,new _common.Logger("Chart")),(0,_classPrivateFieldGet2.default)(this,_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)(this,_properties,properties),(0,_classPrivateFieldSet2.default)(this,_id,this.properties.id),(0,_classPrivateFieldSet2.default)(this,_result,_index.ResultFactory.build(this.getProperties())),(0,_classPrivateFieldGet2.default)(this,_result).parse(this.getProperties())}return(0,_createClass2.default)(Chart,[{key:"getId",value:function(){return(0,_classPrivateFieldGet2.default)(this,_id)}},{key:"getResult",value:function(){return(0,_classPrivateFieldGet2.default)(this,_result)}},{key:"getProperties",value:function(){return(0,_classPrivateFieldGet2.default)(this,_properties)}},{key:"plot",value:function(){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this plot() method should never execute, specializations of Chart need to overload it."),new TypeError("This method should not be called, implementations need to overload it.")}},{key:"id",get:function(){return this.getId()}},{key:"result",get:function(){return this.getResult()}},{key:"properties",get:function(){return this.getProperties()}}]),Chart}();exports.Chart=Chart;var _chart=new WeakMap,_logger2=new WeakMap,_highcharts=new WeakMap,HighchartsChart=function(_Chart){(0,_inherits2.default)(HighchartsChart,_Chart);var _super=_createSuper(HighchartsChart);function HighchartsChart(properties){var _this;return(0,_classCallCheck2.default)(this,HighchartsChart),_this=_super.call(this,properties),_chart.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_logger2.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_highcharts.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_logger2,new _common.Logger("HichartsChart")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this),_logger2).debug("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_chart,void 0),_this.checkHighcharts(),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_highcharts,window.Highcharts),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this),_logger2).trace(JSON.stringify((0,_assertThisInitialized2.default)(_this))),_this}return(0,_createClass2.default)(HighchartsChart,[{key:"getChart",value:function(){return(0,_classPrivateFieldGet2.default)(this,_chart)}},{key:"checkHighcharts",value:function(){(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Checking if highcharts resources are available.");var Highcharts=window.Highcharts;if(!Highcharts)throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Highcharts not available"),"Required Highcharts Library not available";if(!Highcharts._modules.hasOwnProperty("Extensions/Drilldown.js"))throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Highcharts Drilldown module not available"),"Required Highcharts Drilldown module not available";if(!Highcharts._modules.hasOwnProperty("Extensions/Exporting.js"))throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Highcharts Exporting module not available"),"Required Highcharts Exporting module not available";if(!Highcharts._modules.hasOwnProperty("Extensions/Data.js"))throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Highcharts Data module not available"),"Required Highcharts Data module not available";if(!Highcharts._modules.hasOwnProperty("Extensions/Math3D.js"))throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Highcharts 3D module not available"),"Required Highcharts 3D module not available"}},{key:"plot",value:function(){var timer=new _common.DebugTimer;(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Ploting chart"),timer.start("build_Highcharts_structure");var p={chart:{type:this.properties.chartType,animation:this.properties.animation},credits:{enabled:!1},xAxis:{type:"category"},plotOptions:{}};timer.start(".asHighchartSeries"),p.series=this.result.series.map(function(series){return series.asHighchartSeries()}),timer.end(".asHighchartSeries"),p.title={text:this.properties.title},this.properties.subtitle&&(p.subtitle={text:this.properties.subtitle[0]||void 0}),this.properties.yLabel&&(p.yAxis=p.yAxis||{},p.yAxis.title={text:this.properties.yLabel}),this.properties.yMaxValue&&(p.yAxis=p.yAxis||{},p.yAxis.max=this.properties.yMaxValue),this.properties.xLabel&&(p.xAxis=p.xAxis||{},p.xAxis.title={text:this.properties.xLabel}),this.result.drilldown&&((0,_classPrivateFieldGet2.default)(this,_logger2).debug("This is a drilldown chart"),p.drilldown=this.result.drilldownSeries,p.chart.events={drillup:this.result.getDrillupSeriesEvent(this.properties),drilldown:this.result.getDrilldownSeriesEvent(this.properties)}),(0,_classPrivateFieldGet2.default)(this,_logger2).trace("Is 3D (multiple series)? -"+this.result.isMultipleSeries()),this.properties.draw3D&&(p.chart.options3d={enabled:!0,alpha:this.properties.alpha3D,beta:this.properties.beta3D,depth:this.properties.depth3D,viewDistance:5,fitToPlot:!0,frame:{bottom:{size:1,color:"rgba(0,0,0,0.05)"}}},p.plotOptions.series=p.plotOptions.series||{},p.plotOptions.series.groupZPadding=20,p.plotOptions.series.depth=0,p.plotOptions.series.groupPadding=0,p.plotOptions.series.grouping=!1),this.result.isMultipleSeries()||(p.legend=p.legend||{},p.legend.enabled=!1),this.properties.stackingType&&(p.plotOptions.series=p.plotOptions.series||{},p.plotOptions.series.stacking=this.properties.stackingType),null!=this.properties.grouping&&(p.plotOptions.series=p.plotOptions.series||{},p.plotOptions.series.grouping=this.properties.grouping),timer.end("build_Highcharts_structure"),(0,_classPrivateFieldSet2.default)(this,_chart,(0,_classPrivateFieldGet2.default)(this,_highcharts).chart(this.properties.id,p)),(0,_classPrivateFieldGet2.default)(this,_logger2).trace(JSON.stringify(p)),(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Plotting into "+this.properties.id),(0,_classPrivateFieldGet2.default)(this,_logger2).trace(JSON.stringify(this.result)),(0,_classPrivateFieldGet2.default)(this,_highcharts).addEvent((0,_classPrivateFieldGet2.default)(this,_chart).container,"mousedown",this.getMousedownEvent((0,_classPrivateFieldGet2.default)(this,_chart),this.result.isMultipleSeries())),timer.print()}},{key:"getMousedownEvent",value:function(targetChart,is3D){(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getMousedownEvent");var logger=(0,_classPrivateFieldGet2.default)(this,_logger2);if(!is3D)return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("retrieving default mousedown event on charts."),function(e){logger.trace("Default mouse down event on chart.")};var highcharts=(0,_classPrivateFieldGet2.default)(this,_highcharts);return function(eStart){var chart=targetChart,posX=(eStart=chart.pointer.normalize(eStart)).chartX,posY=eStart.chartY,alpha=chart.options.chart.options3d.alpha,beta=chart.options.chart.options3d.beta,handlers=[];function drag(e){e=chart.pointer.normalize(e);var newAlpha=alpha+(e.chartY-posY)/5,newBeta=beta+(posX-e.chartX)/5;chart.update({chart:{options3d:{alpha:newAlpha,beta:newBeta}}},void 0,void 0,!1)}function unbindAll(){handlers.forEach(function(unbind){unbind&&unbind()}),handlers.length=0}handlers.push(highcharts.addEvent(document,"mousemove",drag)),handlers.push(highcharts.addEvent(document,"touchmove",drag)),handlers.push(highcharts.addEvent(document,"mouseup",unbindAll)),handlers.push(highcharts.addEvent(document,"touchend",unbindAll)),logger.trace(eStart.toString())}}},{key:"chart",get:function(){return this.getChart()}}]),HighchartsChart}(Chart);exports.HighchartsChart=HighchartsChart},{"./common.js":21,"./index.js":26,"./properties.js":28,"./result.js":29,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/classPrivateFieldGet":5,"@babel/runtime/helpers/classPrivateFieldSet":6,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":14}],21:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.DebugTimer=exports.Common=exports.DataType=exports.GeneType=exports.ResultSeriesType=exports.Logger=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_source=new WeakMap,Logger=function(){function Logger(sourceName){(0,_classCallCheck2.default)(this,Logger),_source.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_source,sourceName)}return(0,_createClass2.default)(Logger,null,[{key:"setDebugLevel",value:function(level){Logger.DEBUG_LEVEL=level}},{key:"LEVEL_OFF",get:function(){return Logger.level.OFF}},{key:"LEVEL_TRACE",get:function(){return Logger.level.TRACE}},{key:"LEVEL_DEBUG",get:function(){return Logger.level.DEBUG}},{key:"LEVEL_INFO",get:function(){return Logger.level.INFO}},{key:"LEVEL_WARN",get:function(){return Logger.level.WARN}},{key:"LEVEL_ERROR",get:function(){return Logger.level.ERROR}},{key:"LEVEL_FATAL",get:function(){return Logger.level.FATAL}}]),(0,_createClass2.default)(Logger,[{key:"_datetime",value:function(){var d=new Date;return(d=[""+d.getFullYear(),"0"+(d.getMonth()+1),"0"+d.getDate(),"0"+d.getHours(),"0"+d.getMinutes(),"0"+d.getSeconds()].map(function(component){return component.slice(-2)})).slice(0,3).join("")+"T"+d.slice(3).join("")}},{key:"_log",value:function(type,text){console.log(this._datetime().concat(" ").concat((0,_classPrivateFieldGet2.default)(this,_source)).concat(" ").concat(type).concat(": \r\n").concat(text))}},{key:"trace",value:function(text){Logger.DEBUG_LEVEL<=Logger.LEVEL_TRACE&&this._log("TRACE",text)}},{key:"debug",value:function(text){Logger.DEBUG_LEVEL<=Logger.LEVEL_DEBUG&&this._log("DEBUG",text)}},{key:"info",value:function(text){Logger.DEBUG_LEVEL<=Logger.LEVEL_INFO&&this._log("INFO",text)}},{key:"warn",value:function(text){Logger.DEBUG_LEVEL<=Logger.LEVEL_WARN&&this._log("WARN",text)}},{key:"error",value:function(text){Logger.DEBUG_LEVEL<=Logger.LEVEL_ERROR&&this._log("ERROR",text)}},{key:"fatal",value:function(text){Logger.DEBUG_LEVEL<=Logger.LEVEL_FATAL&&this._log("FATAL",text)}}],[{key:"error",value:function(sourceName,text){Logger.DEBUG_LEVEL<=Logger.LEVEL_ERROR&&new Logger(sourceName)._log("ERROR",text)}}]),Logger}();exports.Logger=Logger,(0,_defineProperty2.default)(Logger,"level",{ALL:0,TRACE:20,DEBUG:30,INFO:40,WARN:50,ERROR:70,FATAL:90,OFF:100}),(0,_defineProperty2.default)(Logger,"DEBUG_LEVEL",Logger.LEVEL_OFF);var _typeCode=new WeakMap,_typeName=new WeakMap,_unique=new WeakMap,_exists=new WeakMap,_productive=new WeakMap,_rearrangement=new WeakMap,_duplicate=new WeakMap,ResultSeriesType=function(){function ResultSeriesType(typeCode,typeName,unique,exists,productive,rearrangement,duplicate){(0,_classCallCheck2.default)(this,ResultSeriesType),_typeCode.set(this,{writable:!0,value:void 0}),_typeName.set(this,{writable:!0,value:void 0}),_unique.set(this,{writable:!0,value:void 0}),_exists.set(this,{writable:!0,value:void 0}),_productive.set(this,{writable:!0,value:void 0}),_rearrangement.set(this,{writable:!0,value:void 0}),_duplicate.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_typeCode,typeCode),(0,_classPrivateFieldSet2.default)(this,_typeName,typeName),(0,_classPrivateFieldSet2.default)(this,_unique,unique),(0,_classPrivateFieldSet2.default)(this,_exists,exists),(0,_classPrivateFieldSet2.default)(this,_productive,productive),(0,_classPrivateFieldSet2.default)(this,_rearrangement,rearrangement),(0,_classPrivateFieldSet2.default)(this,_duplicate,duplicate)}return(0,_createClass2.default)(ResultSeriesType,null,[{key:"contains",value:function(code){return Object.values(ResultSeriesType.typeCode).map(function(a){return a.code}).includes(code)}},{key:"getByName",value:function(name){if(!name)throw new TypeError("undefined name value. Name parameter is required.");if(null==ResultSeriesType.names[name])throw new TypeError("inexistent name in list.");var unique=name.includes("unique"),exists=name.includes("exists"),productive=name.includes("productive"),rearrangement=name.includes("rearrangement"),duplicate=name.includes("duplicate"),type=ResultSeriesType.names[name];return new ResultSeriesType(type.code,type.name,unique,exists,productive,rearrangement,duplicate)}},{key:"FAMILY",get:function(){return ResultSeriesType.typeCode.FAMILY.code}},{key:"GENE",get:function(){return ResultSeriesType.typeCode.GENE.code}},{key:"CALL",get:function(){return ResultSeriesType.typeCode.CALL.code}},{key:"GENE_COUNT",get:function(){return ResultSeriesType.typeCode.GENE_COUNT.code}},{key:"TOP_CLONES",get:function(){return ResultSeriesType.typeCode.TOP_CLONES.code}},{key:"JUNCTION_LENGTH",get:function(){return ResultSeriesType.typeCode.JUNCTION_LENGTH.code}},{key:"JUNCTION_AA_LENGTH",get:function(){return ResultSeriesType.typeCode.JUNCTION_AA_LENGTH.code}}]),(0,_createClass2.default)(ResultSeriesType,[{key:"toString",value:function(){var result=(0,_classPrivateFieldGet2.default)(this,_typeName);if((0,_classPrivateFieldGet2.default)(this,_exists)||(0,_classPrivateFieldGet2.default)(this,_productive)||(0,_classPrivateFieldGet2.default)(this,_unique)||(0,_classPrivateFieldGet2.default)(this,_rearrangement)||(0,_classPrivateFieldGet2.default)(this,_duplicate)){var first=!0;result+="[",(0,_classPrivateFieldGet2.default)(this,_exists)&&(result+="exists",first=!1),(0,_classPrivateFieldGet2.default)(this,_unique)&&(first||(result+=", "),result+="unique",first=!1),(0,_classPrivateFieldGet2.default)(this,_productive)&&(first||(result+=", "),result+="productive",first=!1),(0,_classPrivateFieldGet2.default)(this,_rearrangement)&&(first||(result+=", "),result+="rearrangement",first=!1),(0,_classPrivateFieldGet2.default)(this,_duplicate)&&(first||(result+=", "),result+="duplicate",first=!1),result+="]"}return result}},{key:"typeCode",get:function(){return(0,_classPrivateFieldGet2.default)(this,_typeCode)}},{key:"typeName",get:function(){return(0,_classPrivateFieldGet2.default)(this,_typeName)}},{key:"unique",get:function(){return(0,_classPrivateFieldGet2.default)(this,_unique)}},{key:"exists",get:function(){return(0,_classPrivateFieldGet2.default)(this,_exists)}},{key:"productive",get:function(){return(0,_classPrivateFieldGet2.default)(this,_productive)}},{key:"rearrangement",get:function(){return(0,_classPrivateFieldGet2.default)(this,_rearrangement)}},{key:"duplicate",get:function(){return(0,_classPrivateFieldGet2.default)(this,_duplicate)}}]),ResultSeriesType}();exports.ResultSeriesType=ResultSeriesType,(0,_defineProperty2.default)(ResultSeriesType,"typeCode",{FAMILY:{code:"f",name:"Subgroup"},GENE:{code:"g",name:"Gene"},CALL:{code:"c",name:"Allele"},GENE_COUNT:{code:"gc",name:"Gene Count"},TOP_CLONES:{code:"tc",name:"Top Clones"},JUNCTION_LENGTH:{code:"jl",name:"Junction Length"},JUNCTION_AA_LENGTH:{code:"jal",name:"Junction aa Length"}}),(0,_defineProperty2.default)(ResultSeriesType,"names",{v_call_unique:ResultSeriesType.typeCode.CALL,d_call_unique:ResultSeriesType.typeCode.CALL,j_call_unique:ResultSeriesType.typeCode.CALL,c_call_unique:ResultSeriesType.typeCode.CALL,v_call_unique_productive:ResultSeriesType.typeCode.CALL,d_call_unique_productive:ResultSeriesType.typeCode.CALL,j_call_unique_productive:ResultSeriesType.typeCode.CALL,c_call_unique_productive:ResultSeriesType.typeCode.CALL,v_call_exists:ResultSeriesType.typeCode.CALL,d_call_exists:ResultSeriesType.typeCode.CALL,j_call_exists:ResultSeriesType.typeCode.CALL,c_call_exists:ResultSeriesType.typeCode.CALL,v_call_exists_productive:ResultSeriesType.typeCode.CALL,d_call_exists_productive:ResultSeriesType.typeCode.CALL,j_call_exists_productive:ResultSeriesType.typeCode.CALL,c_call_exists_productive:ResultSeriesType.typeCode.CALL,v_gene_unique:ResultSeriesType.typeCode.GENE,d_gene_unique:ResultSeriesType.typeCode.GENE,j_gene_unique:ResultSeriesType.typeCode.GENE,c_gene_unique:ResultSeriesType.typeCode.GENE,v_gene_unique_productive:ResultSeriesType.typeCode.GENE,d_gene_unique_productive:ResultSeriesType.typeCode.GENE,j_gene_unique_productive:ResultSeriesType.typeCode.GENE,c_gene_unique_productive:ResultSeriesType.typeCode.GENE,v_gene_exists:ResultSeriesType.typeCode.GENE,d_gene_exists:ResultSeriesType.typeCode.GENE,j_gene_exists:ResultSeriesType.typeCode.GENE,c_gene_exists:ResultSeriesType.typeCode.GENE,v_gene_exists_productive:ResultSeriesType.typeCode.GENE,d_gene_exists_productive:ResultSeriesType.typeCode.GENE,j_gene_exists_productive:ResultSeriesType.typeCode.GENE,c_gene_exists_productive:ResultSeriesType.typeCode.GENE,v_subgroup_unique:ResultSeriesType.typeCode.FAMILY,d_subgroup_unique:ResultSeriesType.typeCode.FAMILY,j_subgroup_unique:ResultSeriesType.typeCode.FAMILY,c_subgroup_unique:ResultSeriesType.typeCode.FAMILY,v_subgroup_unique_productive:ResultSeriesType.typeCode.FAMILY,d_subgroup_unique_productive:ResultSeriesType.typeCode.FAMILY,j_subgroup_unique_productive:ResultSeriesType.typeCode.FAMILY,c_subgroup_unique_productive:ResultSeriesType.typeCode.FAMILY,v_subgroup_exists:ResultSeriesType.typeCode.FAMILY,d_subgroup_exists:ResultSeriesType.typeCode.FAMILY,j_subgroup_exists:ResultSeriesType.typeCode.FAMILY,c_subgroup_exists:ResultSeriesType.typeCode.FAMILY,v_subgroup_exists_productive:ResultSeriesType.typeCode.FAMILY,d_subgroup_exists_productive:ResultSeriesType.typeCode.FAMILY,j_subgroup_exists_productive:ResultSeriesType.typeCode.FAMILY,c_subgroup_exists_productive:ResultSeriesType.typeCode.FAMILY,top_clones:ResultSeriesType.typeCode.TOP_CLONES,clone_size_top:ResultSeriesType.typeCode.TOP_CLONES,junction_length:ResultSeriesType.typeCode.JUNCTION_LENGTH,junction_length_productive:ResultSeriesType.typeCode.JUNCTION_LENGTH,junction_aa_length:ResultSeriesType.typeCode.JUNCTION_AA_LENGTH,junction_aa_length_productive:ResultSeriesType.typeCode.JUNCTION_AA_LENGTH,rearrangement_count:ResultSeriesType.typeCode.GENE_COUNT,rearrangement_count_productive:ResultSeriesType.typeCode.GENE_COUNT,duplicate_count:ResultSeriesType.typeCode.GENE_COUNT,duplicate_count_productive:ResultSeriesType.typeCode.GENE_COUNT,"functionality count":ResultSeriesType.typeCode.GENE_COUNT});var GeneType=function(){function GeneType(){(0,_classCallCheck2.default)(this,GeneType)}return(0,_createClass2.default)(GeneType,null,[{key:"contains",value:function(value){return Object.values(GeneType.genes).includes(value)}},{key:"V_GENE",get:function(){return GeneType.genes.V_GENE}},{key:"D_GENE",get:function(){return GeneType.genes.D_GENE}},{key:"J_GENE",get:function(){return GeneType.genes.J_GENE}},{key:"C_GENE",get:function(){return GeneType.genes.C_GENE}}]),GeneType}();exports.GeneType=GeneType,(0,_defineProperty2.default)(GeneType,"genes",{V_GENE:"v",D_GENE:"d",J_GENE:"j",C_GENE:"c"});var DataType=function(){function DataType(){(0,_classCallCheck2.default)(this,DataType)}return(0,_createClass2.default)(DataType,null,[{key:"contains",value:function(value){return Object.values(DataType.types).includes(value)}},{key:"V_GENE_USAGE",get:function(){return DataType.types.V_GENE_USAGE}},{key:"D_GENE_USAGE",get:function(){return DataType.types.D_GENE_USAGE}},{key:"J_GENE_USAGE",get:function(){return DataType.types.J_GENE_USAGE}},{key:"C_GENE_USAGE",get:function(){return DataType.types.C_GENE_USAGE}},{key:"JUNCTION_LENGTH",get:function(){return DataType.types.JUNCTION_LENGTH}},{key:"CLONE_COUNT",get:function(){return DataType.types.CLONE_COUNT}},{key:"CLONE_COUNT_IMMUNEDB",get:function(){return DataType.types.CLONE_COUNT_IMMUNEDB}},{key:"CLONE_TOP_COUNT_IMMUNEDB",get:function(){return DataType.types.CLONE_TOP_COUNT_IMMUNEDB}},{key:"CLONE_FUNCTIONALITY_COUNT_IMMUNEDB",get:function(){return DataType.types.CLONE_FUNCTIONALITY_COUNT_IMMUNEDB}}]),DataType}();exports.DataType=DataType,(0,_defineProperty2.default)(DataType,"types",{V_GENE_USAGE:"VGeneUsage",D_GENE_USAGE:"DGeneUsage",J_GENE_USAGE:"JGeneUsage",C_GENE_USAGE:"CGeneUsage",JUNCTION_LENGTH:"JunctionLength",CLONE_COUNT:"CloneCount",CLONE_COUNT_IMMUNEDB:"CloneCountImmuneDB",CLONE_TOP_COUNT_IMMUNEDB:"CloneTopCountImmuneDB",CLONE_FUNCTIONALITY_COUNT_IMMUNEDB:"CloneFunctionalityCountImmuneDB"});var Common=function(){function Common(){(0,_classCallCheck2.default)(this,Common)}return(0,_createClass2.default)(Common,null,[{key:"makeid",value:function(length){for(var result="",characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",charactersLength=characters.length,i=0;i<length;i++)result+=characters.charAt(Math.floor(Math.random()*charactersLength));return result}},{key:"roundTo",value:function(number,precision){return+(Math.round(number+"e+"+precision)+"e-"+precision)}},{key:"quote",value:function(text){return"'"+text+"'"}},{key:"objectConstructor",get:function(){return{}.constructor}}]),Common}();exports.Common=Common;var _logger=new WeakMap,_data=new WeakMap,DebugTimer=function(){function DebugTimer(){(0,_classCallCheck2.default)(this,DebugTimer),_logger.set(this,{writable:!0,value:void 0}),_data.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_data,{}),(0,_classPrivateFieldSet2.default)(this,_logger,new Logger("DebugTimer"))}return(0,_createClass2.default)(DebugTimer,[{key:"start",value:function(what){(0,_classPrivateFieldGet2.default)(this,_data)[what]={start:Date.now()}}},{key:"end",value:function(what){(0,_classPrivateFieldGet2.default)(this,_data)[what].end=Date.now(),(0,_classPrivateFieldGet2.default)(this,_data)[what].total=(0,_classPrivateFieldGet2.default)(this,_data)[what].end-(0,_classPrivateFieldGet2.default)(this,_data)[what].start}},{key:"print",value:function(){for(var str="",_i=0,_Object$keys=Object.keys((0,_classPrivateFieldGet2.default)(this,_data));_i<_Object$keys.length;_i++){var key=_Object$keys[_i];str+="".concat(key,": ").concat((0,_classPrivateFieldGet2.default)(this,_data)[key].total," ms \r\n")}return(0,_classPrivateFieldGet2.default)(this,_logger).info(str),str}},{key:"clean",value:function(){(0,_classPrivateFieldSet2.default)(this,_data,{})}}]),DebugTimer}();exports.DebugTimer=DebugTimer},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/classPrivateFieldGet":5,"@babel/runtime/helpers/classPrivateFieldSet":6,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":11}],22:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.JGeneUsageDrilldownStatsParser=exports.GeneUsageDrilldownStatsParser=exports.GeneUsageStatsParser=exports.CountStatsParser=exports.JunctionLenghtStatsParser=exports.StatsParserConstants=void 0;var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_common=require("./common.js"),_parser=(require("./properties.js"),require("./parser.js")),_series9=require("./series.js");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var result,Super=(0,_getPrototypeOf2.default)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,result)}}var StatsParserConstants=function(){function StatsParserConstants(){(0,_classCallCheck2.default)(this,StatsParserConstants)}return(0,_createClass2.default)(StatsParserConstants,null,[{key:"INFO",get:function(){return StatsParserConstants.VOCABULARY.INFO}},{key:"MESSAGE",get:function(){return StatsParserConstants.VOCABULARY.MESSAGE}},{key:"STATISTICS",get:function(){return StatsParserConstants.VOCABULARY.STATISTICS}},{key:"STATISTICS_NAME",get:function(){return StatsParserConstants.VOCABULARY.STATISTICS_NAME}},{key:"REPERTOIRES",get:function(){return StatsParserConstants.VOCABULARY.REPERTOIRES}},{key:"REPERTOIRE_ID",get:function(){return StatsParserConstants.VOCABULARY.REPERTOIRE_ID}},{key:"SAMPLE_PROCESSING_ID",get:function(){return StatsParserConstants.VOCABULARY.SAMPLE_PROCESSING_ID}},{key:"DATA_PROCESSING_ID",get:function(){return StatsParserConstants.VOCABULARY.DATA_PROCESSING_ID}},{key:"TOTAL",get:function(){return StatsParserConstants.VOCABULARY.TOTAL}},{key:"DATA",get:function(){return StatsParserConstants.VOCABULARY.DATA}},{key:"KEY",get:function(){return StatsParserConstants.VOCABULARY.KEY}},{key:"VALUE",get:function(){return StatsParserConstants.VOCABULARY.VALUE}},{key:"POSTFIX_FAMILY",get:function(){return StatsParserConstants.VOCABULARY.POSTFIX_FAMILY}},{key:"POSTFIX_GENE",get:function(){return StatsParserConstants.VOCABULARY.POSTFIX_GENE}},{key:"POSTFIX_CALL",get:function(){return StatsParserConstants.VOCABULARY.POSTFIX_CALL}},{key:"SPLITER_GENE",get:function(){return StatsParserConstants.VOCABULARY.SPLITER_GENE}},{key:"SPLITER_CALL",get:function(){return StatsParserConstants.VOCABULARY.SPLITER_CALL}}]),StatsParserConstants}();exports.StatsParserConstants=StatsParserConstants,(0,_defineProperty2.default)(StatsParserConstants,"VOCABULARY",{INFO:"Info",MESSAGE:"Result",STATISTICS:"statistics",STATISTICS_NAME:"statistic_name",REPERTOIRES:"repertoires",REPERTOIRE_ID:"repertoire_id",SAMPLE_PROCESSING_ID:"sample_processing_id",DATA_PROCESSING_ID:"data_processing_id",TOTAL:"total",DATA:"data",KEY:"key",VALUE:"count",POSTFIX_FAMILY:"_subgroup",POSTFIX_GENE:"_gene",POSTFIX_CALL:"_call",SPLITER_GENE:"-",SPLITER_CALL:"*"});var _logger=new WeakMap,_series=new WeakMap,_seriesByRepertoire=new WeakMap,_multipleSeries=new WeakMap,CountStatsParser=function(_Parser){(0,_inherits2.default)(CountStatsParser,_Parser);var _super=_createSuper(CountStatsParser);function CountStatsParser(){var _this;return(0,_classCallCheck2.default)(this,CountStatsParser),_this=_super.call(this),_logger.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_series.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_seriesByRepertoire.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_multipleSeries.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_logger,new _common.Logger("CountStatsParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this),_logger).trace("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_multipleSeries,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_series,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_seriesByRepertoire,[]),_this}return(0,_createClass2.default)(CountStatsParser,[{key:"getSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series)}},{key:"isMultipleSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries)}},{key:"_initializeRepertoire",value:function(repertoire_id){(0,_classPrivateFieldGet2.default)(this,_logger).debug("Initializing repertoire "+repertoire_id),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire)[repertoire_id]=[])}},{key:"preparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger).trace("preparse.")}},{key:"postparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger).trace("postparse.")}},{key:"onparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger).trace("parse");var timer=new _common.DebugTimer;timer.start("parse");var parsedProperties=this.properties,data=properties.getData(),seriesColors=properties.seriesColors,percentage=(properties.seriesName,properties.sort,properties.percentage),colorIndex=0,colorIndexJumper=1,mainSeries=[];"string"==typeof data&&(data=JSON.parse(data));var messageArray=data[StatsParserConstants.MESSAGE],messageArrayLength=messageArray.length;if((0,_classPrivateFieldGet2.default)(this,_logger).debug("Data Result length = "+messageArrayLength),1<messageArrayLength){if((0,_classPrivateFieldGet2.default)(this,_logger).debug("Representing "+messageArrayLength+" repertoires."),(0,_classPrivateFieldSet2.default)(this,_multipleSeries,!0),seriesColors.length<messageArrayLength)throw(0,_classPrivateFieldGet2.default)(this,_logger).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";colorIndexJumper=Math.floor((seriesColors.length-1)/(messageArrayLength-1))}percentage?(parsedProperties.setYLabel("Percentage"),parsedProperties.setDraw3D(!1)):(0,_classPrivateFieldGet2.default)(this,_multipleSeries)&&parsedProperties.setDraw3D(!0);for(var j=0;j<messageArrayLength;j++){var color=seriesColors[colorIndex];colorIndex+=colorIndexJumper;var messageArrayObject=messageArray[j],messageArrayObjectRepertoires=messageArrayObject[StatsParserConstants.REPERTOIRES],repID=messageArrayObjectRepertoires[StatsParserConstants.REPERTOIRE_ID];if(0<messageArrayObject[StatsParserConstants.STATISTICS].length){this._initializeRepertoire(repID);for(var firstObject=messageArrayObject[StatsParserConstants.STATISTICS][0],statisticName=firstObject[StatsParserConstants.STATISTICS_NAME],resultSeriesId="rep".concat(repID).concat(statisticName),type=_common.ResultSeriesType.getByName(statisticName),_resultSeriesName="Repertoire ".concat(repID),resultSeriesName=properties.seriesName&&properties.seriesName[j]||_resultSeriesName,_totalUsageCount=firstObject[StatsParserConstants.TOTAL],series=(new _series9.ResultSeries).setRepertoireId(repID).setSampleProcessingId(messageArrayObjectRepertoires[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(messageArrayObjectRepertoires[StatsParserConstants.DATA_PROCESSING_ID]).setId(resultSeriesId).setName(resultSeriesName).setFieldName(statisticName).setColor(color).setType(type),seriesData=series.data,totalUsageCountValidator=0,i=0;i<firstObject[StatsParserConstants.DATA].length;i++){var dataObject=firstObject[StatsParserConstants.DATA][i],value=dataObject[StatsParserConstants.VALUE];totalUsageCountValidator+=value;var dataItem=(new _series9.ResultSeriesDataItem).setName(dataObject[StatsParserConstants.KEY]).setY(value);0==i&&series.setTitle(this.guessTheNameOfTheFather(dataItem,type)),seriesData.push(dataItem)}totalUsageCountValidator!=_totalUsageCount&&(0,_classPrivateFieldGet2.default)(this,_logger).error("Inconsistency between the statistics value for total "+statisticName+" and the sun of the individual values ("+_totalUsageCount+"/"+totalUsageCountValidator+")."),properties.sort&&seriesData.sort(function(a,b){return a.name-b.name}),mainSeries.push(series)}}(0,_classPrivateFieldSet2.default)(this,_series,mainSeries),timer.end("parse"),timer.print()}}]),CountStatsParser}(_parser.Parser);exports.CountStatsParser=CountStatsParser;var _logger2=new WeakMap,_series2=new WeakMap,_seriesByRepertoire2=new WeakMap,_multipleSeries2=new WeakMap,JunctionLenghtStatsParser=function(_Parser2){(0,_inherits2.default)(JunctionLenghtStatsParser,_Parser2);var _super2=_createSuper(JunctionLenghtStatsParser);function JunctionLenghtStatsParser(){var _this2;return(0,_classCallCheck2.default)(this,JunctionLenghtStatsParser),_this2=_super2.call(this),_logger2.set((0,_assertThisInitialized2.default)(_this2),{writable:!0,value:void 0}),_series2.set((0,_assertThisInitialized2.default)(_this2),{writable:!0,value:void 0}),_seriesByRepertoire2.set((0,_assertThisInitialized2.default)(_this2),{writable:!0,value:void 0}),_multipleSeries2.set((0,_assertThisInitialized2.default)(_this2),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this2),_logger2,new _common.Logger("JunctionLenghtParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this2),_logger2).trace("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this2),_multipleSeries2,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this2),_series2,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this2),_seriesByRepertoire2,[]),_this2}return(0,_createClass2.default)(JunctionLenghtStatsParser,[{key:"getSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series2)}},{key:"isMultipleSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries2)}},{key:"_initializeRepertoire",value:function(repertoire_id){(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Initializing repertoire "+repertoire_id),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire2)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire2)[repertoire_id]=[])}},{key:"preparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger2).trace("preparse.")}},{key:"postparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger2).trace("postparse.")}},{key:"onparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger2).trace("parse");var timer=new _common.DebugTimer;timer.start("parse");var parsedProperties=this.properties,data=properties.getData(),seriesColors=properties.seriesColors,seriesName=properties.seriesName,sort=properties.sort,percentage=properties.percentage,colorIndex=0,colorIndexJumper=1,mainSeries=[];"string"==typeof data&&(data=JSON.parse(data));var messageArray=data[StatsParserConstants.MESSAGE],messageArrayLength=messageArray.length;if((0,_classPrivateFieldGet2.default)(this,_logger2).debug("Data Result length = "+messageArrayLength),1<messageArrayLength){if((0,_classPrivateFieldGet2.default)(this,_logger2).debug("Representing "+messageArrayLength+" repertoires."),(0,_classPrivateFieldSet2.default)(this,_multipleSeries2,!0),seriesColors.length<messageArrayLength)throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";colorIndexJumper=Math.floor((seriesColors.length-1)/(messageArrayLength-1))}percentage?(parsedProperties.setYLabel("Percentage"),parsedProperties.setDraw3D(!1)):(0,_classPrivateFieldGet2.default)(this,_multipleSeries2)&&parsedProperties.setDraw3D(!0);for(var j=0;j<messageArrayLength;j++){var color=seriesColors[colorIndex];colorIndex+=colorIndexJumper;var messageArrayObject=messageArray[j],messageArrayObjectRepertoires=messageArrayObject[StatsParserConstants.REPERTOIRES],repID=messageArrayObjectRepertoires[StatsParserConstants.REPERTOIRE_ID];if(0<messageArrayObject[StatsParserConstants.STATISTICS].length){this._initializeRepertoire(repID);for(var firstObject=messageArrayObject[StatsParserConstants.STATISTICS][0],statisticName=firstObject[StatsParserConstants.STATISTICS_NAME],resultSeriesId="rep".concat(repID).concat(statisticName),type=_common.ResultSeriesType.getByName(statisticName),_resultSeriesName="Repertoire ".concat(repID),resultSeriesName=seriesName&&seriesName[j]||_resultSeriesName,_totalUsageCount2=firstObject[StatsParserConstants.TOTAL],series=(new _series9.ResultSeries).setRepertoireId(repID).setSampleProcessingId(messageArrayObjectRepertoires[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(messageArrayObjectRepertoires[StatsParserConstants.DATA_PROCESSING_ID]).setId(resultSeriesId).setName(resultSeriesName).setFieldName(statisticName).setColor(color).setType(type),seriesData=series.data,totalUsageCountValidator=0,i=0;i<firstObject[StatsParserConstants.DATA].length;i++){var dataObject=firstObject[StatsParserConstants.DATA][i],value=dataObject[StatsParserConstants.VALUE];totalUsageCountValidator+=value;var dataItem=(new _series9.ResultSeriesDataItem).setName(dataObject[StatsParserConstants.KEY]).setY(percentage?value/_totalUsageCount2*100:value);0==i&&series.setTitle(this.guessTheNameOfTheFather(dataItem,type)),seriesData.push(dataItem)}if(totalUsageCountValidator!=_totalUsageCount2)throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Inconsistency between the statistics value for total "+statisticName+" and the sun of the individual values ("+_totalUsageCount2+"/"+totalUsageCountValidator+")."),new TypeError("Inconsistency between the statistics value for total "+statisticName+" and the sun of the individual values ("+_totalUsageCount2+"/"+totalUsageCountValidator+").");sort&&seriesData.sort(function(a,b){return a.name-b.name}),mainSeries.push(series)}}(0,_classPrivateFieldSet2.default)(this,_series2,mainSeries),timer.end("parse"),timer.print()}}]),JunctionLenghtStatsParser}(_parser.Parser);exports.JunctionLenghtStatsParser=JunctionLenghtStatsParser;var _logger3=new WeakMap,_geneType=new WeakMap,_multipleSeries3=new WeakMap,_series3=new WeakMap,_drilldownSeries=new WeakMap,_seriesByRepertoire3=new WeakMap,_geneSeriesByFamily=new WeakMap,_cellSeriesByGene=new WeakMap,_familySeriesByRepertoire=new WeakMap,_geneSeriesByRepertoire=new WeakMap,_cellSeriesByRepertoire=new WeakMap,GeneUsageDrilldownStatsParser=function(_DrilldownParser){(0,_inherits2.default)(GeneUsageDrilldownStatsParser,_DrilldownParser);var _super3=_createSuper(GeneUsageDrilldownStatsParser);function GeneUsageDrilldownStatsParser(type){var _this3;if((0,_classCallCheck2.default)(this,GeneUsageDrilldownStatsParser),_this3=_super3.call(this),_logger3.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_geneType.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_multipleSeries3.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_series3.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_drilldownSeries.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_seriesByRepertoire3.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_geneSeriesByFamily.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_cellSeriesByGene.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_familySeriesByRepertoire.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_geneSeriesByRepertoire.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_cellSeriesByRepertoire.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_logger3,new _common.Logger("GeneUsageDrilldownStatsParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this3),_logger3).debug("Constructor."),!_common.GeneType.contains(type))throw logger.fatal("type must exist in GeneType.genes"),"type must exist in GeneType.genes";return(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_geneType,type),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_multipleSeries3,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_series3,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_drilldownSeries,{series:[]}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_seriesByRepertoire3,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_geneSeriesByFamily,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_cellSeriesByGene,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_familySeriesByRepertoire,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_geneSeriesByRepertoire,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_cellSeriesByRepertoire,{}),_this3}return(0,_createClass2.default)(GeneUsageDrilldownStatsParser,[{key:"getSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_logger3).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series3)}},{key:"isMultipleSeries",value:function(){return this.multipleSeries}},{key:"getDrillupSeriesEvent",value:function(properties){if(this.drilldown){var logger=(0,_classPrivateFieldGet2.default)(this,_logger3),subtitle=properties.subtitle;return(0,_classPrivateFieldGet2.default)(this,_multipleSeries3)?logger.debug("retrieving multiple series drillup event"):logger.debug("retrieving single series drillup event"),function(e){var currentDrillLevelNumber=this.series[0].options._levelNumber||0;if(console.log(this),console.log(currentDrillLevelNumber),console.log(e),logger.trace(e.toString()),subtitle){var subIndex=currentDrillLevelNumber-1;subtitle[subIndex]?this.setTitle(null,{text:subtitle[subIndex]}):this.setTitle(null,{text:void 0})}}}}},{key:"getDrilldownSeriesEvent",value:function(properties){if((0,_classPrivateFieldGet2.default)(this,_logger3).debug("requested drilldown event"),this.drilldown){var logger=(0,_classPrivateFieldGet2.default)(this,_logger3),subtitle=properties.subtitle;if(!(0,_classPrivateFieldGet2.default)(this,_multipleSeries3))return(0,_classPrivateFieldGet2.default)(this,_logger3).debug("retrieving single series drilldown event"),function(e){var currentDrillLevelNumber=this.series[0].options._levelNumber||0;if(console.log(this),console.log(currentDrillLevelNumber),console.log(e),subtitle){var subIndex=currentDrillLevelNumber+1;subtitle[subIndex]?this.setTitle(null,{text:subtitle[subIndex]}):this.setTitle(null,{text:void 0})}logger.trace(e.toString())};var drilldownSeries=_objectSpread(_objectSpread({},(0,_classPrivateFieldGet2.default)(this,_geneSeriesByFamily)),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene));return function(e){var random=_common.Common.makeid(12),currentDrillLevelNumber=this.series[0].options._levelNumber||0;if(console.log(this),console.log(currentDrillLevelNumber),console.log(e),logger.trace(random+", "+e.toString()),e.seriesOptions)this.setTitle(null,{text:e.seriesOptions.name});else{logger.debug(random+", Gathering drilldown series for "+e.point.drilldown);for(var i=0;i<drilldownSeries[e.point.drilldown].length;i++){var series=drilldownSeries[e.point.drilldown][i];logger.debug(random+", Found series"),logger.trace(JSON.stringify(series)),this.addSingleSeriesAsDrilldown(e.point,series.asHighchartSeries())}logger.trace(JSON.stringify(this.drilldown)),this.applyDrilldown()}if(subtitle){var subIndex=currentDrillLevelNumber+1;subtitle[subIndex]?this.setTitle(null,{text:subtitle[subIndex]}):this.setTitle(null,{text:void 0})}}}}},{key:"_initializeRepertoire",value:function(repertoire_id){(0,_classPrivateFieldGet2.default)(this,_logger3).debug("Initializing repertoire "+repertoire_id),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire3)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire3)[repertoire_id]=[]),(0,_classPrivateFieldGet2.default)(this,_familySeriesByRepertoire)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_familySeriesByRepertoire)[repertoire_id]=[]),(0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire)[repertoire_id]=[]),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire)[repertoire_id]=[])}},{key:"_initializeGeneGroup",value:function(repertoire_id,geneGroupName){(0,_classPrivateFieldGet2.default)(this,_geneSeriesByFamily)[geneGroupName]||((0,_classPrivateFieldGet2.default)(this,_logger3).debug("Initializing #_geneSeriesByFamily["+geneGroupName+"]."),(0,_classPrivateFieldGet2.default)(this,_geneSeriesByFamily)[geneGroupName]=[])}},{key:"_initializeCellGroup",value:function(repertoire_id,cellGroupName){(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene)[cellGroupName]||((0,_classPrivateFieldGet2.default)(this,_logger3).debug("Initializing #_cellSeriesByGene["+cellGroupName+"]."),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene)[cellGroupName]=[])}},{key:"_addToStructures",value:function(series){if(!(series instanceof _series9.ResultSeries))throw"series type must be ResultSeries";var repertoire_id=series.repertoireId,type=series.type,parentName=series.parentName;switch(type.typeCode){case _common.ResultSeriesType.FAMILY:(0,_classPrivateFieldGet2.default)(this,_familySeriesByRepertoire)[repertoire_id].push(series);break;case _common.ResultSeriesType.GENE:(0,_classPrivateFieldGet2.default)(this,_logger3).debug("Received a new series of Genes. Repertoire:"+repertoire_id+" , parentName:"+parentName),parentName?((0,_classPrivateFieldGet2.default)(this,_logger3).debug("Adding to #_geneSeriesByFamily["+parentName+"] :"),(0,_classPrivateFieldGet2.default)(this,_geneSeriesByFamily)[parentName].push(series),(0,_classPrivateFieldGet2.default)(this,_logger3).debug((0,_classPrivateFieldGet2.default)(this,_geneSeriesByFamily)[parentName])):(0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire)[repertoire_id].push(series);break;case _common.ResultSeriesType.CALL:parentName?((0,_classPrivateFieldGet2.default)(this,_logger3).debug("Adding to #_cellSeriesByGene["+parentName+"] :"),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene)[parentName].push(series),(0,_classPrivateFieldGet2.default)(this,_logger3).debug((0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene)[parentName])):(0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire)[repertoire_id].push(series);break;default:throw"Trying to process an incompatible Result Series type in GeneUsageDrilldownStatsParser."}(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire3)[repertoire_id].push(series)}},{key:"preparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger3).trace("preparse.")}},{key:"postparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger3).trace("postparse.")}},{key:"onparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger3).trace("parse");var timer=new _common.DebugTimer;timer.start("parse");var parsedProperties=this.properties;parsedProperties.subtitle=[];var data=properties.getData(),seriesColors=properties.seriesColors,percentage=(properties.seriesName,properties.sort,properties.percentage),colorIndex=0,colorIndexJumper=1,mainSeries=[];"string"==typeof data&&(data=JSON.parse(data));var messageArray=data[StatsParserConstants.MESSAGE],messageArrayLength=messageArray.length;if((0,_classPrivateFieldGet2.default)(this,_logger3).debug("Data Result length = "+messageArrayLength),1<messageArrayLength){if((0,_classPrivateFieldGet2.default)(this,_logger3).debug("Representing "+messageArrayLength+" repertoires."),(0,_classPrivateFieldSet2.default)(this,_multipleSeries3,!0),seriesColors.length<messageArrayLength)throw(0,_classPrivateFieldGet2.default)(this,_logger3).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";colorIndexJumper=Math.floor((seriesColors.length-1)/(messageArrayLength-1))}percentage?(parsedProperties.setYLabel("Percentage"),parsedProperties.setDraw3D(!1)):(0,_classPrivateFieldGet2.default)(this,_multipleSeries3)&&parsedProperties.setDraw3D(!0);(0,_classPrivateFieldGet2.default)(this,_geneType);for(var familySeries,geneSeries,cellSeries,drilldownSeries=[],familyNames=[],geneNames=[],familyPostfix=StatsParserConstants.POSTFIX_FAMILY,genePostfix=StatsParserConstants.POSTFIX_GENE,geneSpliter=StatsParserConstants.SPLITER_GENE,cellPostfix=StatsParserConstants.POSTFIX_CALL,cellSpliter=StatsParserConstants.SPLITER_CALL,j=0;j<messageArrayLength;j++){var color=seriesColors[colorIndex];colorIndex+=colorIndexJumper;var messageArrayObject=messageArray[j],messageArrayObjectRepertoires=messageArrayObject[StatsParserConstants.REPERTOIRES],repID=messageArrayObjectRepertoires[StatsParserConstants.REPERTOIRE_ID];this._initializeRepertoire(repID);for(var i=0;i<messageArrayObject[StatsParserConstants.STATISTICS].length;i++){var statisticsObject=messageArrayObject[StatsParserConstants.STATISTICS][i],statisticName=statisticsObject[StatsParserConstants.STATISTICS_NAME],resultTypeCode=_common.ResultSeriesType.getByName(statisticName).typeCode;resultTypeCode==_common.ResultSeriesType.FAMILY?familySeries=statisticsObject:resultTypeCode==_common.ResultSeriesType.GENE?geneSeries=statisticsObject:resultTypeCode==_common.ResultSeriesType.CALL&&(cellSeries=statisticsObject)}if(!familySeries||!geneSeries||!cellSeries)throw new TypeError("Incomplete structure for Drilldown. A structure of subgroup > gene > cell is required.");if(familySeries){var _statisticName=familySeries[StatsParserConstants.STATISTICS_NAME],resultSeriesId="rep".concat(repID).concat(familyPostfix),type=_common.ResultSeriesType.getByName(_statisticName),_resultSeriesName="Repertoire ".concat(repID);properties.seriesName&&properties.seriesName[j];"Subgroup/Family";for(var _totalUsageCount3=familySeries[StatsParserConstants.TOTAL],series=(new _series9.ResultSeries).setRepertoireId(repID).setSampleProcessingId(messageArrayObjectRepertoires[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(messageArrayObjectRepertoires[StatsParserConstants.DATA_PROCESSING_ID]).setId(resultSeriesId).setName("Subgroup/Family").setFieldName(_statisticName).setColor(color).setType(type),seriesData=series.data,_i=0;_i<familySeries[StatsParserConstants.DATA].length;_i++){var dataObject=familySeries[StatsParserConstants.DATA][_i],familyName=dataObject[StatsParserConstants.KEY]||"",geneGroupName=familyName.concat(genePostfix);familyNames.push(familyName),this._initializeGeneGroup(repID,geneGroupName);var value=dataObject[StatsParserConstants.VALUE],dataItem=(new _series9.ResultSeriesDataItem).setName(familyName).setY(percentage?value/_totalUsageCount3*100:value).setDrilldown(geneGroupName);0==_i&&series.setTitle(this.guessTheNameOfTheFather(dataItem,type)),seriesData.push(dataItem)}properties.sort&&seriesData.sort(function(a,b){return a.name.localeCompare(b.name)}),mainSeries.push(series),this._addToStructures(series)}if(geneSeries){var _statisticName2=geneSeries[StatsParserConstants.STATISTICS_NAME],_resultSeriesId="rep".concat(repID).concat(genePostfix),_type=_common.ResultSeriesType.getByName(_statisticName2),_resultSeriesName2="Repertoire ".concat(repID);properties.seriesName&&properties.seriesName[j];"Gene";for(var _totalUsageCount4=geneSeries[StatsParserConstants.TOTAL],_series4=(new _series9.ResultSeries).setRepertoireId(repID).setSampleProcessingId(messageArrayObjectRepertoires[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(messageArrayObjectRepertoires[StatsParserConstants.DATA_PROCESSING_ID]).setId(_resultSeriesId).setName("Gene").setFieldName(_statisticName2).setColor(color).setType(_type),_seriesData=_series4.data,geneSeriesDict=new Object,_i2=0;_i2<familyNames.length;_i2++){var _geneGroupName=familyNames[_i2].concat(genePostfix);console.log(_geneGroupName),console.log(familyNames[_i2]);geneSeriesDict[familyNames[_i2]]=(new _series9.ResultSeries).setRepertoireId(repID).setSampleProcessingId(messageArrayObjectRepertoires[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(messageArrayObjectRepertoires[StatsParserConstants.DATA_PROCESSING_ID]).setId(_geneGroupName).setName("Gene").setFieldName(_statisticName2).setType(_type).setColor(color).setParentName(_geneGroupName).setTitle(familyNames[_i2])}for(var _i3=0;_i3<geneSeries[StatsParserConstants.DATA].length;_i3++){var _dataObject=geneSeries[StatsParserConstants.DATA][_i3],geneName=_dataObject[StatsParserConstants.KEY]||"",cellGroupName=geneName.concat(cellPostfix);geneNames.push(geneName),this._initializeCellGroup(repID,cellGroupName);var geneSpliterIndex=geneName.indexOf(geneSpliter);-1==geneSpliterIndex&&(geneSpliterIndex=geneName.length);var _familyName=geneName.substring(0,geneSpliterIndex);if(-1==geneSpliterIndex&&geneName){var errorMessage="Error in parsed document structure. Received an element of type "+_type.typeName+" with incompatible name "+_common.Common.quote(geneName);throw(0,_classPrivateFieldGet2.default)(this,_logger3).fatal(errorMessage),new TypeError(errorMessage)}var _value=_dataObject[StatsParserConstants.VALUE],_dataItem=(new _series9.ResultSeriesDataItem).setName(geneName).setY(percentage?_value/_totalUsageCount4*100:_value).setDrilldown(cellGroupName);if(0==_i3&&_series4.setTitle(this.guessTheNameOfTheFather(_dataItem,_type)),_seriesData.push(_dataItem),!geneSeriesDict[_familyName]){if(-1==(geneSpliterIndex=geneName.indexOf("/OR")))throw new TypeError("Invalid structure on AIRR data file. Can't nest gene "+_dataItem.name+", please check if subgroup "+_familyName+" exists");_familyName=geneName.substring(0,geneSpliterIndex)}geneSeriesDict[_familyName].data.push(_dataItem)}for(var key in properties.sort&&_seriesData.sort(function(a,b){return a.name.localeCompare(b.name)}),(0,_classPrivateFieldGet2.default)(this,_logger3).trace("All Gene data series for Repertoire "+repID+": "),(0,_classPrivateFieldGet2.default)(this,_logger3).trace(JSON.stringify(_series4)),this._addToStructures(_series4),(0,_classPrivateFieldGet2.default)(this,_logger3).trace("All series for gene data grouped by family : "),(0,_classPrivateFieldGet2.default)(this,_logger3).trace(JSON.stringify(geneSeriesDict)),geneSeriesDict){var _value2=geneSeriesDict[key];properties.sort&&_value2.data.sort(function(a,b){return a.name.localeCompare(b.name)}),this._addToStructures(_value2),drilldownSeries.push(_value2.asHighchartSeries())}}if(cellSeries){var _statisticName3=cellSeries[StatsParserConstants.STATISTICS_NAME],_resultSeriesId2="rep".concat(repID).concat(cellPostfix),_type2=_common.ResultSeriesType.getByName(_statisticName3),_resultSeriesName4="Repertoire ".concat(repID);properties.seriesName&&properties.seriesName[j];"Allele";for(var _totalUsageCount5=cellSeries[StatsParserConstants.TOTAL],_seriesData2=(new _series9.ResultSeries).setRepertoireId(repID).setSampleProcessingId(messageArrayObjectRepertoires[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(messageArrayObjectRepertoires[StatsParserConstants.DATA_PROCESSING_ID]).setId(_resultSeriesId2).setName("Allele").setFieldName(_statisticName3).setColor(color).setType(_type2).data,cellSeriesDict=new Object,_i4=0;_i4<geneNames.length;_i4++){var _cellGroupName=geneNames[_i4].concat(cellPostfix);cellSeriesDict[geneNames[_i4]]=(new _series9.ResultSeries).setRepertoireId(repID).setSampleProcessingId(messageArrayObjectRepertoires[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(messageArrayObjectRepertoires[StatsParserConstants.DATA_PROCESSING_ID]).setId(_cellGroupName).setName("Allele").setFieldName(_statisticName3).setType(_type2).setColor(color).setParentName(_cellGroupName)}for(var _i5=0;_i5<cellSeries[StatsParserConstants.DATA].length;_i5++){var _dataObject2=cellSeries[StatsParserConstants.DATA][_i5],cellName=_dataObject2[StatsParserConstants.KEY]||"",cellSpliterIndex=cellName.indexOf(cellSpliter);-1==cellSpliterIndex&&(cellSpliterIndex=cellName.length);var _geneName=cellName.substring(0,cellSpliterIndex),_value3=_dataObject2[StatsParserConstants.VALUE],_dataItem2=(new _series9.ResultSeriesDataItem).setName(cellName).setY(percentage?_value3/_totalUsageCount5*100:_value3);_seriesData2.push(_dataItem2);try{cellSeriesDict[_geneName].data.push(_dataItem2)}catch(error){var _errorMessage="Cannot find Gene '"+_geneName+"' in existing gene list ["+Object.keys(cellSeriesDict)+"] for Cell '"+cellName+"'";throw new TypeError(_errorMessage)}}for(var _key in cellSeriesDict){var _value4=cellSeriesDict[_key];this._addToStructures(_value4),drilldownSeries.push(_value4.asHighchartSeries())}}}(0,_classPrivateFieldSet2.default)(this,_series3,mainSeries),(0,_classPrivateFieldSet2.default)(this,_drilldownSeries,{series:drilldownSeries}),timer.end("parse"),timer.print()}},{key:"drilldown",get:function(){return!0}},{key:"geneType",get:function(){return(0,_classPrivateFieldGet2.default)(this,_geneType)}},{key:"drilldownSeries",get:function(){if((0,_classPrivateFieldGet2.default)(this,_logger3).debug("getting drilldown series."),this.drilldown&&!this.multipleSeries)return(0,_classPrivateFieldGet2.default)(this,_logger3).trace(JSON.stringify((0,_classPrivateFieldGet2.default)(this,_drilldownSeries))),(0,_classPrivateFieldGet2.default)(this,_drilldownSeries);var emptyDrilldownObject={series:[]};return(0,_classPrivateFieldGet2.default)(this,_logger3).trace(JSON.stringify(emptyDrilldownObject)),emptyDrilldownObject}},{key:"multipleSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries3)}}]),GeneUsageDrilldownStatsParser}(_parser.DrilldownParser);exports.GeneUsageDrilldownStatsParser=GeneUsageDrilldownStatsParser;var _logger4=new WeakMap,_multipleSeries4=new WeakMap,_series6=new WeakMap,_seriesByRepertoire4=new WeakMap,GeneUsageStatsParser=function(_Parser3){(0,_inherits2.default)(GeneUsageStatsParser,_Parser3);var _super4=_createSuper(GeneUsageStatsParser);function GeneUsageStatsParser(){var _this4;return(0,_classCallCheck2.default)(this,GeneUsageStatsParser),_this4=_super4.call(this),_logger4.set((0,_assertThisInitialized2.default)(_this4),{writable:!0,value:void 0}),_multipleSeries4.set((0,_assertThisInitialized2.default)(_this4),{writable:!0,value:void 0}),_series6.set((0,_assertThisInitialized2.default)(_this4),{writable:!0,value:void 0}),_seriesByRepertoire4.set((0,_assertThisInitialized2.default)(_this4),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this4),_logger4,new _common.Logger("GeneUsageStatsParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this4),_logger4).debug("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this4),_multipleSeries4,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this4),_series6,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this4),_seriesByRepertoire4,[]),_this4}return(0,_createClass2.default)(GeneUsageStatsParser,[{key:"getSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_logger4).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series6)}},{key:"isMultipleSeries",value:function(){return this.multipleSeries}},{key:"getDrillupSeriesEvent",value:function(properties){}},{key:"getDrilldownSeriesEvent",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger4).debug("requested drilldown event")}},{key:"_initializeRepertoire",value:function(repertoire_id){(0,_classPrivateFieldGet2.default)(this,_logger4).debug("Initializing repertoire "+repertoire_id),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire4)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire4)[repertoire_id]=[])}},{key:"preparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger4).trace("preparse.")}},{key:"postparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger4).trace("postparse.")}},{key:"onparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger4).trace("parse");var timer=new _common.DebugTimer;timer.start("parse");var parsedProperties=this.properties,data=properties.getData(),seriesColors=properties.seriesColors,percentage=(properties.seriesName,properties.sort,properties.percentage),colorIndex=0,colorIndexJumper=1,mainSeries=[];"string"==typeof data&&(data=JSON.parse(data));var messageArray=data[StatsParserConstants.MESSAGE],messageArrayLength=messageArray.length;if((0,_classPrivateFieldGet2.default)(this,_logger4).debug("Data Result length = "+messageArrayLength),1<messageArrayLength){if((0,_classPrivateFieldGet2.default)(this,_logger4).debug("Representing "+messageArrayLength+" repertoires."),(0,_classPrivateFieldSet2.default)(this,_multipleSeries4,!0),seriesColors.length<messageArrayLength)throw(0,_classPrivateFieldGet2.default)(this,_logger4).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";colorIndexJumper=Math.floor((seriesColors.length-1)/(messageArrayLength-1))}percentage?(parsedProperties.setYLabel("Percentage"),parsedProperties.setDraw3D(!1)):(0,_classPrivateFieldGet2.default)(this,_multipleSeries4)&&parsedProperties.setDraw3D(!0);for(var j=0;j<messageArrayLength;j++){var color=seriesColors[colorIndex];colorIndex+=colorIndexJumper;var messageArrayObject=messageArray[j],messageArrayObjectRepertoires=messageArrayObject[StatsParserConstants.REPERTOIRES],repID=messageArrayObjectRepertoires[StatsParserConstants.REPERTOIRE_ID];if(0<messageArrayObject[StatsParserConstants.STATISTICS].length){this._initializeRepertoire(repID);var firstObject=messageArrayObject[StatsParserConstants.STATISTICS][0],statisticName=firstObject[StatsParserConstants.STATISTICS_NAME],resultSeriesId="rep".concat(repID).concat(statisticName),type=_common.ResultSeriesType.getByName(statisticName),_resultSeriesName="Repertoire ".concat(repID);properties.seriesName&&properties.seriesName[j];"Subgroup/Family";for(var _totalUsageCount6=firstObject[StatsParserConstants.TOTAL],series=(new _series9.ResultSeries).setRepertoireId(repID).setSampleProcessingId(messageArrayObjectRepertoires[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(messageArrayObjectRepertoires[StatsParserConstants.DATA_PROCESSING_ID]).setId(resultSeriesId).setName("Subgroup/Family").setFieldName(statisticName).setColor(color).setType(type),seriesData=series.data,i=0;i<firstObject[StatsParserConstants.DATA].length;i++){var dataObject=firstObject[StatsParserConstants.DATA][i],value=dataObject[StatsParserConstants.VALUE],dataItem=(new _series9.ResultSeriesDataItem).setName(dataObject[StatsParserConstants.KEY]).setY(percentage?value/_totalUsageCount6*100:value);seriesData.push(dataItem)}properties.sort&&seriesData.sort(function(a,b){return a.name.localeCompare(b.name)}),mainSeries.push(series)}}(0,_classPrivateFieldSet2.default)(this,_series6,mainSeries),timer.end("parse"),timer.print()}},{key:"drilldown",get:function(){return!1}},{key:"drilldownSeries",get:function(){(0,_classPrivateFieldGet2.default)(this,_logger4).debug("getting drilldown series.");var emptyDrilldownObject={series:[]};return(0,_classPrivateFieldGet2.default)(this,_logger4).trace(JSON.stringify(emptyDrilldownObject)),emptyDrilldownObject}},{key:"multipleSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries4)}}]),GeneUsageStatsParser}(_parser.Parser);exports.GeneUsageStatsParser=GeneUsageStatsParser;var _logger5=new WeakMap,_geneType2=new WeakMap,_multipleSeries5=new WeakMap,_series7=new WeakMap,_drilldownSeries2=new WeakMap,_seriesByRepertoire5=new WeakMap,_cellSeriesByGene2=new WeakMap,_geneSeriesByRepertoire2=new WeakMap,_cellSeriesByRepertoire2=new WeakMap,JGeneUsageDrilldownStatsParser=function(_DrilldownParser2){(0,_inherits2.default)(JGeneUsageDrilldownStatsParser,_DrilldownParser2);var _super5=_createSuper(JGeneUsageDrilldownStatsParser);function JGeneUsageDrilldownStatsParser(type){var _this5;if((0,_classCallCheck2.default)(this,JGeneUsageDrilldownStatsParser),_this5=_super5.call(this),_logger5.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),_geneType2.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),_multipleSeries5.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),_series7.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),_drilldownSeries2.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),_seriesByRepertoire5.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),_cellSeriesByGene2.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),_geneSeriesByRepertoire2.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),_cellSeriesByRepertoire2.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_logger5,new _common.Logger("GeneUsageDrilldownStatsParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this5),_logger5).debug("Constructor."),type!=_common.GeneType.J_GENE)throw logger.fatal("type must be GeneType.J_TYPE"),"type must be GeneType.J_TYPE";return(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_geneType2,type),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_multipleSeries5,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_series7,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_drilldownSeries2,{series:[]}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_seriesByRepertoire5,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_cellSeriesByGene2,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_geneSeriesByRepertoire2,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_cellSeriesByRepertoire2,{}),_this5}return(0,_createClass2.default)(JGeneUsageDrilldownStatsParser,[{key:"getSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_logger5).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series7)}},{key:"isMultipleSeries",value:function(){return this.multipleSeries}},{key:"getDrillupSeriesEvent",value:function(properties){var logger=(0,_classPrivateFieldGet2.default)(this,_logger5),subtitle=properties.subtitle;return(0,_classPrivateFieldGet2.default)(this,_multipleSeries5)?(logger.debug("retrieving multiple series drillup event"),function(e){var currentDrillLevelNumber=this.series[0].options._levelNumber||0;if(console.log(this),console.log(currentDrillLevelNumber),console.log(e),logger.trace(e.toString()),subtitle){var subIndex=currentDrillLevelNumber+1;subtitle[subIndex]?this.setTitle(null,{text:subtitle[subIndex]}):this.setTitle(null,{text:void 0})}}):(logger.debug("retrieving single series drillup event"),function(e){var currentDrillLevelNumber=this.series[0].options._levelNumber||0;if(console.log(this),console.log(currentDrillLevelNumber),console.log(e),logger.trace(e.toString()),subtitle){var subIndex=currentDrillLevelNumber-1;subtitle[subIndex]?this.setTitle(null,{text:subtitle[subIndex]}):this.setTitle(null,{text:void 0})}})}},{key:"getDrilldownSeriesEvent",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger5).debug("requested drilldown event");var logger=(0,_classPrivateFieldGet2.default)(this,_logger5),subtitle=properties.subtitle;if(!(0,_classPrivateFieldGet2.default)(this,_multipleSeries5))return(0,_classPrivateFieldGet2.default)(this,_logger5).debug("retrieving single series drilldown event"),function(e){var currentDrillLevelNumber=this.series[0].options._levelNumber||0;if(console.log(this),console.log(currentDrillLevelNumber),console.log(e),subtitle){var subIndex=currentDrillLevelNumber+1;subtitle[subIndex]?this.setTitle(null,{text:subtitle[subIndex]}):this.setTitle(null,{text:void 0})}logger.trace(e.toString())};var drilldownSeries=_objectSpread({},(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene2));return function(e){var random=_common.Common.makeid(12),currentDrillLevelNumber=this.series[0].options._levelNumber||0;if(console.log(this),console.log(this.series[0].options._levelNumber),console.log(e),logger.trace(random+", "+e.toString()),!e.seriesOptions){logger.debug(random+", Gathering drilldown series for "+e.point.drilldown);for(var i=0;i<drilldownSeries[e.point.drilldown].length;i++){var series=drilldownSeries[e.point.drilldown][i];logger.debug(random+", Found series"),logger.trace(JSON.stringify(series)),this.addSingleSeriesAsDrilldown(e.point,series.asHighchartSeries())}logger.trace(JSON.stringify(this.drilldown)),this.applyDrilldown()}if(subtitle){var subIndex=currentDrillLevelNumber+1;subtitle[subIndex]?this.setTitle(null,{text:subtitle[subIndex]}):this.setTitle(null,{text:void 0})}}}},{key:"_initializeRepertoire",value:function(repertoire_id){(0,_classPrivateFieldGet2.default)(this,_logger5).debug("Initializing repertoire "+repertoire_id),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire5)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire5)[repertoire_id]=[]),(0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire2)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire2)[repertoire_id]=[]),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire2)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire2)[repertoire_id]=[])}},{key:"_initializeCellGroup",value:function(repertoire_id,cellGroupName){(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene2)[cellGroupName]||((0,_classPrivateFieldGet2.default)(this,_logger5).debug("Initializing #_cellSeriesByGene["+cellGroupName+"]."),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene2)[cellGroupName]=[])}},{key:"_addToStructures",value:function(series){if(!(series instanceof _series9.ResultSeries))throw"series type must be ResultSeries";var repertoire_id=series.repertoireId,type=series.type,parentName=series.parentName;switch(type.typeCode){case _common.ResultSeriesType.GENE:(0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire2)[repertoire_id].push(series);break;case _common.ResultSeriesType.CALL:parentName?((0,_classPrivateFieldGet2.default)(this,_logger5).debug("Adding to #_cellSeriesByGene["+parentName+"] :"),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene2)[parentName].push(series),(0,_classPrivateFieldGet2.default)(this,_logger5).debug((0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene2)[parentName])):(0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire2)[repertoire_id].push(series);break;default:throw"Trying to process an incompatible Result Series type in GeneUsageDrilldownStatsParser."}(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire5)[repertoire_id].push(series)}},{key:"preparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger5).trace("preparse.")}},{key:"postparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger5).trace("postparse.")}},{key:"onparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger5).trace("parse");var timer=new _common.DebugTimer;timer.start("parse");var parsedProperties=this.properties,data=properties.getData(),seriesColors=properties.seriesColors,percentage=(properties.seriesName,properties.sort,properties.percentage),colorIndex=0,colorIndexJumper=1,mainSeries=[];"string"==typeof data&&(data=JSON.parse(data));var messageArray=data[StatsParserConstants.MESSAGE],messageArrayLength=messageArray.length;if((0,_classPrivateFieldGet2.default)(this,_logger5).debug("Data Result length = "+messageArrayLength),1<messageArrayLength){if((0,_classPrivateFieldGet2.default)(this,_logger5).debug("Representing "+messageArrayLength+" repertoires."),(0,_classPrivateFieldSet2.default)(this,_multipleSeries5,!0),seriesColors.length<messageArrayLength)throw(0,_classPrivateFieldGet2.default)(this,_logger5).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";colorIndexJumper=Math.floor((seriesColors.length-1)/(messageArrayLength-1))}percentage?(parsedProperties.setYLabel("Percentage"),parsedProperties.setDraw3D(!1)):(0,_classPrivateFieldGet2.default)(this,_multipleSeries5)&&parsedProperties.setDraw3D(!0);for(var geneSeries,cellSeries,drilldownSeries=[],geneNames=[],genePostfix=StatsParserConstants.POSTFIX_GENE,cellPostfix=(StatsParserConstants.SPLITER_GENE,StatsParserConstants.POSTFIX_CALL),cellSpliter=StatsParserConstants.SPLITER_CALL,j=0;j<messageArrayLength;j++){var color=seriesColors[colorIndex];colorIndex+=colorIndexJumper;var messageArrayObject=messageArray[j],messageArrayObjectRepertoires=messageArrayObject[StatsParserConstants.REPERTOIRES],repID=messageArrayObjectRepertoires[StatsParserConstants.REPERTOIRE_ID];this._initializeRepertoire(repID);for(var i=0;i<messageArrayObject[StatsParserConstants.STATISTICS].length;i++){var statisticsObject=messageArrayObject[StatsParserConstants.STATISTICS][i],statisticName=statisticsObject[StatsParserConstants.STATISTICS_NAME],resultTypeCode=_common.ResultSeriesType.getByName(statisticName).typeCode;resultTypeCode==_common.ResultSeriesType.GENE?geneSeries=statisticsObject:resultTypeCode==_common.ResultSeriesType.CALL?cellSeries=statisticsObject:_common.ResultSeriesType.FAMILY}if(!geneSeries||!cellSeries)throw"Incomplete structure for Drilldown. A structure of gene > call is required.";if(geneSeries){var _statisticName4=geneSeries[StatsParserConstants.STATISTICS_NAME],resultSeriesId="rep".concat(repID).concat(genePostfix),type=_common.ResultSeriesType.getByName(_statisticName4),_resultSeriesName="Repertoire ".concat(repID);properties.seriesName&&properties.seriesName[j];"Gene";for(var _totalUsageCount7=geneSeries[StatsParserConstants.TOTAL],series=(new _series9.ResultSeries).setRepertoireId(repID).setSampleProcessingId(messageArrayObjectRepertoires[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(messageArrayObjectRepertoires[StatsParserConstants.DATA_PROCESSING_ID]).setId(resultSeriesId).setName("Gene").setFieldName(_statisticName4).setColor(color).setType(type),seriesData=series.data,_i6=0;_i6<geneSeries[StatsParserConstants.DATA].length;_i6++){var dataObject=geneSeries[StatsParserConstants.DATA][_i6],geneName=dataObject[StatsParserConstants.KEY]||"",callGroupName=geneName.concat(cellPostfix);geneNames.push(geneName),this._initializeCellGroup(repID,callGroupName);var value=dataObject[StatsParserConstants.VALUE],dataItem=(new _series9.ResultSeriesDataItem).setName(geneName).setY(percentage?value/_totalUsageCount7*100:value).setDrilldown(callGroupName);seriesData.push(dataItem)}properties.sort&&seriesData.sort(function(a,b){return a.name.localeCompare(b.name)}),mainSeries.push(series),this._addToStructures(series)}if(cellSeries){var _statisticName5=cellSeries[StatsParserConstants.STATISTICS_NAME],_resultSeriesId3="rep".concat(repID).concat(cellPostfix),_type3=_common.ResultSeriesType.getByName(_statisticName5),_resultSeriesName6="Repertoire ".concat(repID);properties.seriesName&&properties.seriesName[j];"Allele";for(var _seriesData3=(new _series9.ResultSeries).setRepertoireId(repID).setSampleProcessingId(messageArrayObjectRepertoires[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(messageArrayObjectRepertoires[StatsParserConstants.DATA_PROCESSING_ID]).setId(_resultSeriesId3).setName("Allele").setFieldName(_statisticName5).setColor(color).setType(_type3).data,cellSeriesDict=new Object,_i7=0;_i7<geneNames.length;_i7++){var cellGroupName=geneNames[_i7].concat(cellPostfix);cellSeriesDict[geneNames[_i7]]=(new _series9.ResultSeries).setRepertoireId(repID).setSampleProcessingId(messageArrayObjectRepertoires[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(messageArrayObjectRepertoires[StatsParserConstants.DATA_PROCESSING_ID]).setId(cellGroupName).setName("Allele").setFieldName(_statisticName5).setType(_type3).setColor(color).setParentName(cellGroupName)}for(var _i8=0;_i8<cellSeries[StatsParserConstants.DATA].length;_i8++){var _dataObject3=cellSeries[StatsParserConstants.DATA][_i8],cellName=_dataObject3[StatsParserConstants.KEY]||"",cellSpliterIndex=cellName.indexOf(cellSpliter);-1==cellSpliterIndex&&(cellSpliterIndex=cellName.length);var _geneName2=cellName.substring(0,cellSpliterIndex),_value5=_dataObject3[StatsParserConstants.VALUE],_dataItem3=(new _series9.ResultSeriesDataItem).setName(cellName).setY(percentage?_value5/totalUsageCount*100:_value5);_seriesData3.push(_dataItem3),cellSeriesDict[_geneName2].data.push(_dataItem3)}for(var key in properties.sort&&_seriesData3.sort(function(a,b){return a.name.localeCompare(b.name)}),cellSeriesDict){var _value6=cellSeriesDict[key];properties.sort&&_value6.data.sort(function(a,b){return a.name.localeCompare(b.name)}),this._addToStructures(_value6),drilldownSeries.push(_value6.asHighchartSeries())}}}(0,_classPrivateFieldSet2.default)(this,_series7,mainSeries),(0,_classPrivateFieldSet2.default)(this,_drilldownSeries2,{series:drilldownSeries}),timer.end("parse"),timer.print()}},{key:"drilldown",get:function(){return!0}},{key:"geneType",get:function(){return(0,_classPrivateFieldGet2.default)(this,_geneType2)}},{key:"drilldownSeries",get:function(){if((0,_classPrivateFieldGet2.default)(this,_logger5).debug("getting drilldown series."),this.multipleSeries){var emptyDrilldownObject={series:[]};return(0,_classPrivateFieldGet2.default)(this,_logger5).trace(JSON.stringify(emptyDrilldownObject)),emptyDrilldownObject}return(0,_classPrivateFieldGet2.default)(this,_logger5).trace(JSON.stringify((0,_classPrivateFieldGet2.default)(this,_drilldownSeries2))),(0,_classPrivateFieldGet2.default)(this,_drilldownSeries2)}},{key:"multipleSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries5)}}]),JGeneUsageDrilldownStatsParser}(_parser.DrilldownParser);exports.JGeneUsageDrilldownStatsParser=JGeneUsageDrilldownStatsParser},{"./common.js":21,"./parser.js":27,"./properties.js":28,"./series.js":30,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/classPrivateFieldGet":5,"@babel/runtime/helpers/classPrivateFieldSet":6,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":14}],23:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.CGeneUsageStatsResult=exports.JGeneUsageStatsResult=exports.DGeneUsageStatsResult=exports.VGeneUsageStatsResult=exports.GeneUsageStatsResult=exports.CountStatsResult=exports.JunctionLengthStatsResult=void 0;var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_common=require("./common.js"),_result=require("./result.js"),_iReceptorStatsParser=require("./iReceptorStatsParser.js");function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var result,Super=(0,_getPrototypeOf2.default)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,result)}}var StatsResult=function(_Result){(0,_inherits2.default)(StatsResult,_Result);var _super=_createSuper(StatsResult);function StatsResult(){return(0,_classCallCheck2.default)(this,StatsResult),_super.call(this)}return StatsResult}(_result.Result),_logger=new WeakMap,CountStatsResult=function(_StatsResult){(0,_inherits2.default)(CountStatsResult,_StatsResult);var _super2=_createSuper(CountStatsResult);function CountStatsResult(){var _this;return(0,_classCallCheck2.default)(this,CountStatsResult),_this=_super2.call(this),_logger.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_logger,new _common.Logger("CountStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this),_logger).debug("Constructor."),_this.properties.setTitle(CountStatsResult.TITLE).setYLabel(CountStatsResult.Y_LABEL),_this.setParser(new _iReceptorStatsParser.CountStatsParser),_this}return(0,_createClass2.default)(CountStatsResult,null,[{key:"TITLE",get:function(){return"Count"}},{key:"Y_LABEL",get:function(){return"Count"}}]),(0,_createClass2.default)(CountStatsResult,[{key:"isMultipleSeries",value:function(){return this.parser.isMultipleSeries()}},{key:"update",value:function(properties){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("update"),this.properties.dataDrilldown==properties.dataDrilldown?this:(this.properties.setDataDrilldown(properties.dataDrilldown),this.setParser(new _iReceptorStatsParser.CountStatsParser))}},{key:"drilldownSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting drilldown series."),this.parser.drilldownSeries}}]),CountStatsResult}(StatsResult);exports.CountStatsResult=CountStatsResult;var _logger2=new WeakMap,JunctionLengthStatsResult=function(_StatsResult2){(0,_inherits2.default)(JunctionLengthStatsResult,_StatsResult2);var _super3=_createSuper(JunctionLengthStatsResult);function JunctionLengthStatsResult(){var _this2;return(0,_classCallCheck2.default)(this,JunctionLengthStatsResult),_this2=_super3.call(this),_logger2.set((0,_assertThisInitialized2.default)(_this2),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this2),_logger2,new _common.Logger("JunctionLengthStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this2),_logger2).debug("Constructor."),_this2.properties.setTitle("Junction Length"),_this2.setParser(new _iReceptorStatsParser.JunctionLenghtStatsParser),_this2}return(0,_createClass2.default)(JunctionLengthStatsResult,null,[{key:"TITLE",get:function(){return"Junction Length"}},{key:"Y_LABEL",get:function(){return"Percentage"}}]),(0,_createClass2.default)(JunctionLengthStatsResult,[{key:"isMultipleSeries",value:function(){return this.parser.isMultipleSeries()}},{key:"update",value:function(properties){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("update"),this.properties.dataDrilldown==properties.dataDrilldown?this:(this.properties.setDataDrilldown(properties.dataDrilldown),this.setParser(new _iReceptorStatsParser.JunctionLenghtStatsParser))}},{key:"drilldownSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting drilldown series."),this.parser.drilldownSeries}}]),JunctionLengthStatsResult}(StatsResult);exports.JunctionLengthStatsResult=JunctionLengthStatsResult;var _logger3=new WeakMap,_geneType=new WeakMap,GeneUsageStatsResult=function(_StatsResult3){(0,_inherits2.default)(GeneUsageStatsResult,_StatsResult3);var _super4=_createSuper(GeneUsageStatsResult);function GeneUsageStatsResult(type){var _this3;if((0,_classCallCheck2.default)(this,GeneUsageStatsResult),_this3=_super4.call(this),_logger3.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_geneType.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_logger3,new _common.Logger("GeneUsageStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this3),_logger3).debug("Constructor."),!_common.GeneType.contains(type))throw logger.fatal("type must exist in GeneType.genes"),"type must exist in GeneType.genes";return(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_geneType,type),_this3.properties.setTitle("IR+ Repertoire Stats").setSubtitle("Subgroups"),_this3.setParser(_this3.drilldown?new _iReceptorStatsParser.GeneUsageDrilldownStatsParser(type):new _iReceptorStatsParser.GeneUsageStatsParser(type)),_this3}return(0,_createClass2.default)(GeneUsageStatsResult,[{key:"isMultipleSeries",value:function(){return this.parser.multipleSeries}},{key:"drilldownSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger3).debug("getting drilldown series."),this.parser.drilldownSeries}},{key:"multipleSeries",get:function(){return this.parser.multipleSeries}}]),GeneUsageStatsResult}(StatsResult);exports.GeneUsageStatsResult=GeneUsageStatsResult;var _logger4=new WeakMap,VGeneUsageStatsResult=function(_GeneUsageStatsResult){(0,_inherits2.default)(VGeneUsageStatsResult,_GeneUsageStatsResult);var _super5=_createSuper(VGeneUsageStatsResult);function VGeneUsageStatsResult(){var _this4;return(0,_classCallCheck2.default)(this,VGeneUsageStatsResult),_this4=_super5.call(this,_common.GeneType.V_GENE),_logger4.set((0,_assertThisInitialized2.default)(_this4),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this4),_logger4,new _common.Logger("VGeneUsageStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this4),_logger4).debug("Constructor."),_this4}return(0,_createClass2.default)(VGeneUsageStatsResult,[{key:"update",value:function(properties){return(0,_classPrivateFieldGet2.default)(this,_logger4).debug("update"),this.properties.dataDrilldown==properties.dataDrilldown?this:(this.properties.setDataDrilldown(properties.dataDrilldown),this.setParser(this.drilldown?new _iReceptorStatsParser.GeneUsageDrilldownStatsParser(_common.GeneType.V_GENE):new _iReceptorStatsParser.GeneUsageStatsParser(_common.GeneType.V_GENE)))}}]),VGeneUsageStatsResult}(GeneUsageStatsResult);exports.VGeneUsageStatsResult=VGeneUsageStatsResult;var _logger5=new WeakMap,DGeneUsageStatsResult=function(_GeneUsageStatsResult2){(0,_inherits2.default)(DGeneUsageStatsResult,_GeneUsageStatsResult2);var _super6=_createSuper(DGeneUsageStatsResult);function DGeneUsageStatsResult(){var _this5;return(0,_classCallCheck2.default)(this,DGeneUsageStatsResult),_this5=_super6.call(this,_common.GeneType.D_GENE),_logger5.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_logger5,new _common.Logger("DGeneUsageStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this5),_logger5).debug("Constructor."),_this5}return(0,_createClass2.default)(DGeneUsageStatsResult,[{key:"update",value:function(properties){return(0,_classPrivateFieldGet2.default)(this,_logger5).debug("update"),this.properties.dataDrilldown==properties.dataDrilldown?this:(this.properties.setDataDrilldown(properties.dataDrilldown),this.setParser(this.drilldown?new _iReceptorStatsParser.GeneUsageDrilldownStatsParser(_common.GeneType.D_GENE):new _iReceptorStatsParser.GeneUsageStatsParser(_common.GeneType.D_GENE)))}}]),DGeneUsageStatsResult}(GeneUsageStatsResult);exports.DGeneUsageStatsResult=DGeneUsageStatsResult;var _logger6=new WeakMap,JGeneUsageStatsResult=function(_GeneUsageStatsResult3){(0,_inherits2.default)(JGeneUsageStatsResult,_GeneUsageStatsResult3);var _super7=_createSuper(JGeneUsageStatsResult);function JGeneUsageStatsResult(){var _this6;return(0,_classCallCheck2.default)(this,JGeneUsageStatsResult),_this6=_super7.call(this,_common.GeneType.J_GENE),_logger6.set((0,_assertThisInitialized2.default)(_this6),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this6),_logger6,new _common.Logger("JGeneUsageStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this6),_logger6).debug("Constructor."),_this6.drilldown&&_this6.setParser(new _iReceptorStatsParser.JGeneUsageDrilldownStatsParser(_common.GeneType.J_GENE)),_this6}return(0,_createClass2.default)(JGeneUsageStatsResult,[{key:"update",value:function(properties){return(0,_classPrivateFieldGet2.default)(this,_logger6).debug("update"),this.properties.dataDrilldown==properties.dataDrilldown?this:(this.properties.setDataDrilldown(properties.dataDrilldown),this.setParser(this.drilldown?new _iReceptorStatsParser.JGeneUsageDrilldownStatsParser(_common.GeneType.J_GENE):new _iReceptorStatsParser.GeneUsageStatsParser(_common.GeneType.J_GENE)))}}]),JGeneUsageStatsResult}(GeneUsageStatsResult);exports.JGeneUsageStatsResult=JGeneUsageStatsResult;var _logger7=new WeakMap,CGeneUsageStatsResult=function(_GeneUsageStatsResult4){(0,_inherits2.default)(CGeneUsageStatsResult,_GeneUsageStatsResult4);var _super8=_createSuper(CGeneUsageStatsResult);function CGeneUsageStatsResult(){var _this7;return(0,_classCallCheck2.default)(this,CGeneUsageStatsResult),_this7=_super8.call(this,_common.GeneType.C_GENE),_logger7.set((0,_assertThisInitialized2.default)(_this7),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this7),_logger7,new _common.Logger("CGeneUsageStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this7),_logger7).debug("Constructor."),_this7}return(0,_createClass2.default)(CGeneUsageStatsResult,[{key:"update",value:function(properties){return(0,_classPrivateFieldGet2.default)(this,_logger7).debug("update"),this.properties.dataDrilldown==properties.dataDrilldown?this:(this.properties.setDataDrilldown(properties.dataDrilldown),this.setParser(this.drilldown?new _iReceptorStatsParser.GeneUsageDrilldownStatsParser(_common.GeneType.C_GENE):new _iReceptorStatsParser.GeneUsageStatsParser(_common.GeneType.C_GENE)))}}]),CGeneUsageStatsResult}(GeneUsageStatsResult);exports.CGeneUsageStatsResult=CGeneUsageStatsResult},{"./common.js":21,"./iReceptorStatsParser.js":22,"./result.js":29,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/classPrivateFieldGet":5,"@babel/runtime/helpers/classPrivateFieldSet":6,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":14}],24:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImmuneDBGeneTopCountStatsParser=exports.ImmuneDbCloneCountParser=exports.ImmuneDBFunctionalityCountStatsParser=exports.ImmuneDBStatsParserConstants=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_common=require("./common.js"),_parser=require("./parser.js"),_series4=require("./series.js"),_iReceptorStatsParser=require("./iReceptorStatsParser.js"),_jsonpathPlus=require("jsonpath-plus");function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var result,Super=(0,_getPrototypeOf2.default)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,result)}}var ImmuneDBStatsParserConstants=function(_StatsParserConstants){(0,_inherits2.default)(ImmuneDBStatsParserConstants,_StatsParserConstants);var _super=_createSuper(ImmuneDBStatsParserConstants);function ImmuneDBStatsParserConstants(){return(0,_classCallCheck2.default)(this,ImmuneDBStatsParserConstants),_super.apply(this,arguments)}return(0,_createClass2.default)(ImmuneDBStatsParserConstants,null,[{key:"STUDY_ID",get:function(){return ImmuneDBStatsParserConstants.VOCABULARY.STUDY_ID}},{key:"SUBJECT_ID",get:function(){return ImmuneDBStatsParserConstants.VOCABULARY.SUBJECT_ID}}]),ImmuneDBStatsParserConstants}(_iReceptorStatsParser.StatsParserConstants);exports.ImmuneDBStatsParserConstants=ImmuneDBStatsParserConstants,(0,_defineProperty2.default)(ImmuneDBStatsParserConstants,"VOCABULARY",{STUDY_ID:"study",SUBJECT_ID:"subject_id"});var _logger=new WeakMap,_multipleSeries=new WeakMap,_series=new WeakMap,_seriesByRepertoire=new WeakMap,_seriesByStudy=new WeakMap,_seriesBySubject=new WeakMap,_seriesByKey=new WeakMap,_data=new WeakMap,_seriesColors=new WeakMap,_seriesName=new WeakMap,_sort=new WeakMap,_percentage=new WeakMap,_colorIndex=new WeakMap,_colorIndexJumper=new WeakMap,ImmuneDBGeneTopCountStatsParser=function(_Parser){(0,_inherits2.default)(ImmuneDBGeneTopCountStatsParser,_Parser);var _super2=_createSuper(ImmuneDBGeneTopCountStatsParser);function ImmuneDBGeneTopCountStatsParser(){var _this;return(0,_classCallCheck2.default)(this,ImmuneDBGeneTopCountStatsParser),_this=_super2.call(this),_logger.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_multipleSeries.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_series.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_seriesByRepertoire.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_seriesByStudy.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_seriesBySubject.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_seriesByKey.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_data.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_seriesColors.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_seriesName.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_sort.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_percentage.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_colorIndex.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_colorIndexJumper.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_logger,new _common.Logger("ImmuneDBGeneTopCountStatsParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this),_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_multipleSeries,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_series,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_seriesByRepertoire,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_seriesByStudy,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_seriesBySubject,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_seriesByKey,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_data,void 0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_seriesColors,void 0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_seriesName,void 0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_sort,void 0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_percentage,void 0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_colorIndex,0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_colorIndexJumper,1),_this}return(0,_createClass2.default)(ImmuneDBGeneTopCountStatsParser,[{key:"getSeries",value:function(){var _this2=this;(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting series.");var series=[];return Object.keys((0,_classPrivateFieldGet2.default)(this,_seriesByKey)).forEach(function(key){series.push((0,_classPrivateFieldGet2.default)(_this2,_seriesByKey)[key])}),series}},{key:"isMultipleSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries)}},{key:"_initializeRepertoire",value:function(repertoire_id){return(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_logger).debug("Initializing repertoire "+repertoire_id),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire)[repertoire_id]=[]),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire)[repertoire_id]}},{key:"_initializeStudy",value:function(study_id){return(0,_classPrivateFieldGet2.default)(this,_seriesByStudy)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_logger).debug("Initializing study "+study_id),(0,_classPrivateFieldGet2.default)(this,_seriesByStudy)[study_id]=[]),(0,_classPrivateFieldGet2.default)(this,_seriesByStudy)[study_id]}},{key:"_initializeSubject",value:function(subject_id){return(0,_classPrivateFieldGet2.default)(this,_seriesBySubject)[subject_id]||((0,_classPrivateFieldGet2.default)(this,_logger).debug("Initializing subject "+subject_id),(0,_classPrivateFieldGet2.default)(this,_seriesBySubject)[subject_id]=[]),(0,_classPrivateFieldGet2.default)(this,_seriesBySubject)[subject_id]}},{key:"preparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger).trace("preparse.");var parsedProperties=this.properties;(0,_classPrivateFieldSet2.default)(this,_data,properties.getData()),(0,_classPrivateFieldSet2.default)(this,_seriesColors,properties.seriesColors),(0,_classPrivateFieldSet2.default)(this,_seriesName,properties.seriesName),(0,_classPrivateFieldSet2.default)(this,_sort,properties.sort),(0,_classPrivateFieldSet2.default)(this,_percentage,properties.percentage);var colorIndex=(0,_classPrivateFieldGet2.default)(this,_colorIndex),colorIndexJumper=(0,_classPrivateFieldGet2.default)(this,_colorIndexJumper);"string"==typeof(0,_classPrivateFieldGet2.default)(this,_data)&&(0,_classPrivateFieldSet2.default)(this,_data,JSON.parse((0,_classPrivateFieldGet2.default)(this,_data))),parsedProperties.setYLabel("Value"),(0,_classPrivateFieldGet2.default)(this,_percentage)?(parsedProperties.setYLabel("Fraction (copies in repertoire)"),parsedProperties.setDraw3D(!1)):(0,_classPrivateFieldGet2.default)(this,_multipleSeries)&&parsedProperties.setDraw3D(!1);var jsonpathQueryString="$.."+ImmuneDBStatsParserConstants.KEY,distinctDataKey=(0,_toConsumableArray2.default)(new Set((0,_jsonpathPlus.JSONPath)(jsonpathQueryString,(0,_classPrivateFieldGet2.default)(this,_data))));if(distinctDataKey.sort(function(a,b){return b.localeCompare(a)}),1<distinctDataKey.length){if((0,_classPrivateFieldSet2.default)(this,_multipleSeries,!0),(0,_classPrivateFieldGet2.default)(this,_seriesColors).length<distinctDataKey.length)throw(0,_classPrivateFieldGet2.default)(this,_logger).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";colorIndexJumper=Math.floor(((0,_classPrivateFieldGet2.default)(this,_seriesColors).length-1)/(distinctDataKey.length-1))}for(var index=0;index<distinctDataKey.length;index++){var keyName=distinctDataKey[index],seriesName=keyName.substr(0,3)+" "+keyName.substr(3),color=(0,_classPrivateFieldGet2.default)(this,_seriesColors)[colorIndex];colorIndex+=colorIndexJumper;var series=(new _series4.ResultSeries).setRepertoireId(void 0).setSampleProcessingId(void 0).setDataProcessingId(void 0).setId(keyName).setName(seriesName).setFieldName(void 0).setColor(color);(0,_classPrivateFieldGet2.default)(this,_seriesByKey)[keyName]=series}var subtitle="";Object.keys((0,_classPrivateFieldGet2.default)(this,_seriesByKey)).forEach(function(key){0<subtitle.length&&(subtitle+=", "),subtitle+=key}),console.log(subtitle),parsedProperties.setSubtitle([subtitle])}},{key:"postparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger).trace("postparse.")}},{key:"onparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger).trace("parse");var timer=new _common.DebugTimer;timer.start("parse");var messageArray=(0,_classPrivateFieldGet2.default)(this,_data)[_iReceptorStatsParser.StatsParserConstants.MESSAGE],messageArrayLength=messageArray.length;(0,_classPrivateFieldGet2.default)(this,_logger).debug("Data Result length = "+messageArrayLength);for(var j=0;j<messageArrayLength;j++){var messageObject=messageArray[j],messageObjectRepertoires=messageObject[ImmuneDBStatsParserConstants.REPERTOIRES],repId=messageObjectRepertoires[ImmuneDBStatsParserConstants.STUDY_ID]+"-"+messageObjectRepertoires[ImmuneDBStatsParserConstants.SUBJECT_ID],messageObjectStatisticsArray=messageObject[ImmuneDBStatsParserConstants.STATISTICS];if(0<messageObjectStatisticsArray.length)for(var index=0;index<messageObjectStatisticsArray.length;index++)for(var statisticsObject=messageObjectStatisticsArray[index],statisticName=statisticsObject[ImmuneDBStatsParserConstants.STATISTICS_NAME],statisticTotal=statisticsObject[ImmuneDBStatsParserConstants.TOTAL],statisticDataArray=statisticsObject[ImmuneDBStatsParserConstants.DATA],i=(_common.ResultSeriesType.getByName(statisticName),0);i<statisticDataArray.length;i++){var dataObject=statisticDataArray[i],keyName=dataObject[_iReceptorStatsParser.StatsParserConstants.KEY],value=dataObject[_iReceptorStatsParser.StatsParserConstants.VALUE],dataItem=(new _series4.ResultSeriesDataItem).setName(repId).setY((0,_classPrivateFieldGet2.default)(this,_percentage)?_common.Common.roundTo(value/statisticTotal*100,4):value);(0,_classPrivateFieldGet2.default)(this,_seriesByKey)[keyName].data.push(dataItem)}}timer.end("parse"),timer.print()}},{key:"multipleSeries",get:function(){return this.isMultipleSeries()}}]),ImmuneDBGeneTopCountStatsParser}(_parser.Parser);exports.ImmuneDBGeneTopCountStatsParser=ImmuneDBGeneTopCountStatsParser;var _logger2=new WeakMap,_multipleSeries2=new WeakMap,_series2=new WeakMap,_seriesByRepertoire2=new WeakMap,_seriesByStudy2=new WeakMap,_seriesBySubject2=new WeakMap,_seriesByKey2=new WeakMap,_data2=new WeakMap,_seriesColors2=new WeakMap,_seriesName2=new WeakMap,_sort2=new WeakMap,_percentage2=new WeakMap,_colorIndex2=new WeakMap,_colorIndexJumper2=new WeakMap,ImmuneDBFunctionalityCountStatsParser=function(_Parser2){(0,_inherits2.default)(ImmuneDBFunctionalityCountStatsParser,_Parser2);var _super3=_createSuper(ImmuneDBFunctionalityCountStatsParser);function ImmuneDBFunctionalityCountStatsParser(){var _this3;return(0,_classCallCheck2.default)(this,ImmuneDBFunctionalityCountStatsParser),_this3=_super3.call(this),_logger2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_multipleSeries2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_series2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_seriesByRepertoire2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_seriesByStudy2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_seriesBySubject2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_seriesByKey2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_data2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_seriesColors2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_seriesName2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_sort2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_percentage2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_colorIndex2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_colorIndexJumper2.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_logger2,new _common.Logger("ImmuneDBFunctionalityCountStatsParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this3),_logger2).debug("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_multipleSeries2,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_series2,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_seriesByRepertoire2,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_seriesByStudy2,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_seriesBySubject2,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_seriesByKey2,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_data2,void 0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_seriesColors2,void 0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_seriesName2,void 0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_sort2,void 0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_percentage2,void 0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_colorIndex2,0),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_colorIndexJumper2,1),_this3}return(0,_createClass2.default)(ImmuneDBFunctionalityCountStatsParser,[{key:"getSeries",value:function(){var _this4=this;(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting series.");var series=[];return Object.keys((0,_classPrivateFieldGet2.default)(this,_seriesByKey2)).forEach(function(key){series.push((0,_classPrivateFieldGet2.default)(_this4,_seriesByKey2)[key])}),series}},{key:"isMultipleSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries2)}},{key:"_initializeRepertoire",value:function(repertoire_id){return(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire2)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_logger2).debug("Initializing repertoire "+repertoire_id),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire2)[repertoire_id]=[]),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire2)[repertoire_id]}},{key:"_initializeStudy",value:function(study_id){return(0,_classPrivateFieldGet2.default)(this,_seriesByStudy2)[repertoire_id]||((0,_classPrivateFieldGet2.default)(this,_logger2).debug("Initializing study "+study_id),(0,_classPrivateFieldGet2.default)(this,_seriesByStudy2)[study_id]=[]),(0,_classPrivateFieldGet2.default)(this,_seriesByStudy2)[study_id]}},{key:"_initializeSubject",value:function(subject_id){return(0,_classPrivateFieldGet2.default)(this,_seriesBySubject2)[subject_id]||((0,_classPrivateFieldGet2.default)(this,_logger2).debug("Initializing subject "+subject_id),(0,_classPrivateFieldGet2.default)(this,_seriesBySubject2)[subject_id]=[]),(0,_classPrivateFieldGet2.default)(this,_seriesBySubject2)[subject_id]}},{key:"preparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger2).trace("preparse.");var parsedProperties=this.properties;(0,_classPrivateFieldSet2.default)(this,_data2,properties.getData()),(0,_classPrivateFieldSet2.default)(this,_seriesColors2,properties.seriesColors),(0,_classPrivateFieldSet2.default)(this,_seriesName2,properties.seriesName),(0,_classPrivateFieldSet2.default)(this,_sort2,properties.sort),(0,_classPrivateFieldSet2.default)(this,_percentage2,properties.percentage);var colorIndex=(0,_classPrivateFieldGet2.default)(this,_colorIndex2),colorIndexJumper=(0,_classPrivateFieldGet2.default)(this,_colorIndexJumper2);"string"==typeof(0,_classPrivateFieldGet2.default)(this,_data2)&&(0,_classPrivateFieldSet2.default)(this,_data2,JSON.parse((0,_classPrivateFieldGet2.default)(this,_data2))),parsedProperties.setYLabel("Value"),(0,_classPrivateFieldGet2.default)(this,_percentage2)?(parsedProperties.setYLabel("Fraction"),parsedProperties.setYMaxValue(100),parsedProperties.setDraw3D(!1)):(0,_classPrivateFieldGet2.default)(this,_multipleSeries2)&&parsedProperties.setDraw3D(!1);var jsonpathQueryString="$.."+ImmuneDBStatsParserConstants.KEY,distinctDataKey=(0,_toConsumableArray2.default)(new Set((0,_jsonpathPlus.JSONPath)(jsonpathQueryString,(0,_classPrivateFieldGet2.default)(this,_data2))));if(distinctDataKey.sort(function(a,b){return b.localeCompare(a)}),1<distinctDataKey.length){if((0,_classPrivateFieldSet2.default)(this,_multipleSeries2,!0),(0,_classPrivateFieldGet2.default)(this,_seriesColors2).length<distinctDataKey.length)throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";colorIndexJumper=Math.floor(((0,_classPrivateFieldGet2.default)(this,_seriesColors2).length-1)/(distinctDataKey.length-1))}for(var index=0;index<distinctDataKey.length;index++){var keyName=distinctDataKey[index],seriesName=keyName,color=(0,_classPrivateFieldGet2.default)(this,_seriesColors2)[colorIndex];colorIndex+=colorIndexJumper;var series=(new _series4.ResultSeries).setRepertoireId(void 0).setSampleProcessingId(void 0).setDataProcessingId(void 0).setId(keyName).setName(seriesName).setFieldName(void 0).setColor(color);(0,_classPrivateFieldGet2.default)(this,_seriesByKey2)[keyName]=series}var subtitle="";Object.keys((0,_classPrivateFieldGet2.default)(this,_seriesByKey2)).forEach(function(key){0<subtitle.length&&(subtitle+=", "),subtitle+=key}),subtitle+=" Count",console.log(subtitle),parsedProperties.setSubtitle([subtitle])}},{key:"postparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger2).trace("postparse.")}},{key:"onparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger2).trace("parse");var timer=new _common.DebugTimer;timer.start("parse");var messageArray=(0,_classPrivateFieldGet2.default)(this,_data2)[_iReceptorStatsParser.StatsParserConstants.MESSAGE],messageArrayLength=messageArray.length;(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Data Result length = "+messageArrayLength);for(var j=0;j<messageArrayLength;j++){var messageObject=messageArray[j],messageObjectRepertoires=messageObject[ImmuneDBStatsParserConstants.REPERTOIRES],repId=messageObjectRepertoires[ImmuneDBStatsParserConstants.STUDY_ID]+"-"+messageObjectRepertoires[ImmuneDBStatsParserConstants.REPERTOIRE_ID],messageObjectStatisticsArray=messageObject[ImmuneDBStatsParserConstants.STATISTICS];if(0<messageObjectStatisticsArray.length)for(var index=0;index<messageObjectStatisticsArray.length;index++)for(var statisticsObject=messageObjectStatisticsArray[index],statisticName=statisticsObject[ImmuneDBStatsParserConstants.STATISTICS_NAME],statisticTotal=statisticsObject[ImmuneDBStatsParserConstants.TOTAL],statisticDataArray=statisticsObject[ImmuneDBStatsParserConstants.DATA],i=(_common.ResultSeriesType.getByName(statisticName),0);i<statisticDataArray.length;i++){var dataObject=statisticDataArray[i],keyName=dataObject[_iReceptorStatsParser.StatsParserConstants.KEY],value=dataObject[_iReceptorStatsParser.StatsParserConstants.VALUE],dataItem=(new _series4.ResultSeriesDataItem).setName(repId).setY((0,_classPrivateFieldGet2.default)(this,_percentage2)?_common.Common.roundTo(value/statisticTotal*100,4):value);(0,_classPrivateFieldGet2.default)(this,_seriesByKey2)[keyName].data.push(dataItem)}}timer.end("parse"),timer.print()}},{key:"multipleSeries",get:function(){return this.isMultipleSeries()}}]),ImmuneDBFunctionalityCountStatsParser}(_parser.Parser);exports.ImmuneDBFunctionalityCountStatsParser=ImmuneDBFunctionalityCountStatsParser;var _logger3=new WeakMap,_series3=new WeakMap,_multipleSeries3=new WeakMap,ImmuneDbCloneCountParser=function(_Parser3){(0,_inherits2.default)(ImmuneDbCloneCountParser,_Parser3);var _super4=_createSuper(ImmuneDbCloneCountParser);function ImmuneDbCloneCountParser(){var _this5;return(0,_classCallCheck2.default)(this,ImmuneDbCloneCountParser),_this5=_super4.call(this),_logger3.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),_series3.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),_multipleSeries3.set((0,_assertThisInitialized2.default)(_this5),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_logger3,new _common.Logger("ImmuneDbCloneCountParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this5),_logger3).trace("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_multipleSeries3,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this5),_series3,[]),_this5}return(0,_createClass2.default)(ImmuneDbCloneCountParser,[{key:"getSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_logger3).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series3)}},{key:"isMultipleSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries3)}},{key:"preparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger3).trace("preparse.")}},{key:"postparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger3).trace("postparse.")}},{key:"onparse",value:function(properties){(0,_classPrivateFieldGet2.default)(this,_logger3).trace("parse");var timer=new _common.DebugTimer;timer.start("parse");var parsedProperties=this.properties,data=properties.getData(),seriesColors=properties.seriesColors,percentage=(properties.seriesName,properties.sort,properties.percentage),colorIndex=0,colorIndexJumper=1;"string"==typeof data&&(data=JSON.parse(data));var studies=Object.keys(data);if(1<studies.length){if((0,_classPrivateFieldGet2.default)(this,_logger3).debug("Representing "+studies+" studies."),(0,_classPrivateFieldSet2.default)(this,_multipleSeries3,!0),seriesColors.length<studies.length)throw(0,_classPrivateFieldGet2.default)(this,_logger3).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";colorIndexJumper=Math.floor((seriesColors.length-1)/(studies.length-1))}percentage?(parsedProperties.setYLabel("Percentage"),parsedProperties.setDraw3D(!1)):(0,_classPrivateFieldGet2.default)(this,_multipleSeries3)&&parsedProperties.setDraw3D(!1);var studiesDict={};timer.start("prepare");for(var i=0;i<studies.length;i++){var study=studies[i];studiesDict[study]={};for(var studyData=data[study],j=0;j<studyData.length;j++){var element=studyData[j],subjects=Object.keys(element);if(1!=subjects.length)throw"Received more than one subject for a study. Only one was expected.";var subjectName=subjects[0],value=element[subjectName];0,(studiesDict[study][subjectName]||(studiesDict[study][subjectName]=[])).push(value)}}timer.end("prepare");for(var colorTopByStudy=[],_i=0;_i<studies.length;_i++){colorTopByStudy[studies[_i]]=seriesColors[colorIndex],colorIndex+=colorIndexJumper}var seriesTop=(new _series4.ResultSeries).setRepertoireId("").setSampleProcessingId("").setDataProcessingId("").setId("SeriesTop").setName("Fraction of top n clones").setFieldName("Fraction of top n clones").setType(_common.ResultSeriesType.getByName("top_clones")),seriesTopData=seriesTop.data,seriesRest=(new _series4.ResultSeries).setRepertoireId("").setSampleProcessingId("").setDataProcessingId("").setId("SeriesRest").setName("Fraction of top 1-n clones").setFieldName("Fraction of top 1-n clones").setType(_common.ResultSeriesType.getByName("top_clones")),seriesRestData=seriesRest.data;timer.start("calculate");for(var _i2=0;_i2<studies.length;_i2++){var _study=studies[_i2];for(var key in studiesDict[_study])if(studiesDict[_study].hasOwnProperty(key)){var _value=_common.Common.roundTo(studiesDict[_study][key].reduce(function(a,b){return a+b},0),4),dataItemTop=(new _series4.ResultSeriesDataItem).setName(_study+"-"+key).setY(_value).setColor(colorTopByStudy[_study]);seriesTopData.push(dataItemTop);var dataItemRest=(new _series4.ResultSeriesDataItem).setName(_study+"-"+key).setY(1-_value).setColor("rgb(192,192,192)");seriesRestData.push(dataItemRest)}}timer.end("calculate"),(0,_classPrivateFieldGet2.default)(this,_series3).push(seriesTop,seriesRest),timer.end("parse"),timer.print()}}]),ImmuneDbCloneCountParser}(_parser.Parser);exports.ImmuneDbCloneCountParser=ImmuneDbCloneCountParser},{"./common.js":21,"./iReceptorStatsParser.js":22,"./parser.js":27,"./series.js":30,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/classPrivateFieldGet":5,"@babel/runtime/helpers/classPrivateFieldSet":6,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":14,"@babel/runtime/helpers/toConsumableArray":16,"jsonpath-plus":19}],25:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImmuneDbTopCountStatsResult=exports.ImmuneDbFunctionalityCountStatsResult=exports.ImmuneDbCloneCountResult=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common.js"),_result=(require("./properties.js"),require("./result.js")),_immuneDbParser=require("./immuneDbParser.js");function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var result,Super=(0,_getPrototypeOf2.default)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,result)}}var _logger=new WeakMap,_drilldownSeries=new WeakMap,ImmuneDbTopCountStatsResult=function(_Result){(0,_inherits2.default)(ImmuneDbTopCountStatsResult,_Result);var _super=_createSuper(ImmuneDbTopCountStatsResult);function ImmuneDbTopCountStatsResult(){var _this;return(0,_classCallCheck2.default)(this,ImmuneDbTopCountStatsResult),_this=_super.call(this),_logger.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_drilldownSeries.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_logger,new _common.Logger("ImmuneDbCloneCountResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this),_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_drilldownSeries,{series:[]}),_this.properties.setTitle("Fraction of Top n clones").setGrouping(!1),_this.setParser(new _immuneDbParser.ImmuneDBGeneTopCountStatsParser),_this}return(0,_createClass2.default)(ImmuneDbTopCountStatsResult,[{key:"isMultipleSeries",value:function(){return this.parser.isMultipleSeries()}},{key:"update",value:function(properties){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("update"),this.properties.dataDrilldown==properties.dataDrilldown?this:(this.properties.setDataDrilldown(properties.dataDrilldown),this.setParser(new _immuneDbParser.ImmuneDBGeneTopCountStatsParser))}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting series."),this.parser.series}},{key:"drilldownSeries",get:function(){if((0,_classPrivateFieldGet2.default)(this,_logger).debug("getting drilldown series."),this.drilldown&&!this.isMultipleSeries())return(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify((0,_classPrivateFieldGet2.default)(this,_drilldownSeries))),(0,_classPrivateFieldGet2.default)(this,_drilldownSeries);var emptyDrilldownObject={series:[]};return(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(emptyDrilldownObject)),emptyDrilldownObject}}]),ImmuneDbTopCountStatsResult}(_result.Result);exports.ImmuneDbTopCountStatsResult=ImmuneDbTopCountStatsResult;var _logger2=new WeakMap,_drilldownSeries2=new WeakMap,ImmuneDbFunctionalityCountStatsResult=function(_Result2){(0,_inherits2.default)(ImmuneDbFunctionalityCountStatsResult,_Result2);var _super2=_createSuper(ImmuneDbFunctionalityCountStatsResult);function ImmuneDbFunctionalityCountStatsResult(){var _this2;return(0,_classCallCheck2.default)(this,ImmuneDbFunctionalityCountStatsResult),_this2=_super2.call(this),_logger2.set((0,_assertThisInitialized2.default)(_this2),{writable:!0,value:void 0}),_drilldownSeries2.set((0,_assertThisInitialized2.default)(_this2),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this2),_logger2,new _common.Logger("ImmuneDbCloneCountResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this2),_logger2).debug("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this2),_drilldownSeries2,{series:[]}),_this2.properties.setTitle("Fraction of Top n clones").setStackingType("normal"),_this2.setParser(new _immuneDbParser.ImmuneDBFunctionalityCountStatsParser),_this2}return(0,_createClass2.default)(ImmuneDbFunctionalityCountStatsResult,[{key:"isMultipleSeries",value:function(){return this.parser.isMultipleSeries()}},{key:"update",value:function(properties){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("update"),this.properties.dataDrilldown==properties.dataDrilldown?this:(this.properties.setDataDrilldown(properties.dataDrilldown),this.setParser(new _immuneDbParser.ImmuneDBFunctionalityCountStatsParser))}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting series."),this.parser.series}},{key:"drilldownSeries",get:function(){if((0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting drilldown series."),this.drilldown&&!this.isMultipleSeries())return(0,_classPrivateFieldGet2.default)(this,_logger2).trace(JSON.stringify((0,_classPrivateFieldGet2.default)(this,_drilldownSeries2))),(0,_classPrivateFieldGet2.default)(this,_drilldownSeries2);var emptyDrilldownObject={series:[]};return(0,_classPrivateFieldGet2.default)(this,_logger2).trace(JSON.stringify(emptyDrilldownObject)),emptyDrilldownObject}}]),ImmuneDbFunctionalityCountStatsResult}(_result.Result);exports.ImmuneDbFunctionalityCountStatsResult=ImmuneDbFunctionalityCountStatsResult;var _logger3=new WeakMap,_drilldownSeries3=new WeakMap,_multipleSeries=new WeakMap,ImmuneDbCloneCountResult=function(_Result3){(0,_inherits2.default)(ImmuneDbCloneCountResult,_Result3);var _super3=_createSuper(ImmuneDbCloneCountResult);function ImmuneDbCloneCountResult(){var _this3;return(0,_classCallCheck2.default)(this,ImmuneDbCloneCountResult),_this3=_super3.call(this),_logger3.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_drilldownSeries3.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),_multipleSeries.set((0,_assertThisInitialized2.default)(_this3),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_logger3,new _common.Logger("ImmuneDbCloneCountResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(_this3),_logger3).debug("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_drilldownSeries3,{series:[]}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this3),_multipleSeries,!1),_this3.properties.setTitle("Fraction of Top n clones").setYLabel("Fraction (copies in subject/whole repertoire)").setStackingType("normal"),_this3.setParser(new _immuneDbParser.ImmuneDbCloneCountParser),_this3}return(0,_createClass2.default)(ImmuneDbCloneCountResult,[{key:"isMultipleSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries)}},{key:"update",value:function(properties){return(0,_classPrivateFieldGet2.default)(this,_logger3).debug("update"),this.properties.dataDrilldown==properties.dataDrilldown?this:(this.properties.setDataDrilldown(properties.dataDrilldown),this.setParser(new _immuneDbParser.ImmuneDbCloneCountParser))}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger3).debug("getting series."),this.parser.series}},{key:"drilldownSeries",get:function(){if((0,_classPrivateFieldGet2.default)(this,_logger3).debug("getting drilldown series."),this.drilldown&&!(0,_classPrivateFieldGet2.default)(this,_multipleSeries))return(0,_classPrivateFieldGet2.default)(this,_logger3).trace(JSON.stringify((0,_classPrivateFieldGet2.default)(this,_drilldownSeries3))),(0,_classPrivateFieldGet2.default)(this,_drilldownSeries3);var emptyDrilldownObject={series:[]};return(0,_classPrivateFieldGet2.default)(this,_logger3).trace(JSON.stringify(emptyDrilldownObject)),emptyDrilldownObject}}]),ImmuneDbCloneCountResult}(_result.Result);exports.ImmuneDbCloneCountResult=ImmuneDbCloneCountResult},{"./common.js":21,"./immuneDbParser.js":24,"./properties.js":28,"./result.js":29,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/classPrivateFieldGet":5,"@babel/runtime/helpers/classPrivateFieldSet":6,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":14}],26:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Logger",{enumerable:!0,get:function(){return _common.Logger}}),Object.defineProperty(exports,"ResultSeriesType",{enumerable:!0,get:function(){return _common.ResultSeriesType}}),Object.defineProperty(exports,"GeneType",{enumerable:!0,get:function(){return _common.GeneType}}),Object.defineProperty(exports,"DataType",{enumerable:!0,get:function(){return _common.DataType}}),Object.defineProperty(exports,"Properties",{enumerable:!0,get:function(){return _properties.Properties}}),Object.defineProperty(exports,"ResultSeriesDataItem",{enumerable:!0,get:function(){return _series.ResultSeriesDataItem}}),Object.defineProperty(exports,"ResultSeries",{enumerable:!0,get:function(){return _series.ResultSeries}}),Object.defineProperty(exports,"Result",{enumerable:!0,get:function(){return _result.Result}}),Object.defineProperty(exports,"VGeneUsageStatsResult",{enumerable:!0,get:function(){return _iReceptorStatsResult.VGeneUsageStatsResult}}),Object.defineProperty(exports,"DGeneUsageStatsResult",{enumerable:!0,get:function(){return _iReceptorStatsResult.DGeneUsageStatsResult}}),Object.defineProperty(exports,"JGeneUsageStatsResult",{enumerable:!0,get:function(){return _iReceptorStatsResult.JGeneUsageStatsResult}}),Object.defineProperty(exports,"CGeneUsageStatsResult",{enumerable:!0,get:function(){return _iReceptorStatsResult.CGeneUsageStatsResult}}),Object.defineProperty(exports,"JunctionLengthStatsResult",{enumerable:!0,get:function(){return _iReceptorStatsResult.JunctionLengthStatsResult}}),Object.defineProperty(exports,"CountStatsResult",{enumerable:!0,get:function(){return _iReceptorStatsResult.CountStatsResult}}),Object.defineProperty(exports,"ImmuneDbFunctionalityCountStatsResult",{enumerable:!0,get:function(){return _immuneDbResult.ImmuneDbFunctionalityCountStatsResult}}),Object.defineProperty(exports,"ImmuneDbTopCountStatsResult",{enumerable:!0,get:function(){return _immuneDbResult.ImmuneDbTopCountStatsResult}}),Object.defineProperty(exports,"HighchartsChart",{enumerable:!0,get:function(){return _charts.HighchartsChart}}),exports.ResultFactory=exports.VisualizationLibrary=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_common=require("./common.js"),_properties=require("./properties.js"),_series=require("./series.js"),_result=require("./result.js"),_iReceptorStatsResult=require("./iReceptorStatsResult.js"),_immuneDbResult=require("./immuneDbResult.js"),_charts=require("./charts.js"),VisualizationLibrary=function(){function VisualizationLibrary(){throw(0,_classCallCheck2.default)(this,VisualizationLibrary),new Error("This class is not instantiable .")}return(0,_createClass2.default)(VisualizationLibrary,null,[{key:"createChart",value:function(properties){if(void 0===properties)throw new TypeError("properties parameter is mandatory.");var _chart=new _charts.HighchartsChart(properties);return VisualizationLibrary.charts[_chart.id]=_chart}},{key:"createProperties",value:function(properties){return _properties.Properties.create(properties)}},{key:"get",value:function(identifier){return VisualizationLibrary.charts[identifier]}},{key:"setDebugLevel",value:function(level){_common.Logger.setDebugLevel(level)}},{key:"charts",get:function(){return charts}},{key:"PRODUCT",get:function(){return"AIRR Visualization Library"}},{key:"VERSION",get:function(){return"0.4.0"}}]),VisualizationLibrary}();exports.VisualizationLibrary=VisualizationLibrary,(0,_defineProperty2.default)(VisualizationLibrary,"charts",{});var ResultFactory=function(){function ResultFactory(){(0,_classCallCheck2.default)(this,ResultFactory)}return(0,_createClass2.default)(ResultFactory,null,[{key:"build",value:function(properties){var dataType=properties.getDataType();if(!_common.DataType.contains(dataType))throw new TypeError("Unknown datatype: "+dataType);var result=void 0;switch(dataType){case _common.DataType.V_GENE_USAGE:result=new _iReceptorStatsResult.VGeneUsageStatsResult;break;case _common.DataType.D_GENE_USAGE:result=new _iReceptorStatsResult.DGeneUsageStatsResult;break;case _common.DataType.J_GENE_USAGE:result=new _iReceptorStatsResult.JGeneUsageStatsResult;break;case _common.DataType.C_GENE_USAGE:result=new _iReceptorStatsResult.CGeneUsageStatsResult;break;case _common.DataType.JUNCTION_LENGTH:result=new _iReceptorStatsResult.JunctionLengthStatsResult;break;case _common.DataType.CLONE_COUNT:result=new _iReceptorStatsResult.CountStatsResult;break;case _common.DataType.CLONE_COUNT_IMMUNEDB:result=new _immuneDbResult.ImmuneDbCloneCountResult;break;case _common.DataType.CLONE_TOP_COUNT_IMMUNEDB:result=new _immuneDbResult.ImmuneDbTopCountStatsResult;break;case _common.DataType.CLONE_FUNCTIONALITY_COUNT_IMMUNEDB:result=new _immuneDbResult.ImmuneDbFunctionalityCountStatsResult}return result&&result.update(properties),result}}]),ResultFactory}();exports.ResultFactory=ResultFactory,window,void 0===window.airrvisualization&&(window.airrvisualization=VisualizationLibrary)},{"./charts.js":20,"./common.js":21,"./iReceptorStatsResult.js":23,"./immuneDbResult.js":25,"./properties.js":28,"./result.js":29,"./series.js":30,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":11}],27:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrilldownParser=exports.Parser=void 0;var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common.js"),_properties2=require("./properties.js");function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var result,Super=(0,_getPrototypeOf2.default)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,result)}}var _logger=new WeakMap,_properties=new WeakMap,Parser=function(){function Parser(){if((0,_classCallCheck2.default)(this,Parser),_logger.set(this,{writable:!0,value:void 0}),_properties.set(this,{writable:!0,value:void 0}),this.constructor===Parser)throw new TypeError("Can not construct abstract class.");if(this.preparse===Parser.prototype.preparse)throw new TypeError("Please implement abstract method preparse.");if(this.onparse===Parser.prototype.onparse)throw new TypeError("Please implement abstract method onparse.");if(this.postparse===Parser.prototype.postparse)throw new TypeError("Please implement abstract method postparse.");if(this.getSeries===Parser.prototype.getSeries)throw new TypeError("Please implement abstract method getSeries.");(0,_classPrivateFieldSet2.default)(this,_logger,new _common.Logger("Parser")),(0,_classPrivateFieldSet2.default)(this,_properties,new _properties2.Properties)}return(0,_createClass2.default)(Parser,[{key:"getProperties",value:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting properties."),(0,_classPrivateFieldGet2.default)(this,_properties)}},{key:"getSeries",value:function(){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this getSeries() method should never execute, specializations of Result need to overload it."),new TypeError("This method should not be called, implementations need to overload it.")}},{key:"preparse",value:function(properties){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this preparse() method should never execute, specializations of Result need to overload it."),new TypeError("This method should not be called, implementations need to overload it.")}},{key:"onparse",value:function(properties){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this parse() method should never execute, specializations of Result need to overload it."),new TypeError("This method should not be called, implementations need to overload it.")}},{key:"postparse",value:function(properties){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this preparse() method should never execute, specializations of Result need to overload it."),new TypeError("This method should not be called, implementations need to overload it.")}},{key:"guessTheNameOfTheFather",value:function(dataItem,seriesType){console.log(seriesType),console.log(dataItem)}},{key:"properties",get:function(){return this.getProperties()}},{key:"series",get:function(){return this.getSeries()}}]),Parser}();exports.Parser=Parser;var _logger2=new WeakMap,_drilldownSeries=new WeakMap,DrilldownParser=function(_Parser){(0,_inherits2.default)(DrilldownParser,_Parser);var _super=_createSuper(DrilldownParser);function DrilldownParser(){var _this;if((0,_classCallCheck2.default)(this,DrilldownParser),_this=_super.call(this),_logger2.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_drilldownSeries.set((0,_assertThisInitialized2.default)(_this),{writable:!0,value:void 0}),_this.constructor===DrilldownParser)throw new TypeError("Can not construct abstract class.");return(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_logger2,new _common.Logger("DrilldownParser")),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(_this),_drilldownSeries,[]),_this}return(0,_createClass2.default)(DrilldownParser,[{key:"getDrilldownSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting drilldownSeries."),(0,_classPrivateFieldGet2.default)(this,_drilldownSeries)}},{key:"drilldownSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting drilldownSeries."),this.getDrilldownSeries()}}]),DrilldownParser}(Parser);exports.DrilldownParser=DrilldownParser},{"./common.js":21,"./properties.js":28,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/classPrivateFieldGet":5,"@babel/runtime/helpers/classPrivateFieldSet":6,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":14}],28:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.Properties=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common.js"),_logger=new WeakMap,_title=new WeakMap,_subtitle=new WeakMap,_xLabel=new WeakMap,_yLabel=new WeakMap,_yMaxValue=new WeakMap,_stackingType=new WeakMap,_grouping=new WeakMap,_seriesName=new WeakMap,_data=new WeakMap,_dataType=new WeakMap,_dataDrilldown=new WeakMap,_id=new WeakMap,_sort=new WeakMap,_chartType=new WeakMap,_animation=new WeakMap,_percentage=new WeakMap,_alpha3D=new WeakMap,_beta3D=new WeakMap,_depth3D=new WeakMap,_draw3D=new WeakMap,_seriesColors=new WeakMap,_dataDrilldown_userDefined=new WeakMap,_sort_userDefined=new WeakMap,_percentage_userDefined=new WeakMap,_chartType_userDefined=new WeakMap,_animation_userDefined=new WeakMap,_alpha3D_userDefined=new WeakMap,_beta3D_userDefined=new WeakMap,_depth3D_userDefined=new WeakMap,_draw3D_userDefined=new WeakMap,_seriesColors_userDefined=new WeakMap,Properties=function(){function Properties(){(0,_classCallCheck2.default)(this,Properties),_logger.set(this,{writable:!0,value:void 0}),_title.set(this,{writable:!0,value:void 0}),_subtitle.set(this,{writable:!0,value:void 0}),_xLabel.set(this,{writable:!0,value:void 0}),_yLabel.set(this,{writable:!0,value:void 0}),_yMaxValue.set(this,{writable:!0,value:void 0}),_stackingType.set(this,{writable:!0,value:void 0}),_grouping.set(this,{writable:!0,value:void 0}),_seriesName.set(this,{writable:!0,value:void 0}),_data.set(this,{writable:!0,value:void 0}),_dataType.set(this,{writable:!0,value:void 0}),_dataDrilldown.set(this,{writable:!0,value:void 0}),_id.set(this,{writable:!0,value:void 0}),_sort.set(this,{writable:!0,value:void 0}),_chartType.set(this,{writable:!0,value:void 0}),_animation.set(this,{writable:!0,value:void 0}),_percentage.set(this,{writable:!0,value:void 0}),_alpha3D.set(this,{writable:!0,value:void 0}),_beta3D.set(this,{writable:!0,value:void 0}),_depth3D.set(this,{writable:!0,value:void 0}),_draw3D.set(this,{writable:!0,value:void 0}),_seriesColors.set(this,{writable:!0,value:void 0}),_dataDrilldown_userDefined.set(this,{writable:!0,value:void 0}),_sort_userDefined.set(this,{writable:!0,value:void 0}),_percentage_userDefined.set(this,{writable:!0,value:void 0}),_chartType_userDefined.set(this,{writable:!0,value:void 0}),_animation_userDefined.set(this,{writable:!0,value:void 0}),_alpha3D_userDefined.set(this,{writable:!0,value:void 0}),_beta3D_userDefined.set(this,{writable:!0,value:void 0}),_depth3D_userDefined.set(this,{writable:!0,value:void 0}),_draw3D_userDefined.set(this,{writable:!0,value:void 0}),_seriesColors_userDefined.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_logger,new _common.Logger("Properties")),(0,_classPrivateFieldGet2.default)(this,_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)(this,_title,void 0),(0,_classPrivateFieldSet2.default)(this,_subtitle,void 0),(0,_classPrivateFieldSet2.default)(this,_xLabel,void 0),(0,_classPrivateFieldSet2.default)(this,_yLabel,void 0),(0,_classPrivateFieldSet2.default)(this,_yMaxValue,void 0),(0,_classPrivateFieldSet2.default)(this,_stackingType,void 0),(0,_classPrivateFieldSet2.default)(this,_grouping,void 0),(0,_classPrivateFieldSet2.default)(this,_seriesName,void 0),(0,_classPrivateFieldSet2.default)(this,_data,void 0),(0,_classPrivateFieldSet2.default)(this,_dataType,void 0),(0,_classPrivateFieldSet2.default)(this,_dataDrilldown,Properties.DEFAULT_DATA_DRILLDOWN),(0,_classPrivateFieldSet2.default)(this,_id,_common.Common.makeid(12)),(0,_classPrivateFieldSet2.default)(this,_sort,Properties.DEFAULT_SORT),(0,_classPrivateFieldSet2.default)(this,_percentage,Properties.DEFAULT_PERCENTAGE),(0,_classPrivateFieldSet2.default)(this,_chartType,Properties.DEFAULT_CHART_TYPE),(0,_classPrivateFieldSet2.default)(this,_animation,Properties.DEFAULT_ANIMATION),(0,_classPrivateFieldSet2.default)(this,_alpha3D,Properties.DEFAULT_ALPHA_3D),(0,_classPrivateFieldSet2.default)(this,_beta3D,Properties.DEFAULT_BETA_3D),(0,_classPrivateFieldSet2.default)(this,_depth3D,Properties.DEFAULT_DEPTH_3D),(0,_classPrivateFieldSet2.default)(this,_draw3D,Properties.DEFAULT_DRAW_3D),(0,_classPrivateFieldSet2.default)(this,_seriesColors,Properties.DEFAULT_SERIES_COLORS),(0,_classPrivateFieldSet2.default)(this,_sort_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_percentage_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_chartType_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_animation_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_alpha3D_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_beta3D_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_depth3D_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_dataDrilldown_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_seriesColors_userDefined,!1),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this))}return(0,_createClass2.default)(Properties,null,[{key:"DEFAULT_DATA_DRILLDOWN",get:function(){return!1}},{key:"DEFAULT_CHART_TYPE",get:function(){return"column"}},{key:"DEFAULT_SORT",get:function(){return!1}},{key:"DEFAULT_ANIMATION",get:function(){return!1}},{key:"DEFAULT_PERCENTAGE",get:function(){return!1}},{key:"DEFAULT_ALPHA_3D",get:function(){return 20}},{key:"DEFAULT_BETA_3D",get:function(){return 0}},{key:"DEFAULT_DEPTH_3D",get:function(){return 100}},{key:"DEFAULT_DRAW_3D",get:function(){return!1}},{key:"DEFAULT_SERIES_COLORS",get:function(){return["rgb(0,66,157)","rgb(43,87,167)","rgb(66,108,176)","rgb(86,129,185)","rgb(105,151,194)","rgb(125,174,202)","rgb(147,196,210)","rgb(171,218,217)","rgb(202,239,223)","rgb(255,226,202)","rgb(255,196,180)","rgb(255,165,158)","rgb(249,134,137)","rgb(237,105,118)","rgb(221,76,101)","rgb(202,47,85)","rgb(177,19,70)","rgb(147,0,58)"]}}]),(0,_createClass2.default)(Properties,[{key:"getTitle",value:function(){return(0,_classPrivateFieldGet2.default)(this,_title)}},{key:"setTitle",value:function(value){return(0,_classPrivateFieldSet2.default)(this,_title,value),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setTitle."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getSubtitle",value:function(){return(0,_classPrivateFieldGet2.default)(this,_subtitle)}},{key:"setSubtitle",value:function(value){return(0,_classPrivateFieldSet2.default)(this,_subtitle,value),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setSubtitle"),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getXLabel",value:function(){return(0,_classPrivateFieldGet2.default)(this,_xLabel)}},{key:"setXLabel",value:function(label){return(0,_classPrivateFieldSet2.default)(this,_xLabel,label),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setXLabel."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getYLabel",value:function(){return(0,_classPrivateFieldGet2.default)(this,_yLabel)}},{key:"setYLabel",value:function(label){return(0,_classPrivateFieldSet2.default)(this,_yLabel,label),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setYLabel."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getYMaxValue",value:function(){return(0,_classPrivateFieldGet2.default)(this,_yMaxValue)}},{key:"setYMaxValue",value:function(value){return(0,_classPrivateFieldSet2.default)(this,_yMaxValue,value),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setYMaxValue."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getId",value:function(){return(0,_classPrivateFieldGet2.default)(this,_id)}},{key:"setId",value:function(value){return void 0!==value&&((0,_classPrivateFieldSet2.default)(this,_id,value),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setId.")),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getStackingType",value:function(){return(0,_classPrivateFieldGet2.default)(this,_stackingType)}},{key:"setStackingType",value:function(value){return(0,_classPrivateFieldSet2.default)(this,_stackingType,value),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setStackingType."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getGrouping",value:function(){return(0,_classPrivateFieldGet2.default)(this,_grouping)}},{key:"setGrouping",value:function(value){return(0,_classPrivateFieldSet2.default)(this,_grouping,value),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setGrouping."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getSeriesName",value:function(){return(0,_classPrivateFieldGet2.default)(this,_seriesName)}},{key:"setSeriesName",value:function(value){return(0,_classPrivateFieldSet2.default)(this,_seriesName,value),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setSeriesName."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getData",value:function(){return(0,_classPrivateFieldGet2.default)(this,_data)}},{key:"setData",value:function(data,dataType,dataDrilldown){return(0,_classPrivateFieldSet2.default)(this,_data,data),null!=dataType&&this.setDataType(dataType),null!=dataDrilldown&&this.setDataDrilldown(dataDrilldown),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setData."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getDataType",value:function(){return(0,_classPrivateFieldGet2.default)(this,_dataType)}},{key:"setDataType",value:function(value){if(!_common.DataType.contains(value))throw new TypeError("An unknown Data Type was set in the properties file: "+value);return(0,_classPrivateFieldSet2.default)(this,_dataType,value),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setDataType."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getDataDrilldown",value:function(){return(0,_classPrivateFieldGet2.default)(this,_dataDrilldown)}},{key:"setDataDrilldown",value:function(value){return void 0!==value&&"boolean"==typeof value&&((0,_classPrivateFieldSet2.default)(this,_dataDrilldown,value),(0,_classPrivateFieldSet2.default)(this,_dataDrilldown_userDefined,!0)),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setDataDrilldown."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getSort",value:function(){return(0,_classPrivateFieldGet2.default)(this,_sort)}},{key:"setSort",value:function(value){return void 0!==value&&((0,_classPrivateFieldSet2.default)(this,_sort,value),(0,_classPrivateFieldSet2.default)(this,_sort_userDefined,!0)),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setSort."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getChartType",value:function(){return(0,_classPrivateFieldGet2.default)(this,_chartType)}},{key:"setChartType",value:function(value){return void 0!==value&&((0,_classPrivateFieldSet2.default)(this,_chartType,value),(0,_classPrivateFieldSet2.default)(this,_chartType_userDefined,!0)),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setChartType."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getAnimation",value:function(){return(0,_classPrivateFieldGet2.default)(this,_animation)}},{key:"setAnimation",value:function(value){return void 0!==value&&((0,_classPrivateFieldSet2.default)(this,_animation,value),(0,_classPrivateFieldSet2.default)(this,_animation_userDefined,!0)),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setAnimation."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getAlpha3D",value:function(){return(0,_classPrivateFieldGet2.default)(this,_alpha3D)}},{key:"setAlpha3D",value:function(value){return void 0!==value&&((0,_classPrivateFieldSet2.default)(this,_alpha3D,value),(0,_classPrivateFieldSet2.default)(this,_alpha3D_userDefined,!0)),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setAlpha3D."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getBeta3D",value:function(){return(0,_classPrivateFieldGet2.default)(this,_beta3D)}},{key:"setBeta3D",value:function(value){return void 0!==value&&((0,_classPrivateFieldSet2.default)(this,_beta3D,value),(0,_classPrivateFieldSet2.default)(this,_beta3D_userDefined,!0)),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setBeta3D."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getDepth3D",value:function(){return(0,_classPrivateFieldGet2.default)(this,_depth3D)}},{key:"setDepth3D",value:function(value){return void 0!==value&&((0,_classPrivateFieldSet2.default)(this,_depth3D,value),(0,_classPrivateFieldSet2.default)(this,_depth3D_userDefined,!0)),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setDepth3D."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getDraw3D",value:function(){return(0,_classPrivateFieldGet2.default)(this,_draw3D)}},{key:"setDraw3D",value:function(value){return void 0!==value&&((0,_classPrivateFieldSet2.default)(this,_draw3D,value),(0,_classPrivateFieldSet2.default)(this,_draw3D_userDefined,!0)),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setDraw3D."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getSeriesColors",value:function(){return(0,_classPrivateFieldGet2.default)(this,_seriesColors)}},{key:"setSeriesColors",value:function(value){return void 0!==value&&((0,_classPrivateFieldSet2.default)(this,_seriesColors,value),(0,_classPrivateFieldSet2.default)(this,_seriesColors_userDefined,!0)),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setSeriesColors."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"getPercentage",value:function(){return(0,_classPrivateFieldGet2.default)(this,_percentage)}},{key:"setPercentage",value:function(value){return void 0!==value&&((0,_classPrivateFieldSet2.default)(this,_percentage,value),(0,_classPrivateFieldSet2.default)(this,_percentage_userDefined,!0)),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setPercentage."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"updateWith",value:function(anotherProperties){return anotherProperties&&anotherProperties instanceof Properties&&(!(0,_classPrivateFieldGet2.default)(this,_chartType_userDefined)&&anotherProperties.chartType&&this.setChartType(anotherProperties.chartType),null==this.title&&anotherProperties.title&&this.setTitle(anotherProperties.title),null==this.subtitle&&anotherProperties.subtitle&&this.setSubtitle(anotherProperties.subtitle),!this.xLabel&&anotherProperties.xLabel&&this.setXLabel(anotherProperties.xLabel),!this.yLabel&&anotherProperties.yLabel&&this.setYLabel(anotherProperties.yLabel),!(0,_classPrivateFieldGet2.default)(this,_yMaxValue)&&anotherProperties.yMaxValue&&this.setYMaxValue(anotherProperties.yMaxValue),!this.stackingType&&anotherProperties.stackingType&&this.setStackingType(anotherProperties.stackingType),null==this.grouping&&null!=anotherProperties.grouping&&this.setGrouping(anotherProperties.grouping),!this.data&&anotherProperties.data&&this.setData(anotherProperties.data),!this.dataType&&anotherProperties.dataType&&this.setDataType(anotherProperties.dataType),!(0,_classPrivateFieldGet2.default)(this,_dataDrilldown_userDefined)&&anotherProperties.dataDrilldown&&this.setDataDrilldown(anotherProperties.dataDrilldown),!(0,_classPrivateFieldGet2.default)(this,_sort_userDefined)&&anotherProperties.sort&&this.setSort(anotherProperties.sort),!(0,_classPrivateFieldGet2.default)(this,_animation_userDefined)&&anotherProperties.animation&&this.setAnimation(anotherProperties.animation),!(0,_classPrivateFieldGet2.default)(this,_percentage_userDefined)&&anotherProperties.percentage&&this.setPercentage(anotherProperties.percentage),!(0,_classPrivateFieldGet2.default)(this,_alpha3D_userDefined)&&anotherProperties.alpha3D&&this.setAlpha3D(anotherProperties.alpha3D),!(0,_classPrivateFieldGet2.default)(this,_beta3D_userDefined)&&anotherProperties.beta3D&&this.setBeta3D(anotherProperties.beta3D),!(0,_classPrivateFieldGet2.default)(this,_depth3D_userDefined)&&anotherProperties.depth3D&&this.setDepth3D(anotherProperties.depth3D),!(0,_classPrivateFieldGet2.default)(this,_draw3D_userDefined)&&anotherProperties.draw3D&&this.setDraw3D(anotherProperties.draw3D),!(0,_classPrivateFieldGet2.default)(this,_seriesColors_userDefined)&&anotherProperties.seriesColors&&this.setSeriesColors(anotherProperties.seriesColors),!this.id&&anotherProperties.id&&this.setId(anotherProperties.id)),this}},{key:"title",get:function(){return this.getTitle()},set:function(value){this.setTitle(value)}},{key:"subtitle",get:function(){return this.getSubtitle()},set:function(value){this.setSubtitle(value)}},{key:"xLabel",get:function(){return this.getXLabel()},set:function(value){this.setXLabel(value)}},{key:"yLabel",get:function(){return this.getYLabel()},set:function(value){this.setYLabel(value)}},{key:"yMaxValue",get:function(){return this.getYMaxValue()},set:function(value){this.setYMaxValue(value)}},{key:"id",get:function(){return this.getId()},set:function(value){this.setId(value)}},{key:"stackingType",get:function(){return this.getStackingType()},set:function(value){this.setStackingType(value)}},{key:"grouping",get:function(){return this.getGrouping()},set:function(value){this.setGrouping(value)}},{key:"seriesName",get:function(){return this.getSeriesName()},set:function(value){this.setSeriesName(value)}},{key:"data",get:function(){return this.getData()},set:function(value){this.setData(value)}},{key:"dataType",get:function(){return this.getDataType()},set:function(value){this.setDataType(value)}},{key:"dataDrilldown",get:function(){return this.getDataDrilldown()},set:function(value){this.setDataDrilldown(value)}},{key:"sort",get:function(){return this.getSort()},set:function(value){this.setSort(value)}},{key:"chartType",get:function(){return this.getChartType()},set:function(value){this.setChartType(value)}},{key:"animation",get:function(){return this.getAnimation()},set:function(value){this.setAnimation(value)}},{key:"alpha3D",get:function(){return this.getAlpha3D()},set:function(value){this.setAlpha3D(value)}},{key:"beta3D",get:function(){return this.getBeta3D()},set:function(value){this.setBeta3D(value)}},{key:"depth3D",get:function(){return this.getDepth3D()},set:function(value){this.setDepth3D(value)}},{key:"draw3D",get:function(){return this.getDraw3D()},set:function(value){this.setDraw3D(value)}},{key:"seriesColors",get:function(){return this.getSeriesColors()},set:function(value){this.setSeriesColors(value)}},{key:"percentage",get:function(){return this.getPercentage()},set:function(value){this.setPercentage(value)}}],[{key:"create",value:function(properties){var p=void 0;if(null==properties?p=new Properties:properties instanceof Properties?p=(new Properties).updateWith(properties).setId(properties.id):"string"==typeof properties&&(properties=JSON.parse(properties)),null==p&&properties.constructor==_common.Common.objectConstructor){p=new Properties;try{Object.seal(p),Object.assign(p,properties)}catch(e){_common.Logger.error("Properties","Properties: tried to build an Object with the wrong structure. Returning a default Properties instance."),p=new Properties}}return p||new Properties}}]),Properties}();exports.Properties=Properties},{"./common.js":21,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/classPrivateFieldGet":5,"@babel/runtime/helpers/classPrivateFieldSet":6,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":11}],29:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.Result=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common.js"),_parser2=require("./parser.js"),_properties=require("./properties.js"),_logger=new WeakMap,_parser=new WeakMap,_defaultProperties=new WeakMap,Result=function(){function Result(){if((0,_classCallCheck2.default)(this,Result),_logger.set(this,{writable:!0,value:void 0}),_parser.set(this,{writable:!0,value:void 0}),_defaultProperties.set(this,{writable:!0,value:void 0}),this.constructor===Result)throw new Error("Can not construct abstract class.");if(this.isMultipleSeries===Result.prototype.isMultipleSeries)throw new TypeError("Please implement abstract method isMultipleSeries.");if(this.update===Result.prototype.update)throw new TypeError("Please implement abstract method update.");(0,_classPrivateFieldSet2.default)(this,_logger,new _common.Logger("Result")),(0,_classPrivateFieldGet2.default)(this,_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)(this,_parser,void 0),(0,_classPrivateFieldSet2.default)(this,_defaultProperties,new _properties.Properties),"undefined"!=typeof sourceData&&setData(sourceData)}return(0,_createClass2.default)(Result,[{key:"isMultipleSeries",value:function(){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("isMultipleSeries() method should never execute, specializations of Result need to overload it."),new TypeError("Result.isMultipleSeries() method should not be called, implementations need to overload it.")}},{key:"setParser",value:function(parser){if((0,_classPrivateFieldGet2.default)(this,_logger).debug("setParser."),!(parser instanceof _parser2.Parser))throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("attribute parser must be an instance of Parser."),new TypeError("parser value must be an instance of Parser.");return(0,_classPrivateFieldSet2.default)(this,_parser,parser),this}},{key:"getParser",value:function(){return(0,_classPrivateFieldGet2.default)(this,_parser)}},{key:"isDrilldown",value:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting drilldown."),this.properties.getDataDrilldown()}},{key:"getDrillupSeriesEvent",value:function(properties){return(0,_classPrivateFieldGet2.default)(this,_parser).getDrillupSeriesEvent(properties)}},{key:"getDrilldownSeriesEvent",value:function(properties){return(0,_classPrivateFieldGet2.default)(this,_parser).getDrilldownSeriesEvent(properties)}},{key:"update",value:function(properties){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("update() method should never execute, specializations of Result need to overload it."),new TypeError("Result.update() method should not be called, implementations need to overload it.")}},{key:"parse",value:function(properties){this.update(properties),properties.getData()?(0,_classPrivateFieldGet2.default)(this,_parser)?((0,_classPrivateFieldGet2.default)(this,_parser).preparse(properties),(0,_classPrivateFieldGet2.default)(this,_parser).onparse(properties),(0,_classPrivateFieldGet2.default)(this,_parser).postparse(properties),this.properties.updateWith((0,_classPrivateFieldGet2.default)(this,_parser).properties),properties.updateWith(this.properties)):(0,_classPrivateFieldGet2.default)(this,_logger).trace("Can't parse, please set the parser first. Parser should be set on a Result subclass."):(0,_classPrivateFieldGet2.default)(this,_logger).trace("Can't parse, please set the Airr Data Commons data first.")}},{key:"properties",get:function(){return(0,_classPrivateFieldGet2.default)(this,_defaultProperties)}},{key:"series",get:function(){if((0,_classPrivateFieldGet2.default)(this,_logger).debug("getting series."),this.parser)return this.parser.series}},{key:"multipleSeries",get:function(){return this.isMultipleSeries()}},{key:"parser",get:function(){return this.getParser()},set:function(parser){this.setParser(parser)}},{key:"drilldown",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting drilldown."),this.isDrilldown()}}]),Result}();exports.Result=Result},{"./common.js":21,"./parser.js":27,"./properties.js":28,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/classPrivateFieldGet":5,"@babel/runtime/helpers/classPrivateFieldSet":6,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":11}],30:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResultSeries=exports.ResultSeriesDataItem=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common.js"),_logger=new WeakMap,_name=new WeakMap,_x=new WeakMap,_y=new WeakMap,_z=new WeakMap,_color=new WeakMap,_drilldown=new WeakMap,_title=new WeakMap,ResultSeriesDataItem=function(){function ResultSeriesDataItem(){(0,_classCallCheck2.default)(this,ResultSeriesDataItem),_logger.set(this,{writable:!0,value:void 0}),_name.set(this,{writable:!0,value:void 0}),_x.set(this,{writable:!0,value:void 0}),_y.set(this,{writable:!0,value:void 0}),_z.set(this,{writable:!0,value:void 0}),_color.set(this,{writable:!0,value:void 0}),_drilldown.set(this,{writable:!0,value:void 0}),_title.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_logger,new _common.Logger("ResultSeriesDataItem")),(0,_classPrivateFieldGet2.default)(this,_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)(this,_name,void 0),(0,_classPrivateFieldSet2.default)(this,_x,void 0),(0,_classPrivateFieldSet2.default)(this,_y,void 0),(0,_classPrivateFieldSet2.default)(this,_z,void 0),(0,_classPrivateFieldSet2.default)(this,_color,void 0),(0,_classPrivateFieldSet2.default)(this,_drilldown,void 0),(0,_classPrivateFieldSet2.default)(this,_title,"subtitle")}return(0,_createClass2.default)(ResultSeriesDataItem,[{key:"getName",value:function(){return(0,_classPrivateFieldGet2.default)(this,_name)}},{key:"setName",value:function(name){return(0,_classPrivateFieldSet2.default)(this,_name,name),this}},{key:"getX",value:function(){return(0,_classPrivateFieldGet2.default)(this,_x)}},{key:"setX",value:function(xValue){return(0,_classPrivateFieldSet2.default)(this,_x,xValue),this}},{key:"getY",value:function(){return(0,_classPrivateFieldGet2.default)(this,_y)}},{key:"setY",value:function(yValue){return(0,_classPrivateFieldSet2.default)(this,_y,yValue),this}},{key:"getZ",value:function(){return(0,_classPrivateFieldGet2.default)(this,_z)}},{key:"setZ",value:function(zValue){return(0,_classPrivateFieldSet2.default)(this,_z,zValue),this}},{key:"getColor",value:function(){return(0,_classPrivateFieldGet2.default)(this,_color)}},{key:"setColor",value:function(value){return(0,_classPrivateFieldSet2.default)(this,_color,value),this}},{key:"getDrilldown",value:function(){return(0,_classPrivateFieldGet2.default)(this,_drilldown)}},{key:"setDrilldown",value:function(drilldownName){return(0,_classPrivateFieldSet2.default)(this,_drilldown,drilldownName),this}},{key:"toJSON",value:function(){var json={name:this.name,x:this.x,y:this.y,z:this.z,color:this.color,drilldown:this.drilldown};for(var key in json){if(json.hasOwnProperty(key))null==json[key]&&delete json[key]}return json}},{key:"name",get:function(){return this.getName()},set:function(name){this.setName(name)}},{key:"x",get:function(){return this.getX()},set:function(x){this.setX(x)}},{key:"y",get:function(){return this.getY()},set:function(y){this.setY(y)}},{key:"z",get:function(){return this.getZ()},set:function(z){this.setZ(z)}},{key:"color",get:function(){return this.getColor()},set:function(value){this.setColor(value)}},{key:"drilldown",get:function(){return this.getDrilldown()},set:function(drilldown){this.setDrilldown(drilldown)}}]),ResultSeriesDataItem}();exports.ResultSeriesDataItem=ResultSeriesDataItem;var _logger2=new WeakMap,_repertoireId=new WeakMap,_sampleProcessingId=new WeakMap,_dataProcessingId=new WeakMap,_id=new WeakMap,_name2=new WeakMap,_fieldName=new WeakMap,_data=new WeakMap,_type=new WeakMap,_parentName=new WeakMap,_color2=new WeakMap,_stack=new WeakMap,_title2=new WeakMap,ResultSeries=function(){function ResultSeries(){(0,_classCallCheck2.default)(this,ResultSeries),_logger2.set(this,{writable:!0,value:void 0}),_repertoireId.set(this,{writable:!0,value:void 0}),_sampleProcessingId.set(this,{writable:!0,value:void 0}),_dataProcessingId.set(this,{writable:!0,value:void 0}),_id.set(this,{writable:!0,value:void 0}),_name2.set(this,{writable:!0,value:void 0}),_fieldName.set(this,{writable:!0,value:void 0}),_data.set(this,{writable:!0,value:void 0}),_type.set(this,{writable:!0,value:void 0}),_parentName.set(this,{writable:!0,value:void 0}),_color2.set(this,{writable:!0,value:void 0}),_stack.set(this,{writable:!0,value:void 0}),_title2.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_logger2,new _common.Logger("ResultSeries")),(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Constructor."),(0,_classPrivateFieldSet2.default)(this,_repertoireId,void 0),(0,_classPrivateFieldSet2.default)(this,_sampleProcessingId,void 0),(0,_classPrivateFieldSet2.default)(this,_dataProcessingId,void 0),(0,_classPrivateFieldSet2.default)(this,_id,void 0),(0,_classPrivateFieldSet2.default)(this,_name2,void 0),(0,_classPrivateFieldSet2.default)(this,_fieldName,void 0),(0,_classPrivateFieldSet2.default)(this,_data,void 0),(0,_classPrivateFieldSet2.default)(this,_type,void 0),(0,_classPrivateFieldSet2.default)(this,_parentName,void 0),(0,_classPrivateFieldSet2.default)(this,_color2,void 0),(0,_classPrivateFieldSet2.default)(this,_stack,void 0),(0,_classPrivateFieldSet2.default)(this,_title2,void 0)}return(0,_createClass2.default)(ResultSeries,[{key:"setRepertoireId",value:function(repertoireId){return(0,_classPrivateFieldSet2.default)(this,_repertoireId,repertoireId),this}},{key:"setSampleProcessingId",value:function(sampleProcessingId){return(0,_classPrivateFieldSet2.default)(this,_sampleProcessingId,sampleProcessingId),this}},{key:"setDataProcessingId",value:function(dataProcessingId){return(0,_classPrivateFieldSet2.default)(this,_dataProcessingId,dataProcessingId),this}},{key:"setId",value:function(id){return(0,_classPrivateFieldSet2.default)(this,_id,id),this}},{key:"setName",value:function(name){return(0,_classPrivateFieldSet2.default)(this,_name2,name),this}},{key:"setFieldName",value:function(fieldName){return(0,_classPrivateFieldSet2.default)(this,_fieldName,fieldName),this}},{key:"setData",value:function(data){return(0,_classPrivateFieldSet2.default)(this,_data,data),this}},{key:"setType",value:function(type){if(!type instanceof _common.ResultSeriesType)throw"type must be an instance of ResultSeriesType";if(!_common.ResultSeriesType.contains(type.typeCode))throw"type must exist in ResultSeriesType.types";return(0,_classPrivateFieldSet2.default)(this,_type,type),this}},{key:"setParentName",value:function(name){return(0,_classPrivateFieldSet2.default)(this,_parentName,name),this}},{key:"setColor",value:function(color){return(0,_classPrivateFieldSet2.default)(this,_color2,color),this}},{key:"setStack",value:function(stackName){return(0,_classPrivateFieldSet2.default)(this,_stack,stackName),this}},{key:"setTitle",value:function(title){return(0,_classPrivateFieldSet2.default)(this,_title2,title),this}},{key:"toJSON",value:function(){return{repertoireId:this.repertoireId,sampleProcessingId:this.sampleProcessingId,dataProcessingId:this.dataProcessingId,name:this.name,fieldName:this.fieldName,parentName:this.parentName,type:this.type,color:this.color,data:this.data,title:this.title}}},{key:"asHighchartSeries",value:function(){var json={id:this.id,name:this.name,color:this.color,title:this.title};for(var key in json){if(json.hasOwnProperty(key))null==json[key]&&delete json[key]}return(0,_classPrivateFieldGet2.default)(this,_data)&&(json.data=(0,_classPrivateFieldGet2.default)(this,_data).map(function(d){return d.toJSON()})),json}},{key:"repertoireId",get:function(){return(0,_classPrivateFieldGet2.default)(this,_repertoireId)},set:function(repertoireId){this.setRepertoireId(repertoireId)}},{key:"sampleProcessingId",get:function(){return(0,_classPrivateFieldGet2.default)(this,_sampleProcessingId)},set:function(sampleProcessingId){this.setSampleProcessingId(sampleProcessingId)}},{key:"dataProcessingId",get:function(){return(0,_classPrivateFieldGet2.default)(this,_dataProcessingId)},set:function(dataProcessingId){this.setDataProcessingId(dataProcessingId)}},{key:"id",get:function(){return(0,_classPrivateFieldGet2.default)(this,_id)},set:function(id){this.setId(id)}},{key:"name",get:function(){return(0,_classPrivateFieldGet2.default)(this,_name2)},set:function(name){this.setName(name)}},{key:"fieldName",get:function(){return(0,_classPrivateFieldGet2.default)(this,_fieldName)},set:function(fieldName){this.setFieldName(fieldName)}},{key:"data",get:function(){return(0,_classPrivateFieldGet2.default)(this,_data)||(0,_classPrivateFieldSet2.default)(this,_data,[]),(0,_classPrivateFieldGet2.default)(this,_data)},set:function(data){this.setData(data)}},{key:"type",get:function(){return(0,_classPrivateFieldGet2.default)(this,_type)},set:function(type){this.setType(type)}},{key:"parentName",get:function(){return(0,_classPrivateFieldGet2.default)(this,_parentName)},set:function(name){this.setParentName(name)}},{key:"color",get:function(){return(0,_classPrivateFieldGet2.default)(this,_color2)},set:function(color){this.setColor(color)}},{key:"stack",get:function(){return(0,_classPrivateFieldGet2.default)(this,_stack)},set:function(value){this.setStack(value)}},{key:"title",get:function(){return(0,_classPrivateFieldGet2.default)(this,_title2)},set:function(value){this.setTitle(value)}}]),ResultSeries}();exports.ResultSeries=ResultSeries},{"./common.js":21,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/classPrivateFieldGet":5,"@babel/runtime/helpers/classPrivateFieldSet":6,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":11}]},{},[26]);