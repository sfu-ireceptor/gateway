/*!
 * AIRR Visualization Library v0.2.0 (2020-11-10)
 * 
 * Build Charts for AIIR Data Commons
 * 
 * https://github.com/ireceptorplus-inesctec/airrvisualizationlibrary
 * 
 * @author  Marco Amaro Oliveira <mao@inesctec.pt>  (https://www.linkedin.com/in/marcoamarooliveira/)
 * @license AGPL-3.0-only
 * 
 * @copyright (c) INESCTEC (https://www.inesctec.pt/). All rights reserved.
 */
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

module.exports = _assertThisInitialized;
},{}],2:[function(require,module,exports){
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

module.exports = _classCallCheck;
},{}],3:[function(require,module,exports){
function _classPrivateFieldGet(receiver, privateMap) {
  var descriptor = privateMap.get(receiver);

  if (!descriptor) {
    throw new TypeError("attempted to get private field on non-instance");
  }

  if (descriptor.get) {
    return descriptor.get.call(receiver);
  }

  return descriptor.value;
}

module.exports = _classPrivateFieldGet;
},{}],4:[function(require,module,exports){
function _classPrivateFieldSet(receiver, privateMap, value) {
  var descriptor = privateMap.get(receiver);

  if (!descriptor) {
    throw new TypeError("attempted to set private field on non-instance");
  }

  if (descriptor.set) {
    descriptor.set.call(receiver, value);
  } else {
    if (!descriptor.writable) {
      throw new TypeError("attempted to set read only private field");
    }

    descriptor.value = value;
  }

  return value;
}

module.exports = _classPrivateFieldSet;
},{}],5:[function(require,module,exports){
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

module.exports = _createClass;
},{}],6:[function(require,module,exports){
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

module.exports = _defineProperty;
},{}],7:[function(require,module,exports){
var superPropBase = require("./superPropBase");

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    module.exports = _get = Reflect.get;
  } else {
    module.exports = _get = function _get(target, property, receiver) {
      var base = superPropBase(target, property);
      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };
  }

  return _get(target, property, receiver || target);
}

module.exports = _get;
},{"./superPropBase":13}],8:[function(require,module,exports){
function _getPrototypeOf(o) {
  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

module.exports = _getPrototypeOf;
},{}],9:[function(require,module,exports){
var setPrototypeOf = require("./setPrototypeOf");

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) setPrototypeOf(subClass, superClass);
}

module.exports = _inherits;
},{"./setPrototypeOf":12}],10:[function(require,module,exports){
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

module.exports = _interopRequireDefault;
},{}],11:[function(require,module,exports){
var _typeof = require("@babel/runtime/helpers/typeof");

var assertThisInitialized = require("./assertThisInitialized");

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return assertThisInitialized(self);
}

module.exports = _possibleConstructorReturn;
},{"./assertThisInitialized":1,"@babel/runtime/helpers/typeof":14}],12:[function(require,module,exports){
function _setPrototypeOf(o, p) {
  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

module.exports = _setPrototypeOf;
},{}],13:[function(require,module,exports){
var getPrototypeOf = require("./getPrototypeOf");

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

module.exports = _superPropBase;
},{"./getPrototypeOf":8}],14:[function(require,module,exports){
function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    module.exports = _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    module.exports = _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

module.exports = _typeof;
},{}],15:[function(require,module,exports){
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.HichartsChart=exports.Chart=void 0;var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common"),_properties2=require("./properties"),_result2=require("./result");function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,r=(0,_getPrototypeOf2.default)(e);if(t){var s=(0,_getPrototypeOf2.default)(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,i)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _logger=new WeakMap,_id=new WeakMap,_properties=new WeakMap,_result=new WeakMap,Chart=function(){function e(t){if((0,_classCallCheck2.default)(this,e),_logger.set(this,{writable:!0,value:void 0}),_id.set(this,{writable:!0,value:void 0}),_properties.set(this,{writable:!0,value:void 0}),_result.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_logger,new _common.Logger("Chart")),(0,_classPrivateFieldGet2.default)(this,_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)(this,_result,void 0),(0,_classPrivateFieldSet2.default)(this,_properties,void 0),!(t instanceof _properties2.Properties))throw"Invalid Properties. properties parameter must be an instance of Properties class.";(0,_classPrivateFieldSet2.default)(this,_properties,t),(0,_classPrivateFieldSet2.default)(this,_id,(0,_classPrivateFieldGet2.default)(this,_properties).id)}return(0,_createClass2.default)(e,[{key:"setResult",value:function(e){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("setResult"),e instanceof _result2.Result?((0,_classPrivateFieldSet2.default)(this,_result,e),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify((0,_classPrivateFieldGet2.default)(this,_properties))),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify((0,_classPrivateFieldGet2.default)(this,_result).properties)),(0,_classPrivateFieldGet2.default)(this,_properties).updateWith((0,_classPrivateFieldGet2.default)(this,_result).properties),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify((0,_classPrivateFieldGet2.default)(this,_properties)))):(0,_classPrivateFieldGet2.default)(this,_logger).error("Received result is not compatible. Result must be an instance of Result."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setProperties",value:function(e){if(!(e instanceof _properties2.Properties))throw"properies type must be Properties";return(0,_classPrivateFieldSet2.default)(this,_properties,e),this}},{key:"plot",value:function(){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this plot() method should never execute, specializations of Chart need to overload it."),"This method should not be called, implementations need to overload it."}},{key:"result",set:function(e){setResult(e)},get:function(){return(0,_classPrivateFieldGet2.default)(this,_result)}},{key:"properties",get:function(){return(0,_classPrivateFieldGet2.default)(this,_properties)},set:function(e){this.setProperties(e)}},{key:"id",get:function(){return(0,_classPrivateFieldGet2.default)(this,_id)}}]),e}();exports.Chart=Chart;var _chart=new WeakMap,_logger2=new WeakMap,_highcharts=new WeakMap,HichartsChart=function(e){(0,_inherits2.default)(i,e);var t=_createSuper(i);function i(e){var r;return(0,_classCallCheck2.default)(this,i),r=t.call(this,e),_chart.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_logger2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_highcharts.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_logger2,new _common.Logger("HichartsChart")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(r),_logger2).debug("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_chart,void 0),r.checkHighcharts(),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_highcharts,window.Highcharts),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(r),_logger2).trace(JSON.stringify((0,_assertThisInitialized2.default)(r))),r}return(0,_createClass2.default)(i,[{key:"checkHighcharts",value:function(){(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Checking if highcharts resources are available.");var e=window.Highcharts;if(!e)throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Highcharts not available"),"Required Highcharts Library not available";if(!e._modules.hasOwnProperty("Extensions/Drilldown.js"))throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Highcharts Drilldown module not available"),"Required Highcharts Drilldown module not available";if(!e._modules.hasOwnProperty("Extensions/Exporting.js"))throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Highcharts Exporting module not available"),"Required Highcharts Exporting module not available";if(!e._modules.hasOwnProperty("Extensions/Data.js"))throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Highcharts Data module not available"),"Required Highcharts Data module not available";if(!e._modules.hasOwnProperty("Extensions/Math3D.js"))throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Highcharts 3D module not available"),"Required Highcharts 3D module not available"}},{key:"plot",value:function(){var e=new _common.DebugTimer;(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Ploting chart"),e.start("build_Highcharts_structure");var t={chart:{type:this.properties.chartType,animation:this.properties.animation},xAxis:{type:"category"},plotOptions:{}};e.start(".asHighchartSeries"),t.series=this.result.series.map(function(e){return e.asHighchartSeries()}),e.end(".asHighchartSeries"),this.properties.title&&(t.title={text:this.properties.title}),this.properties.subtitle&&(t.subtitle={text:this.properties.subtitle}),this.properties.yLabel&&(t.yAxis=t.yAxis||{},t.yAxis.title={text:this.properties.yLabel}),this.result.drilldown&&((0,_classPrivateFieldGet2.default)(this,_logger2).debug("YAY... this is a drilldown chart"),t.drilldown=this.result.drilldownSeries,t.chart.events={drillup:this.result.drillupSeriesEvent,drilldown:this.result.drilldownSeriesEvent}),(0,_classPrivateFieldGet2.default)(this,_logger2).trace("Is 3D (multiple series)? -"+this.result.isMultipleSeries()),this.result.isMultipleSeries()&&(t.chart.options3d={enabled:!0,alpha:this.properties.alpha3D,beta:this.properties.beta3D,depth:this.properties.depth3D,viewDistance:5,fitToPlot:!0,frame:{bottom:{size:1,color:"rgba(0,0,0,0.05)"}}},t.plotOptions.series=t.plotOptions.series||{},t.plotOptions.series.groupZPadding=20,t.plotOptions.series.depth=0,t.plotOptions.series.groupPadding=0,t.plotOptions.series.grouping=!1),this.properties.stackingType&&(t.plotOptions.series=t.plotOptions.series||{},t.plotOptions.series.stacking=this.properties.stackingType),e.end("build_Highcharts_structure"),console.log(t),(0,_classPrivateFieldSet2.default)(this,_chart,(0,_classPrivateFieldGet2.default)(this,_highcharts).chart(this.properties.id,t)),(0,_classPrivateFieldGet2.default)(this,_logger2).trace(JSON.stringify(t)),(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Plotting into "+this.properties.id),(0,_classPrivateFieldGet2.default)(this,_logger2).trace(JSON.stringify(this.result)),(0,_classPrivateFieldGet2.default)(this,_highcharts).addEvent((0,_classPrivateFieldGet2.default)(this,_chart).container,"mousedown",this.getMousedownEvent((0,_classPrivateFieldGet2.default)(this,_chart),this.result.isMultipleSeries())),e.print()}},{key:"getMousedownEvent",value:function(e,t){(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getMousedownEvent");var i=(0,_classPrivateFieldGet2.default)(this,_logger2);if(!t)return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("retrieving default mousedown event on charts."),function(e){i.trace("Default mouse down event on chart.")};var r=(0,_classPrivateFieldGet2.default)(this,_highcharts);return function(t){var s=e;console.log("Mousedown in multiple series");var a=(t=s.pointer.normalize(t)).chartX,l=t.chartY,o=s.options.chart.options3d.alpha,u=s.options.chart.options3d.beta,n=5,h=[];function d(e){e=s.pointer.normalize(e);var t=o+(e.chartY-l)/n,i=u+(a-e.chartX)/n;s.update({chart:{options3d:{alpha:t,beta:i}}},void 0,void 0,!1),console.log("alpha:"+t+", beta:"+i)}function c(){h.forEach(function(e){e&&e()}),h.length=0}h.push(r.addEvent(document,"mousemove",d)),h.push(r.addEvent(document,"touchmove",d)),h.push(r.addEvent(document,"mouseup",c)),h.push(r.addEvent(document,"touchend",c)),i.trace(t.toString())}}},{key:"chart",get:function(){return(0,_classPrivateFieldGet2.default)(this,_chart)}}]),i}(Chart);exports.HichartsChart=HichartsChart,module.exports={Chart:Chart,HichartsChart:HichartsChart};

},{"./common":16,"./properties":23,"./result":24,"@babel/runtime/helpers/assertThisInitialized":1,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/classPrivateFieldGet":3,"@babel/runtime/helpers/classPrivateFieldSet":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":11}],16:[function(require,module,exports){
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.DebugTimer=exports.Common=exports.GeneType=exports.ResultSeriesType=exports.Logger=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_source=new WeakMap,Logger=function(){function e(t){(0,_classCallCheck2.default)(this,e),_source.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_source,t)}return(0,_createClass2.default)(e,null,[{key:"setDebugLevel",value:function(t){e.DEBUG_LEVEL=t}},{key:"LEVEL_OFF",get:function(){return e.level.OFF}},{key:"LEVEL_TRACE",get:function(){return e.level.TRACE}},{key:"LEVEL_DEBUG",get:function(){return e.level.DEBUG}},{key:"LEVEL_INFO",get:function(){return e.level.INFO}},{key:"LEVEL_WARN",get:function(){return e.level.WARN}},{key:"LEVEL_ERROR",get:function(){return e.level.ERROR}},{key:"LEVEL_FATAL",get:function(){return e.level.FATAL}}]),(0,_createClass2.default)(e,[{key:"_datetime",value:function(){var e=new Date;return(e=[""+e.getFullYear(),"0"+(e.getMonth()+1),"0"+e.getDate(),"0"+e.getHours(),"0"+e.getMinutes(),"0"+e.getSeconds()].map(function(e){return e.slice(-2)})).slice(0,3).join("")+"T"+e.slice(3).join("")}},{key:"_log",value:function(e,t){console.log(this._datetime().concat(" ").concat((0,_classPrivateFieldGet2.default)(this,_source)).concat(" ").concat(e).concat(": \r\n").concat(t))}},{key:"trace",value:function(t){e.DEBUG_LEVEL<=e.LEVEL_TRACE&&this._log("TRACE",t)}},{key:"debug",value:function(t){e.DEBUG_LEVEL<=e.LEVEL_DEBUG&&this._log("DEBUG",t)}},{key:"info",value:function(t){e.DEBUG_LEVEL<=e.LEVEL_INFO&&this._log("INFO",t)}},{key:"warn",value:function(t){e.DEBUG_LEVEL<=e.LEVEL_WARN&&this._log("WARN",t)}},{key:"error",value:function(t){e.DEBUG_LEVEL<=e.LEVEL_ERROR&&this._log("ERROR",t)}},{key:"fatal",value:function(t){e.DEBUG_LEVEL<=e.LEVEL_FATAL&&this._log("FATAL",t)}}]),e}();exports.Logger=Logger,(0,_defineProperty2.default)(Logger,"level",{ALL:0,TRACE:20,DEBUG:30,INFO:40,WARN:50,ERROR:70,FATAL:90,OFF:100}),(0,_defineProperty2.default)(Logger,"DEBUG_LEVEL",Logger.LEVEL_OFF);var _typeCode=new WeakMap,_typeName=new WeakMap,_unique=new WeakMap,_exists=new WeakMap,_productive=new WeakMap,ResultSeriesType=function(){function e(t,u,i,s,r){(0,_classCallCheck2.default)(this,e),_typeCode.set(this,{writable:!0,value:void 0}),_typeName.set(this,{writable:!0,value:void 0}),_unique.set(this,{writable:!0,value:void 0}),_exists.set(this,{writable:!0,value:void 0}),_productive.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_typeCode,t),(0,_classPrivateFieldSet2.default)(this,_typeName,u),(0,_classPrivateFieldSet2.default)(this,_unique,i),(0,_classPrivateFieldSet2.default)(this,_exists,s),(0,_classPrivateFieldSet2.default)(this,_productive,r)}return(0,_createClass2.default)(e,null,[{key:"contains",value:function(t){return Object.values(e.typeCode).map(function(e){return e.code}).includes(t)}},{key:"getByName",value:function(t){if(!t)throw"undefined name value. Name parameter is required.";var u=t.includes("unique"),i=t.includes("exists"),s=t.includes("productive"),r=e.names[t];return new e(r.code,r.name,u,i,s)}},{key:"FAMILY",get:function(){return e.typeCode.FAMILY.code}},{key:"GENE",get:function(){return e.typeCode.GENE.code}},{key:"CALL",get:function(){return e.typeCode.CALL.code}},{key:"GENE_COUNT",get:function(){return e.typeCode.GENE_COUNT.code}},{key:"TOP_CLONES",get:function(){return e.typeCode.TOP_CLONES.code}},{key:"JUNCTION_LENGTH",get:function(){return e.typeCode.JUNCTION_LENGTH.code}},{key:"JUNCTION_AA_LENGTH",get:function(){return e.typeCode.JUNCTION_AA_LENGTH.code}}]),(0,_createClass2.default)(e,[{key:"toString",value:function(){var e=(0,_classPrivateFieldGet2.default)(this,_typeName);if((0,_classPrivateFieldGet2.default)(this,_exists)||(0,_classPrivateFieldGet2.default)(this,_productive)||(0,_classPrivateFieldGet2.default)(this,_unique)){var t=!0;e+="[",(0,_classPrivateFieldGet2.default)(this,_exists)&&(e+="exists",t=!1),(0,_classPrivateFieldGet2.default)(this,_unique)&&(t||(e+=", "),e+="unique",t=!1),(0,_classPrivateFieldGet2.default)(this,_productive)&&(t||(e+=", "),e+="productive",t=!1),e+="]"}return e}},{key:"typeCode",get:function(){return(0,_classPrivateFieldGet2.default)(this,_typeCode)}},{key:"typeName",get:function(){return(0,_classPrivateFieldGet2.default)(this,_typeName)}},{key:"unique",get:function(){return(0,_classPrivateFieldGet2.default)(this,_unique)}},{key:"exists",get:function(){return(0,_classPrivateFieldGet2.default)(this,_exists)}},{key:"productive",get:function(){return(0,_classPrivateFieldGet2.default)(this,_productive)}}]),e}();exports.ResultSeriesType=ResultSeriesType,(0,_defineProperty2.default)(ResultSeriesType,"typeCode",{FAMILY:{code:"f",name:"Subgroup"},GENE:{code:"g",name:"Gene"},CALL:{code:"c",name:"Allele"},GENE_COUNT:{code:"gc",name:"Gene Count"},TOP_CLONES:{code:"tc",name:"Top Clones"},JUNCTION_LENGTH:{code:"jl",name:"Junction Length"},JUNCTION_AA_LENGTH:{code:"jal",name:"Junction aa Length"}}),(0,_defineProperty2.default)(ResultSeriesType,"names",{v_call_unique:ResultSeriesType.typeCode.CALL,d_call_unique:ResultSeriesType.typeCode.CALL,j_call_unique:ResultSeriesType.typeCode.CALL,c_call_unique:ResultSeriesType.typeCode.CALL,v_call_unique_productive:ResultSeriesType.typeCode.CALL,d_call_unique_productive:ResultSeriesType.typeCode.CALL,j_call_unique_productive:ResultSeriesType.typeCode.CALL,c_call_unique_productive:ResultSeriesType.typeCode.CALL,v_call_exists:ResultSeriesType.typeCode.CALL,d_call_exists:ResultSeriesType.typeCode.CALL,j_call_exists:ResultSeriesType.typeCode.CALL,c_call_exists:ResultSeriesType.typeCode.CALL,v_call_exists_productive:ResultSeriesType.typeCode.CALL,d_call_exists_productive:ResultSeriesType.typeCode.CALL,j_call_exists_productive:ResultSeriesType.typeCode.CALL,c_call_exists_productive:ResultSeriesType.typeCode.CALL,v_gene_unique:ResultSeriesType.typeCode.GENE,d_gene_unique:ResultSeriesType.typeCode.GENE,j_gene_unique:ResultSeriesType.typeCode.GENE,c_gene_unique:ResultSeriesType.typeCode.GENE,v_gene_unique_productive:ResultSeriesType.typeCode.GENE,d_gene_unique_productive:ResultSeriesType.typeCode.GENE,j_gene_unique_productive:ResultSeriesType.typeCode.GENE,c_gene_unique_productive:ResultSeriesType.typeCode.GENE,v_gene_exists:ResultSeriesType.typeCode.GENE,d_gene_exists:ResultSeriesType.typeCode.GENE,j_gene_exists:ResultSeriesType.typeCode.GENE,c_gene_exists:ResultSeriesType.typeCode.GENE,v_gene_exists_productive:ResultSeriesType.typeCode.GENE,d_gene_exists_productive:ResultSeriesType.typeCode.GENE,j_gene_exists_productive:ResultSeriesType.typeCode.GENE,c_gene_exists_productive:ResultSeriesType.typeCode.GENE,v_subgroup_unique:ResultSeriesType.typeCode.FAMILY,d_subgroup_unique:ResultSeriesType.typeCode.FAMILY,j_subgroup_unique:ResultSeriesType.typeCode.FAMILY,c_subgroup_unique:ResultSeriesType.typeCode.FAMILY,v_subgroup_unique_productive:ResultSeriesType.typeCode.FAMILY,d_subgroup_unique_productive:ResultSeriesType.typeCode.FAMILY,j_subgroup_unique_productive:ResultSeriesType.typeCode.FAMILY,c_subgroup_unique_productive:ResultSeriesType.typeCode.FAMILY,v_subgroup_exists:ResultSeriesType.typeCode.FAMILY,d_subgroup_exists:ResultSeriesType.typeCode.FAMILY,j_subgroup_exists:ResultSeriesType.typeCode.FAMILY,c_subgroup_exists:ResultSeriesType.typeCode.FAMILY,v_subgroup_exists_productive:ResultSeriesType.typeCode.FAMILY,d_subgroup_exists_productive:ResultSeriesType.typeCode.FAMILY,j_subgroup_exists_productive:ResultSeriesType.typeCode.FAMILY,c_subgroup_exists_productive:ResultSeriesType.typeCode.FAMILY,top_clones:ResultSeriesType.typeCode.TOP_CLONES,junction_length:ResultSeriesType.typeCode.JUNCTION_LENGTH,junction_length_productive:ResultSeriesType.typeCode.JUNCTION_LENGTH,junction_aa_length:ResultSeriesType.typeCode.JUNCTION_AA_LENGTH,junction_aa_length_productive:ResultSeriesType.typeCode.JUNCTION_AA_LENGTH});var GeneType=function(){function e(){(0,_classCallCheck2.default)(this,e)}return(0,_createClass2.default)(e,null,[{key:"contains",value:function(t){return Object.values(e.genes).includes(t)}},{key:"V_GENE",get:function(){return e.genes.V_GENE}},{key:"D_GENE",get:function(){return e.genes.D_GENE}},{key:"J_GENE",get:function(){return e.genes.J_GENE}},{key:"C_GENE",get:function(){return e.genes.C_GENE}}]),e}();exports.GeneType=GeneType,(0,_defineProperty2.default)(GeneType,"genes",{V_GENE:"v",D_GENE:"d",J_GENE:"j",C_GENE:"c"});var Common=function(){function e(){(0,_classCallCheck2.default)(this,e)}return(0,_createClass2.default)(e,null,[{key:"makeid",value:function(e){for(var t="",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=u.length,s=0;s<e;s++)t+=u.charAt(Math.floor(Math.random()*i));return t}},{key:"roundTo",value:function(e,t){return+(Math.round(e+"e+"+t)+"e-"+t)}},{key:"objectConstructor",get:function(){return{}.constructor}}]),e}();exports.Common=Common;var _logger=new WeakMap,_data=new WeakMap,DebugTimer=function(){function e(){(0,_classCallCheck2.default)(this,e),_logger.set(this,{writable:!0,value:void 0}),_data.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_data,{}),(0,_classPrivateFieldSet2.default)(this,_logger,new Logger("DebugTimer"))}return(0,_createClass2.default)(e,[{key:"start",value:function(e){(0,_classPrivateFieldGet2.default)(this,_data)[e]={start:Date.now()}}},{key:"end",value:function(e){(0,_classPrivateFieldGet2.default)(this,_data)[e].end=Date.now(),(0,_classPrivateFieldGet2.default)(this,_data)[e].total=(0,_classPrivateFieldGet2.default)(this,_data)[e].end-(0,_classPrivateFieldGet2.default)(this,_data)[e].start}},{key:"print",value:function(){for(var e="",t=0,u=Object.keys((0,_classPrivateFieldGet2.default)(this,_data));t<u.length;t++){var i=u[t];e+="".concat(i,": ").concat((0,_classPrivateFieldGet2.default)(this,_data)[i].total," ms \r\n")}return(0,_classPrivateFieldGet2.default)(this,_logger).info(e),e}},{key:"clean",value:function(){(0,_classPrivateFieldSet2.default)(this,_data,{})}}]),e}();exports.DebugTimer=DebugTimer,module.exports={Logger:Logger,ResultSeriesType:ResultSeriesType,GeneType:GeneType,Common:Common,DebugTimer:DebugTimer};

},{"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/classPrivateFieldGet":3,"@babel/runtime/helpers/classPrivateFieldSet":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/defineProperty":6,"@babel/runtime/helpers/interopRequireDefault":10}],17:[function(require,module,exports){
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.JGeneUsageDrilldownStatsParser=exports.GeneUsageDrilldownStatsParser=exports.GeneUsageStatsParser=exports.JunctionLenghtStatsParser=void 0;var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_common=require("./common"),_properties=require("./properties"),_parser=require("./parser"),_series8=require("./series");function ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach(function(t){(0,_defineProperty2.default)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var s,r=(0,_getPrototypeOf2.default)(e);if(t){var i=(0,_getPrototypeOf2.default)(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,s)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var StatsParserConstants=function(){function e(){(0,_classCallCheck2.default)(this,e)}return(0,_createClass2.default)(e,null,[{key:"INFO",get:function(){return e.VOCABULARY.INFO}},{key:"MESSAGE",get:function(){return e.VOCABULARY.MESSAGE}},{key:"STATISTICS",get:function(){return e.VOCABULARY.STATISTICS}},{key:"STATISTICS_NAME",get:function(){return e.VOCABULARY.STATISTICS_NAME}},{key:"REPERTOIRES",get:function(){return e.VOCABULARY.REPERTOIRES}},{key:"REPERTOIRE_ID",get:function(){return e.VOCABULARY.REPERTOIRE_ID}},{key:"SAMPLE_PROCESSING_ID",get:function(){return e.VOCABULARY.SAMPLE_PROCESSING_ID}},{key:"DATA_PROCESSING_ID",get:function(){return e.VOCABULARY.DATA_PROCESSING_ID}},{key:"TOTAL",get:function(){return e.VOCABULARY.TOTAL}},{key:"DATA",get:function(){return e.VOCABULARY.DATA}},{key:"KEY",get:function(){return e.VOCABULARY.KEY}},{key:"VALUE",get:function(){return e.VOCABULARY.VALUE}},{key:"POSTFIX_FAMILY",get:function(){return e.VOCABULARY.POSTFIX_FAMILY}},{key:"POSTFIX_GENE",get:function(){return e.VOCABULARY.POSTFIX_GENE}},{key:"POSTFIX_CALL",get:function(){return e.VOCABULARY.POSTFIX_CALL}},{key:"SPLITER_GENE",get:function(){return e.VOCABULARY.SPLITER_GENE}},{key:"SPLITER_CALL",get:function(){return e.VOCABULARY.SPLITER_CALL}}]),e}();(0,_defineProperty2.default)(StatsParserConstants,"VOCABULARY",{INFO:"Info",MESSAGE:"Message",STATISTICS:"statistics",STATISTICS_NAME:"statistic_name",REPERTOIRES:"repertoires",REPERTOIRE_ID:"repertoire_id",SAMPLE_PROCESSING_ID:"sample_processing_id",DATA_PROCESSING_ID:"data_processing_id",TOTAL:"total",DATA:"data",KEY:"key",VALUE:"value",POSTFIX_FAMILY:"_subgroup",POSTFIX_GENE:"_gene",POSTFIX_CALL:"_call",SPLITER_GENE:"-",SPLITER_CALL:"*"});var _logger=new WeakMap,_series=new WeakMap,_seriesByRepertoire=new WeakMap,_multipleSeries=new WeakMap,JunctionLenghtStatsParser=function(e){(0,_inherits2.default)(s,e);var t=_createSuper(s);function s(){var e;return(0,_classCallCheck2.default)(this,s),e=t.call(this),_logger.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_series.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_seriesByRepertoire.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_multipleSeries.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_logger,new _common.Logger("JunctionLenghtParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(e),_logger).trace("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_multipleSeries,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_series,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_seriesByRepertoire,[]),e}return(0,_createClass2.default)(s,[{key:"isMultipleSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries)}},{key:"_initializeRepertoire",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger).debug("Initializing repertoire "+e),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire)[e]||((0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire)[e]=[])}},{key:"preparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger).trace("preparse.")}},{key:"onparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger).trace("parse");var t=new _common.DebugTimer;t.start("parse");var s=["rgb(0,66,157)","rgb(43,87,167)","rgb(66,108,176)","rgb(86,129,185)","rgb(105,151,194)","rgb(125,174,202)","rgb(147,196,210)","rgb(171,218,217)","rgb(202,239,223)","rgb(255,226,202)","rgb(255,196,180)","rgb(255,165,158)","rgb(249,134,137)","rgb(237,105,118)","rgb(221,76,101)","rgb(202,47,85)","rgb(177,19,70)","rgb(147,0,58)"],r=0,i=1,a=[];"string"==typeof e&&(e=JSON.parse(e));var l=new _properties.Properties,n=e[StatsParserConstants.MESSAGE],o=n.length;if((0,_classPrivateFieldGet2.default)(this,_logger).debug("Data Result length = "+o),o>1){if((0,_classPrivateFieldGet2.default)(this,_logger).debug("Representing "+o+" repertoires. Will need a 3D chart."),(0,_classPrivateFieldSet2.default)(this,_multipleSeries,!0),s.length<o)throw(0,_classPrivateFieldGet2.default)(this,_logger).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";i=Math.floor((s.length-1)/(o-1))}for(var d=0;d<o;d++){var u=s[r];r+=i;var _=n[d],c=_[StatsParserConstants.REPERTOIRES],g=c[StatsParserConstants.REPERTOIRE_ID];if(_[StatsParserConstants.STATISTICS].length>0){this._initializeRepertoire(g);var S=_[StatsParserConstants.STATISTICS][0],f=S[StatsParserConstants.STATISTICS_NAME],p="rep".concat(g).concat(f),P=_common.ResultSeriesType.getByName(f);l.subtitle=P.toString();for(var h="Repertoire ".concat(g),v=S[StatsParserConstants.TOTAL],y=(new _series8.ResultSeries).setRepertoireId(g).setSampleProcessingId(c[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(c[StatsParserConstants.DATA_PROCESSING_ID]).setId(p).setName(h).setFieldName(f).setColor(u).setType(P),T=y.data,I=0,m=0;m<S[StatsParserConstants.DATA].length;m++){var R=S[StatsParserConstants.DATA][m],C=R[StatsParserConstants.VALUE];I+=C;var G=(new _series8.ResultSeriesDataItem).setName(R[StatsParserConstants.KEY]).setY(C/v);T.push(G)}I!=v&&(0,_classPrivateFieldGet2.default)(this,_logger).error("Inconsistency between the statistics value for total "+f+" and the sun of the individual values ("+v+"/"+I+")."),T.sort(function(e,t){return e.name-t.name}),a.push(y)}}(0,_classPrivateFieldSet2.default)(this,_series,a),t.end("parse"),t.print()}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series)}}]),s}(_parser.Parser);exports.JunctionLenghtStatsParser=JunctionLenghtStatsParser;var _logger2=new WeakMap,_geneType=new WeakMap,_multipleSeries2=new WeakMap,_series2=new WeakMap,_drilldownSeries=new WeakMap,_seriesByRepertoire2=new WeakMap,_geneSeriesByFamily=new WeakMap,_cellSeriesByGene=new WeakMap,_familySeriesByRepertoire=new WeakMap,_geneSeriesByRepertoire=new WeakMap,_cellSeriesByRepertoire=new WeakMap,GeneUsageDrilldownStatsParser=function(e){(0,_inherits2.default)(s,e);var t=_createSuper(s);function s(e){var r;if((0,_classCallCheck2.default)(this,s),r=t.call(this),_logger2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_geneType.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_multipleSeries2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_series2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_drilldownSeries.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_seriesByRepertoire2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_geneSeriesByFamily.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_cellSeriesByGene.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_familySeriesByRepertoire.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_geneSeriesByRepertoire.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_cellSeriesByRepertoire.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_logger2,new _common.Logger("GeneUsageDrilldownStatsParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(r),_logger2).debug("Constructor."),!_common.GeneType.contains(e))throw logger.fatal("type must exist in GeneType.genes"),"type must exist in GeneType.genes";return(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_geneType,e),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_multipleSeries2,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_series2,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_drilldownSeries,{series:[]}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_seriesByRepertoire2,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_geneSeriesByFamily,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_cellSeriesByGene,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_familySeriesByRepertoire,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_geneSeriesByRepertoire,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_cellSeriesByRepertoire,{}),r}return(0,_createClass2.default)(s,[{key:"isMultipleSeries",value:function(){return this.multipleSeries}},{key:"_initializeRepertoire",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Initializing repertoire "+e),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire2)[e]||((0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire2)[e]=[]),(0,_classPrivateFieldGet2.default)(this,_familySeriesByRepertoire)[e]||((0,_classPrivateFieldGet2.default)(this,_familySeriesByRepertoire)[e]=[]),(0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire)[e]||((0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire)[e]=[]),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire)[e]||((0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire)[e]=[])}},{key:"_initializeGeneGroup",value:function(e,t){(0,_classPrivateFieldGet2.default)(this,_geneSeriesByFamily)[t]||((0,_classPrivateFieldGet2.default)(this,_logger2).debug("Initializing #_geneSeriesByFamily["+t+"]."),(0,_classPrivateFieldGet2.default)(this,_geneSeriesByFamily)[t]=[])}},{key:"_initializeCellGroup",value:function(e,t){(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene)[t]||((0,_classPrivateFieldGet2.default)(this,_logger2).debug("Initializing #_cellSeriesByGene["+t+"]."),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene)[t]=[])}},{key:"_addToStructures",value:function(e){if(!(e instanceof _series8.ResultSeries))throw"series type must be ResultSeries";var t=e.repertoireId,s=e.type,r=e.parentName;switch(s.typeCode){case _common.ResultSeriesType.FAMILY:(0,_classPrivateFieldGet2.default)(this,_familySeriesByRepertoire)[t].push(e);break;case _common.ResultSeriesType.GENE:(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Received a new series of Genes. Repertoire:"+t+" , parentName:"+r),r?((0,_classPrivateFieldGet2.default)(this,_logger2).debug("Adding to #_geneSeriesByFamily["+r+"] :"),(0,_classPrivateFieldGet2.default)(this,_geneSeriesByFamily)[r].push(e),(0,_classPrivateFieldGet2.default)(this,_logger2).debug((0,_classPrivateFieldGet2.default)(this,_geneSeriesByFamily)[r])):(0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire)[t].push(e);break;case _common.ResultSeriesType.CALL:r?((0,_classPrivateFieldGet2.default)(this,_logger2).debug("Adding to #_cellSeriesByGene["+r+"] :"),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene)[r].push(e),(0,_classPrivateFieldGet2.default)(this,_logger2).debug((0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene)[r])):(0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire)[t].push(e);break;default:throw"Trying to process an incompatible Result Series type in GeneUsageDrilldownStatsParser."}(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire2)[t].push(e)}},{key:"preparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger2).trace("preparse.")}},{key:"onparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger2).trace("parse");var t=new _common.DebugTimer;t.start("parse");var s,r,i,a=["rgb(0,66,157)","rgb(43,87,167)","rgb(66,108,176)","rgb(86,129,185)","rgb(105,151,194)","rgb(125,174,202)","rgb(147,196,210)","rgb(171,218,217)","rgb(202,239,223)","rgb(255,226,202)","rgb(255,196,180)","rgb(255,165,158)","rgb(249,134,137)","rgb(237,105,118)","rgb(221,76,101)","rgb(202,47,85)","rgb(177,19,70)","rgb(147,0,58)"],l=0,n=1,o=((0,_classPrivateFieldGet2.default)(this,_geneType),[]),d=[],u=[],_=[],c=StatsParserConstants.POSTFIX_FAMILY,g=StatsParserConstants.POSTFIX_GENE,S=StatsParserConstants.SPLITER_GENE,f=StatsParserConstants.POSTFIX_CALL,p=StatsParserConstants.SPLITER_CALL;"string"==typeof e&&(e=JSON.parse(e));var P=e[StatsParserConstants.MESSAGE],h=P.length;if((0,_classPrivateFieldGet2.default)(this,_logger2).debug("Data Result length = "+h),h>1){if((0,_classPrivateFieldGet2.default)(this,_logger2).debug("Representing "+h+" repertoires. Will need a 3D chart."),(0,_classPrivateFieldSet2.default)(this,_multipleSeries2,!0),a.length<h)throw(0,_classPrivateFieldGet2.default)(this,_logger2).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";n=Math.floor((a.length-1)/(h-1))}for(var v=0;v<h;v++){var y=a[l];l+=n;var T=P[v],I=T[StatsParserConstants.REPERTOIRES],m=I[StatsParserConstants.REPERTOIRE_ID];this._initializeRepertoire(m);for(var R=0;R<T[StatsParserConstants.STATISTICS].length;R++){var C=T[StatsParserConstants.STATISTICS][R],G=C[StatsParserConstants.STATISTICS_NAME],b=_common.ResultSeriesType.getByName(G).typeCode;b==_common.ResultSeriesType.FAMILY?s=C:b==_common.ResultSeriesType.GENE?r=C:b==_common.ResultSeriesType.CALL&&(i=C)}if(!s||!r||!i)throw"Incomplete structure for Drilldown. A structure of subgroup > gene > cell is required.";if(s){for(var F=s[StatsParserConstants.STATISTICS_NAME],A="rep".concat(m).concat(c),w=_common.ResultSeriesType.getByName(F),E="Repertoire ".concat(m).concat(" ").concat(w.toString()),D=(s[StatsParserConstants.TOTAL],(new _series8.ResultSeries).setRepertoireId(m).setSampleProcessingId(I[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(I[StatsParserConstants.DATA_PROCESSING_ID]).setId(A).setName(E).setFieldName(F).setColor(y).setType(w)),O=D.data,N=0;N<s[StatsParserConstants.DATA].length;N++){var B=s[StatsParserConstants.DATA][N],L=B[StatsParserConstants.KEY]||"",k=L.concat(g);u.push(L),this._initializeGeneGroup(m,k);var z=(new _series8.ResultSeriesDataItem).setName(L).setY(B[StatsParserConstants.VALUE]).setDrilldown(k);O.push(z)}o.push(D),this._addToStructures(D)}if(r){for(var M=r[StatsParserConstants.STATISTICS_NAME],U="rep".concat(m).concat(g),Y=_common.ResultSeriesType.getByName(M),W="Repertoire ".concat(m).concat(" ").concat(Y.toString()),J=(new _series8.ResultSeries).setRepertoireId(m).setSampleProcessingId(I[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(I[StatsParserConstants.DATA_PROCESSING_ID]).setId(U).setName(W).setFieldName(M).setColor(y).setType(Y),q=J.data,V=new Object,x=0;x<u.length;x++){var j=u[x].concat(g),X=u[x].concat(" ").concat(Y.toString());V[u[x]]=(new _series8.ResultSeries).setRepertoireId(m).setSampleProcessingId(I[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(I[StatsParserConstants.DATA_PROCESSING_ID]).setId(j).setName(X).setFieldName(M).setType(Y).setColor(y).setParentName(j)}for(var K=0;K<r[StatsParserConstants.DATA].length;K++){var H=r[StatsParserConstants.DATA][K],Q=H[StatsParserConstants.KEY]||"",Z=Q.concat(f);_.push(Q),this._initializeCellGroup(m,Z);var $=Q.indexOf(S),ee=Q.substring(0,$),te=(new _series8.ResultSeriesDataItem).setName(Q).setY(H[StatsParserConstants.VALUE]).setDrilldown(Z);q.push(te),V[ee].data.push(te)}for(var se in(0,_classPrivateFieldGet2.default)(this,_logger2).trace("All Gene data series for Repertoire "+m+": "),(0,_classPrivateFieldGet2.default)(this,_logger2).trace(JSON.stringify(J)),this._addToStructures(J),(0,_classPrivateFieldGet2.default)(this,_logger2).trace("All series for gene data grouped by family : "),(0,_classPrivateFieldGet2.default)(this,_logger2).trace(JSON.stringify(V)),V){var re=V[se];this._addToStructures(re),d.push(re.asHighchartSeries())}}if(i){for(var ie=i[StatsParserConstants.STATISTICS_NAME],ae="rep".concat(m).concat(f),le=_common.ResultSeriesType.getByName(ie),ne="Repertoire ".concat(m).concat(" ").concat(le.toString()),oe=(new _series8.ResultSeries).setRepertoireId(m).setSampleProcessingId(I[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(I[StatsParserConstants.DATA_PROCESSING_ID]).setId(ae).setName(ne).setFieldName(ie).setColor(y).setType(le).data,de=new Object,ue=0;ue<_.length;ue++){var _e=_[ue].concat(f),ce=_[ue].concat(" ").concat(le.toString());de[_[ue]]=(new _series8.ResultSeries).setRepertoireId(m).setSampleProcessingId(I[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(I[StatsParserConstants.DATA_PROCESSING_ID]).setId(_e).setName(ce).setFieldName(ie).setType(le).setColor(y).setParentName(_e)}for(var ge=0;ge<i[StatsParserConstants.DATA].length;ge++){var Se=i[StatsParserConstants.DATA][ge],fe=Se[StatsParserConstants.KEY]||"",pe=fe.indexOf(p),Pe=fe.substring(0,pe),he=(new _series8.ResultSeriesDataItem).setName(fe).setY(Se[StatsParserConstants.VALUE]);oe.push(he),de[Pe].data.push(he)}for(var ve in de){var ye=de[ve];this._addToStructures(ye),d.push(ye.asHighchartSeries())}}}(0,_classPrivateFieldSet2.default)(this,_series2,o),(0,_classPrivateFieldSet2.default)(this,_drilldownSeries,{series:d}),t.end("parse"),t.print()}},{key:"drilldown",get:function(){return!0}},{key:"geneType",get:function(){return(0,_classPrivateFieldGet2.default)(this,_geneType)}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series2)}},{key:"drilldownSeries",get:function(){if((0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting drilldown series."),!this.drilldown||this.multipleSeries){var e={series:[]};return(0,_classPrivateFieldGet2.default)(this,_logger2).trace(JSON.stringify(e)),e}return(0,_classPrivateFieldGet2.default)(this,_logger2).trace(JSON.stringify((0,_classPrivateFieldGet2.default)(this,_drilldownSeries))),(0,_classPrivateFieldGet2.default)(this,_drilldownSeries)}},{key:"multipleSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries2)}},{key:"drillupSeriesEvent",get:function(){if(this.drilldown){var e=(0,_classPrivateFieldGet2.default)(this,_logger2);return(0,_classPrivateFieldGet2.default)(this,_multipleSeries2)?(e.debug("retrieving multiple series drillup event"),function(t){e.trace(t.toString())}):(e.debug("retrieving single series drillup event"),function(t){e.trace(t.toString())})}}},{key:"drilldownSeriesEvent",get:function(){if((0,_classPrivateFieldGet2.default)(this,_logger2).debug("requested drilldown event"),this.drilldown){var e=(0,_classPrivateFieldGet2.default)(this,_logger2);if(!(0,_classPrivateFieldGet2.default)(this,_multipleSeries2))return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("retrieving single series drilldown event"),function(t){this.setTitle(null,{text:t.point.name}),e.trace(t.toString())};var t=_objectSpread(_objectSpread({},(0,_classPrivateFieldGet2.default)(this,_geneSeriesByFamily)),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene));return function(s){var r=_common.Common.makeid(12);if(console.log(this),e.trace(r+", "+s.toString()),s.seriesOptions)this.setTitle(null,{text:s.seriesOptions.name});else{console.log(this.series),console.log(s.point),this.setTitle(null,{text:s.point.name}),e.debug(r+", Gathering drilldown series for "+s.point.drilldown);for(var i=0;i<t[s.point.drilldown].length;i++){var a=t[s.point.drilldown][i];e.debug(r+", Found series"),e.trace(JSON.stringify(a)),this.addSingleSeriesAsDrilldown(s.point,a.asHighchartSeries())}e.trace(JSON.stringify(this.drilldown)),console.log(this.series),console.log(s.point),this.applyDrilldown(),console.log(this.series),console.log(s.point)}}}}}]),s}(_parser.DrilldownParser);exports.GeneUsageDrilldownStatsParser=GeneUsageDrilldownStatsParser;var _logger3=new WeakMap,_multipleSeries3=new WeakMap,_series5=new WeakMap,_seriesByRepertoire3=new WeakMap,GeneUsageStatsParser=function(e){(0,_inherits2.default)(s,e);var t=_createSuper(s);function s(){var e;return(0,_classCallCheck2.default)(this,s),e=t.call(this),_logger3.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_multipleSeries3.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_series5.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_seriesByRepertoire3.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_logger3,new _common.Logger("GeneUsageStatsParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(e),_logger3).debug("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_multipleSeries3,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_series5,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_seriesByRepertoire3,[]),e}return(0,_createClass2.default)(s,[{key:"isMultipleSeries",value:function(){return this.multipleSeries}},{key:"_initializeRepertoire",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger3).debug("Initializing repertoire "+e),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire3)[e]||((0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire3)[e]=[])}},{key:"preparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger3).trace("preparse.")}},{key:"onparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger3).trace("parse");var t=new _common.DebugTimer;t.start("parse");var s=["rgb(0,66,157)","rgb(43,87,167)","rgb(66,108,176)","rgb(86,129,185)","rgb(105,151,194)","rgb(125,174,202)","rgb(147,196,210)","rgb(171,218,217)","rgb(202,239,223)","rgb(255,226,202)","rgb(255,196,180)","rgb(255,165,158)","rgb(249,134,137)","rgb(237,105,118)","rgb(221,76,101)","rgb(202,47,85)","rgb(177,19,70)","rgb(147,0,58)"],r=0,i=1,a=[];"string"==typeof e&&(e=JSON.parse(e));var l=e[StatsParserConstants.MESSAGE],n=l.length;if((0,_classPrivateFieldGet2.default)(this,_logger3).debug("Data Result length = "+n),n>1){if((0,_classPrivateFieldGet2.default)(this,_logger3).debug("Representing "+n+" repertoires. Will need a 3D chart."),(0,_classPrivateFieldSet2.default)(this,_multipleSeries3,!0),s.length<n)throw(0,_classPrivateFieldGet2.default)(this,_logger3).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";i=Math.floor((s.length-1)/(n-1))}for(var o=0;o<n;o++){var d=s[r];r+=i;var u=l[o],_=u[StatsParserConstants.REPERTOIRES],c=_[StatsParserConstants.REPERTOIRE_ID];if(u[StatsParserConstants.STATISTICS].length>0){this._initializeRepertoire(c);for(var g=u[StatsParserConstants.STATISTICS][0],S=g[StatsParserConstants.STATISTICS_NAME],f="rep".concat(c).concat(S),p=_common.ResultSeriesType.getByName(S),P="Repertoire ".concat(c).concat(" ").concat(p.toString()),h=(g[StatsParserConstants.TOTAL],(new _series8.ResultSeries).setRepertoireId(c).setSampleProcessingId(_[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(_[StatsParserConstants.DATA_PROCESSING_ID]).setId(f).setName(P).setFieldName(S).setColor(d).setType(p)),v=h.data,y=0;y<g[StatsParserConstants.DATA].length;y++){var T=g[StatsParserConstants.DATA][y],I=(new _series8.ResultSeriesDataItem).setName(T[StatsParserConstants.KEY]).setY(T[StatsParserConstants.VALUE]);v.push(I)}a.push(h)}}(0,_classPrivateFieldSet2.default)(this,_series5,a),t.end("parse"),t.print()}},{key:"drilldown",get:function(){return!1}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger3).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series5)}},{key:"drilldownSeries",get:function(){(0,_classPrivateFieldGet2.default)(this,_logger3).debug("getting drilldown series.");var e={series:[]};return(0,_classPrivateFieldGet2.default)(this,_logger3).trace(JSON.stringify(e)),e}},{key:"multipleSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries3)}},{key:"drillupSeriesEvent",get:function(){}},{key:"drilldownSeriesEvent",get:function(){(0,_classPrivateFieldGet2.default)(this,_logger3).debug("requested drilldown event")}}]),s}(_parser.Parser);exports.GeneUsageStatsParser=GeneUsageStatsParser;var _logger4=new WeakMap,_geneType2=new WeakMap,_multipleSeries4=new WeakMap,_series6=new WeakMap,_drilldownSeries2=new WeakMap,_seriesByRepertoire4=new WeakMap,_cellSeriesByGene2=new WeakMap,_geneSeriesByRepertoire2=new WeakMap,_cellSeriesByRepertoire2=new WeakMap,JGeneUsageDrilldownStatsParser=function(e){(0,_inherits2.default)(s,e);var t=_createSuper(s);function s(e){var r;if((0,_classCallCheck2.default)(this,s),r=t.call(this),_logger4.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_geneType2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_multipleSeries4.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_series6.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_drilldownSeries2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_seriesByRepertoire4.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_cellSeriesByGene2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_geneSeriesByRepertoire2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_cellSeriesByRepertoire2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_logger4,new _common.Logger("GeneUsageDrilldownStatsParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(r),_logger4).debug("Constructor."),e!=_common.GeneType.J_GENE)throw logger.fatal("type must be GeneType.J_TYPE"),"type must be GeneType.J_TYPE";return(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_geneType2,e),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_multipleSeries4,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_series6,[]),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_drilldownSeries2,{series:[]}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_seriesByRepertoire4,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_cellSeriesByGene2,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_geneSeriesByRepertoire2,{}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_cellSeriesByRepertoire2,{}),r}return(0,_createClass2.default)(s,[{key:"isMultipleSeries",value:function(){return this.multipleSeries}},{key:"_initializeRepertoire",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger4).debug("Initializing repertoire "+e),(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire4)[e]||((0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire4)[e]=[]),(0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire2)[e]||((0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire2)[e]=[]),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire2)[e]||((0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire2)[e]=[])}},{key:"_initializeCellGroup",value:function(e,t){(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene2)[t]||((0,_classPrivateFieldGet2.default)(this,_logger4).debug("Initializing #_cellSeriesByGene["+t+"]."),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene2)[t]=[])}},{key:"_addToStructures",value:function(e){if(!(e instanceof _series8.ResultSeries))throw"series type must be ResultSeries";var t=e.repertoireId,s=e.type,r=e.parentName;switch(s.typeCode){case _common.ResultSeriesType.GENE:(0,_classPrivateFieldGet2.default)(this,_geneSeriesByRepertoire2)[t].push(e);break;case _common.ResultSeriesType.CALL:r?((0,_classPrivateFieldGet2.default)(this,_logger4).debug("Adding to #_cellSeriesByGene["+r+"] :"),(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene2)[r].push(e),(0,_classPrivateFieldGet2.default)(this,_logger4).debug((0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene2)[r])):(0,_classPrivateFieldGet2.default)(this,_cellSeriesByRepertoire2)[t].push(e);break;default:throw"Trying to process an incompatible Result Series type in GeneUsageDrilldownStatsParser."}(0,_classPrivateFieldGet2.default)(this,_seriesByRepertoire4)[t].push(e)}},{key:"preparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger4).trace("preparse.")}},{key:"onparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger4).trace("parse");var t=new _common.DebugTimer;t.start("parse");var s,r,i=["rgb(0,66,157)","rgb(43,87,167)","rgb(66,108,176)","rgb(86,129,185)","rgb(105,151,194)","rgb(125,174,202)","rgb(147,196,210)","rgb(171,218,217)","rgb(202,239,223)","rgb(255,226,202)","rgb(255,196,180)","rgb(255,165,158)","rgb(249,134,137)","rgb(237,105,118)","rgb(221,76,101)","rgb(202,47,85)","rgb(177,19,70)","rgb(147,0,58)"],a=0,l=1,n=[],o=[],d=[],u=StatsParserConstants.POSTFIX_GENE,_=(StatsParserConstants.SPLITER_GENE,StatsParserConstants.POSTFIX_CALL),c=StatsParserConstants.SPLITER_CALL;"string"==typeof e&&(e=JSON.parse(e));var g=e[StatsParserConstants.MESSAGE],S=g.length;if((0,_classPrivateFieldGet2.default)(this,_logger4).debug("Data Result length = "+S),S>1){if((0,_classPrivateFieldGet2.default)(this,_logger4).debug("Representing "+S+" repertoires. Will need a 3D chart."),(0,_classPrivateFieldSet2.default)(this,_multipleSeries4,!0),i.length<S)throw(0,_classPrivateFieldGet2.default)(this,_logger4).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";l=Math.floor((i.length-1)/(S-1))}for(var f=0;f<S;f++){var p=i[a];a+=l;var P=g[f],h=P[StatsParserConstants.REPERTOIRES],v=h[StatsParserConstants.REPERTOIRE_ID];this._initializeRepertoire(v);for(var y=0;y<P[StatsParserConstants.STATISTICS].length;y++){var T=P[StatsParserConstants.STATISTICS][y],I=T[StatsParserConstants.STATISTICS_NAME],m=_common.ResultSeriesType.getByName(I).typeCode;m==_common.ResultSeriesType.GENE?s=T:m==_common.ResultSeriesType.CALL?r=T:_common.ResultSeriesType.FAMILY}if(!s||!r)throw"Incomplete structure for Drilldown. A structure of gene > call is required.";if(s){for(var R=s[StatsParserConstants.STATISTICS_NAME],C="rep".concat(v).concat(u),G=_common.ResultSeriesType.getByName(R),b="Repertoire ".concat(v).concat(" ").concat(G.toString()),F=(s[StatsParserConstants.TOTAL],(new _series8.ResultSeries).setRepertoireId(v).setSampleProcessingId(h[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(h[StatsParserConstants.DATA_PROCESSING_ID]).setId(C).setName(b).setFieldName(R).setColor(p).setType(G)),A=F.data,w=0;w<s[StatsParserConstants.DATA].length;w++){var E=s[StatsParserConstants.DATA][w],D=E[StatsParserConstants.KEY]||"",O=D.concat(_);d.push(D),this._initializeCellGroup(v,O);var N=(new _series8.ResultSeriesDataItem).setName(D).setY(E[StatsParserConstants.VALUE]).setDrilldown(O);A.push(N)}A.sort(function(e,t){return e.name.localeCompare(t.name)}),n.push(F),this._addToStructures(F)}if(r){for(var B=r[StatsParserConstants.STATISTICS_NAME],L="rep".concat(v).concat(_),k=_common.ResultSeriesType.getByName(B),z="Repertoire ".concat(v).concat(" ").concat(k.toString()),M=(new _series8.ResultSeries).setRepertoireId(v).setSampleProcessingId(h[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(h[StatsParserConstants.DATA_PROCESSING_ID]).setId(L).setName(z).setFieldName(B).setColor(p).setType(k).data,U=new Object,Y=0;Y<d.length;Y++){var W=d[Y].concat(_),J=d[Y].concat(" ").concat(k.toString());U[d[Y]]=(new _series8.ResultSeries).setRepertoireId(v).setSampleProcessingId(h[StatsParserConstants.SAMPLE_PROCESSING_ID]).setDataProcessingId(h[StatsParserConstants.DATA_PROCESSING_ID]).setId(W).setName(J).setFieldName(B).setType(k).setColor(p).setParentName(W)}for(var q=0;q<r[StatsParserConstants.DATA].length;q++){var V=r[StatsParserConstants.DATA][q],x=V[StatsParserConstants.KEY]||"",j=x.indexOf(c),X=x.substring(0,j),K=(new _series8.ResultSeriesDataItem).setName(x).setY(V[StatsParserConstants.VALUE]);M.push(K),U[X].data.push(K)}for(var H in M.sort(function(e,t){return e.name.localeCompare(t.name)}),U){var Q=U[H];Q.data.sort(function(e,t){return e.name.localeCompare(t.name)}),this._addToStructures(Q),o.push(Q.asHighchartSeries())}}}(0,_classPrivateFieldSet2.default)(this,_series6,n),(0,_classPrivateFieldSet2.default)(this,_drilldownSeries2,{series:o}),t.end("parse"),t.print()}},{key:"drilldown",get:function(){return!0}},{key:"geneType",get:function(){return(0,_classPrivateFieldGet2.default)(this,_geneType2)}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger4).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series6)}},{key:"drilldownSeries",get:function(){if((0,_classPrivateFieldGet2.default)(this,_logger4).debug("getting drilldown series."),this.multipleSeries){var e={series:[]};return(0,_classPrivateFieldGet2.default)(this,_logger4).trace(JSON.stringify(e)),e}return(0,_classPrivateFieldGet2.default)(this,_logger4).trace(JSON.stringify((0,_classPrivateFieldGet2.default)(this,_drilldownSeries2))),(0,_classPrivateFieldGet2.default)(this,_drilldownSeries2)}},{key:"multipleSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries4)}},{key:"drillupSeriesEvent",get:function(){var e=(0,_classPrivateFieldGet2.default)(this,_logger4);return(0,_classPrivateFieldGet2.default)(this,_multipleSeries4)?(e.debug("retrieving multiple series drillup event"),function(t){e.trace(t.toString())}):(e.debug("retrieving single series drillup event"),function(t){e.trace(t.toString())})}},{key:"drilldownSeriesEvent",get:function(){(0,_classPrivateFieldGet2.default)(this,_logger4).debug("requested drilldown event");var e=(0,_classPrivateFieldGet2.default)(this,_logger4);if(!(0,_classPrivateFieldGet2.default)(this,_multipleSeries4))return(0,_classPrivateFieldGet2.default)(this,_logger4).debug("retrieving single series drilldown event"),function(t){this.setTitle(null,{text:t.point.name}),e.trace(t.toString())};var t=_objectSpread({},(0,_classPrivateFieldGet2.default)(this,_cellSeriesByGene2));return function(s){var r=_common.Common.makeid(12);if(console.log(this),e.trace(r+", "+s.toString()),s.seriesOptions)this.setTitle(null,{text:s.seriesOptions.name});else{console.log(this.series),console.log(s.point),this.setTitle(null,{text:s.point.name}),e.debug(r+", Gathering drilldown series for "+s.point.drilldown);for(var i=0;i<t[s.point.drilldown].length;i++){var a=t[s.point.drilldown][i];e.debug(r+", Found series"),e.trace(JSON.stringify(a)),this.addSingleSeriesAsDrilldown(s.point,a.asHighchartSeries())}e.trace(JSON.stringify(this.drilldown)),console.log(this.series),console.log(s.point),this.applyDrilldown(),console.log(this.series),console.log(s.point)}}}}]),s}(_parser.DrilldownParser);exports.JGeneUsageDrilldownStatsParser=JGeneUsageDrilldownStatsParser,module.exports={JunctionLenghtStatsParser:JunctionLenghtStatsParser,GeneUsageStatsParser:GeneUsageStatsParser,GeneUsageDrilldownStatsParser:GeneUsageDrilldownStatsParser,JGeneUsageDrilldownStatsParser:JGeneUsageDrilldownStatsParser};

},{"./common":16,"./parser":22,"./properties":23,"./series":25,"@babel/runtime/helpers/assertThisInitialized":1,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/classPrivateFieldGet":3,"@babel/runtime/helpers/classPrivateFieldSet":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/defineProperty":6,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":11}],18:[function(require,module,exports){
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.CGeneStatsResult=exports.JGeneStatsResult=exports.DGeneStatsResult=exports.VGeneStatsResult=exports.GeneStatsResult=exports.JunctionLenghtStatsResult=void 0;var _get2=_interopRequireDefault(require("@babel/runtime/helpers/get")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_common=require("./common"),_properties=require("./properties"),_result=require("./result"),_iReceptorStatsParser=require("./iReceptorStatsParser");function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var s,r=(0,_getPrototypeOf2.default)(e);if(t){var i=(0,_getPrototypeOf2.default)(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,s)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var StatsResult=function(e){(0,_inherits2.default)(s,e);var t=_createSuper(s);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(0,_classCallCheck2.default)(this,s),t.call(this,e)}return s}(_result.Result),_logger=new WeakMap,_drilldownSeries=new WeakMap,_multipleSeries=new WeakMap,_defaultProperties=new WeakMap,JunctionLenghtStatsResult=function(e){(0,_inherits2.default)(s,e);var t=_createSuper(s);function s(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(0,_classCallCheck2.default)(this,s),e=t.call(this,r),_logger.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_drilldownSeries.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_multipleSeries.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_defaultProperties.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_logger,new _common.Logger("JunctionLenghtStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(e),_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_drilldownSeries,{series:[]}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_multipleSeries,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_defaultProperties,(new _properties.Properties).setTitle("Junction Length").setYLabel("Percentage")),e.setParser(new _iReceptorStatsParser.JunctionLenghtStatsParser),e}return(0,_createClass2.default)(s,[{key:"isMultipleSeries",value:function(){return!1}},{key:"preparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger).debug("preparse."),this.parser.preparse(e)}},{key:"onparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger).debug("parse."),this.parser.onparse(e)}},{key:"postparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger).debug("postparse.")}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting series."),this.parser.series}},{key:"drilldownSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting drilldown series."),this.parser.drilldownSeries}},{key:"properties",get:function(){return(0,_classPrivateFieldGet2.default)(this,_defaultProperties)}}]),s}(StatsResult);exports.JunctionLenghtStatsResult=JunctionLenghtStatsResult;var _logger2=new WeakMap,_geneType=new WeakMap,_defaultProperties2=new WeakMap,GeneStatsResult=function(e){(0,_inherits2.default)(s,e);var t=_createSuper(s);function s(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if((0,_classCallCheck2.default)(this,s),r=t.call(this,i),_logger2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_geneType.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),_defaultProperties2.set((0,_assertThisInitialized2.default)(r),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_logger2,new _common.Logger("GeneStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(r),_logger2).debug("Constructor."),!_common.GeneType.contains(e))throw logger.fatal("type must exist in GeneType.genes"),"type must exist in GeneType.genes";return(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_geneType,e),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(r),_defaultProperties2,(new _properties.Properties).setTitle("IR+ Repertoire Stats").setSubtitle("Subgroups").setYLabel("Count")),r.setParser(r.drilldown?new _iReceptorStatsParser.GeneUsageDrilldownStatsParser(e):new _iReceptorStatsParser.GeneUsageStatsParser(e)),r}return(0,_createClass2.default)(s,[{key:"isMultipleSeries",value:function(){return this.parser.multipleSeries}},{key:"preparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger2).debug("preparse."),this.parser.preparse(e)}},{key:"onparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger2).debug("parse."),this.parser.onparse(e)}},{key:"postparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger2).debug("postparse.")}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting series."),this.parser.series}},{key:"drilldownSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting drilldown series."),this.parser.drilldownSeries}},{key:"drillupSeriesEvent",get:function(){return this.parser.drillupSeriesEvent}},{key:"drilldownSeriesEvent",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("requested drilldown event"),this.parser.drilldownSeriesEvent}},{key:"properties",get:function(){return(0,_classPrivateFieldGet2.default)(this,_defaultProperties2)}},{key:"multipleSeries",get:function(){return this.parser.multipleSeries}}]),s}(StatsResult);exports.GeneStatsResult=GeneStatsResult;var _logger3=new WeakMap,VGeneStatsResult=function(e){(0,_inherits2.default)(s,e);var t=_createSuper(s);function s(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(0,_classCallCheck2.default)(this,s),e=t.call(this,_common.GeneType.V_GENE,r),_logger3.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_logger3,new _common.Logger("VGeneStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(e),_logger3).debug("Constructor."),e}return(0,_createClass2.default)(s,[{key:"setDrilldown",value:function(e){return(0,_classPrivateFieldGet2.default)(this,_logger3).debug("setting drilldown to "+e),this.drilldown==e?this:((0,_get2.default)((0,_getPrototypeOf2.default)(s.prototype),"setDrilldown",this).call(this,e),this.setParser(this.drilldown?new _iReceptorStatsParser.GeneUsageDrilldownStatsParser(_common.GeneType.V_GENE):new _iReceptorStatsParser.GeneUsageStatsParser(_common.GeneType.V_GENE)))}}]),s}(GeneStatsResult);exports.VGeneStatsResult=VGeneStatsResult;var _logger4=new WeakMap,DGeneStatsResult=function(e){(0,_inherits2.default)(s,e);var t=_createSuper(s);function s(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(0,_classCallCheck2.default)(this,s),e=t.call(this,_common.GeneType.D_GENE,r),_logger4.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_logger4,new _common.Logger("VGeneStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(e),_logger4).debug("Constructor."),e}return(0,_createClass2.default)(s,[{key:"setDrilldown",value:function(e){return(0,_classPrivateFieldGet2.default)(this,_logger4).debug("setting drilldown to "+e),this.drilldown==e?this:((0,_get2.default)((0,_getPrototypeOf2.default)(s.prototype),"setDrilldown",this).call(this,e),this.setParser(this.drilldown?new _iReceptorStatsParser.GeneUsageDrilldownStatsParser(_common.GeneType.D_GENE):new _iReceptorStatsParser.GeneUsageStatsParser(_common.GeneType.D_GENE)))}}]),s}(GeneStatsResult);exports.DGeneStatsResult=DGeneStatsResult;var _logger5=new WeakMap,JGeneStatsResult=function(e){(0,_inherits2.default)(s,e);var t=_createSuper(s);function s(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(0,_classCallCheck2.default)(this,s),e=t.call(this,_common.GeneType.J_GENE,r),_logger5.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_logger5,new _common.Logger("VGeneStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(e),_logger5).debug("Constructor."),e.drilldown&&e.setParser(new _iReceptorStatsParser.JGeneUsageDrilldownStatsParser(_common.GeneType.J_GENE)),e}return(0,_createClass2.default)(s,[{key:"setDrilldown",value:function(e){return(0,_classPrivateFieldGet2.default)(this,_logger5).debug("setting drilldown to "+e),this.drilldown==e?this:((0,_get2.default)((0,_getPrototypeOf2.default)(s.prototype),"setDrilldown",this).call(this,e),this.setParser(this.drilldown?new _iReceptorStatsParser.JGeneUsageDrilldownStatsParser(_common.GeneType.J_GENE):new _iReceptorStatsParser.GeneUsageStatsParser(_common.GeneType.J_GENE)))}}]),s}(GeneStatsResult);exports.JGeneStatsResult=JGeneStatsResult;var _logger6=new WeakMap,CGeneStatsResult=function(e){(0,_inherits2.default)(s,e);var t=_createSuper(s);function s(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(0,_classCallCheck2.default)(this,s),e=t.call(this,_common.GeneType.C_GENE,r),_logger6.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_logger6,new _common.Logger("CGeneStatsResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(e),_logger6).debug("Constructor."),e}return(0,_createClass2.default)(s,[{key:"setDrilldown",value:function(e){return(0,_classPrivateFieldGet2.default)(this,_logger6).debug("setting drilldown to "+e),this.drilldown==e?this:((0,_get2.default)((0,_getPrototypeOf2.default)(s.prototype),"setDrilldown",this).call(this,e),this.setParser(this.drilldown?new _iReceptorStatsParser.GeneUsageDrilldownStatsParser(_common.GeneType.C_GENE):new _iReceptorStatsParser.GeneUsageStatsParser(_common.GeneType.C_GENE)))}}]),s}(GeneStatsResult);exports.CGeneStatsResult=CGeneStatsResult,module.exports={JunctionLenghtStatsResult:JunctionLenghtStatsResult,GeneStatsResult:GeneStatsResult,VGeneStatsResult:VGeneStatsResult,DGeneStatsResult:DGeneStatsResult,JGeneStatsResult:JGeneStatsResult,CGeneStatsResult:CGeneStatsResult};

},{"./common":16,"./iReceptorStatsParser":17,"./properties":23,"./result":24,"@babel/runtime/helpers/assertThisInitialized":1,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/classPrivateFieldGet":3,"@babel/runtime/helpers/classPrivateFieldSet":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":11}],19:[function(require,module,exports){
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImmuneDbCloneCountParser=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common"),_parser=require("./parser"),_series2=require("./series");function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,s=(0,_getPrototypeOf2.default)(e);if(t){var a=(0,_getPrototypeOf2.default)(this).constructor;r=Reflect.construct(s,arguments,a)}else r=s.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _logger=new WeakMap,_series=new WeakMap,_multipleSeries=new WeakMap,ImmuneDbCloneCountParser=function(e){(0,_inherits2.default)(r,e);var t=_createSuper(r);function r(){var e;return(0,_classCallCheck2.default)(this,r),e=t.call(this),_logger.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_series.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_multipleSeries.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_logger,new _common.Logger("ImmuneDbCloneCountParser")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(e),_logger).trace("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_multipleSeries,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_series,[]),e}return(0,_createClass2.default)(r,[{key:"isMultipleSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries)}},{key:"preparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger).trace("preparse.")}},{key:"onparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger).trace("parse");var t=new _common.DebugTimer;t.start("parse");var r=["rgb(0,66,157)","rgb(43,87,167)","rgb(66,108,176)","rgb(86,129,185)","rgb(105,151,194)","rgb(125,174,202)","rgb(147,196,210)","rgb(171,218,217)","rgb(202,239,223)","rgb(255,226,202)","rgb(255,196,180)","rgb(255,165,158)","rgb(249,134,137)","rgb(237,105,118)","rgb(221,76,101)","rgb(202,47,85)","rgb(177,19,70)","rgb(147,0,58)"],s=0,a=1;"string"==typeof e&&(e=JSON.parse(e));var i=Object.keys(e);if(console.log(i),i.length>1){if((0,_classPrivateFieldGet2.default)(this,_logger).debug("Representing "+i+" studies."),(0,_classPrivateFieldSet2.default)(this,_multipleSeries,!0),r.length<i.length)throw(0,_classPrivateFieldGet2.default)(this,_logger).error("Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array."),"Not enough colors set for the amount of repertoires. Please increase the number of colors in seriesColor array.";a=Math.floor((r.length-1)/(i.length-1))}var l={},o=0;t.start("prepare");for(var n=0;n<i.length;n++){var u=i[n];l[u]={};for(var c=e[u],f=0;f<c.length;f++){var p=c[f],d=Object.keys(p);if(1!=d.length)throw"Received more than one subject for a study. Only one was expected.";var _=d[0],g=p[_];o++,(l[u][_]||(l[u][_]=[])).push(g)}}t.end("prepare"),console.log("Read "+i.length+" studies, in a total of "+o+" statistic values.");for(var h=[],m=0;m<i.length;m++){h[i[m]]=r[s],s+=a}var b=(new _series2.ResultSeries).setRepertoireId("").setSampleProcessingId("").setDataProcessingId("").setId("SeriesTop").setName("Fraction of top n clones").setFieldName("Fraction of top n clones").setType(_common.ResultSeriesType.getByName("top_clones")),v=b.data,P=(new _series2.ResultSeries).setRepertoireId("").setSampleProcessingId("").setDataProcessingId("").setId("SeriesRest").setName("Fraction of top 1-n clones").setFieldName("Fraction of top 1-n clones").setType(_common.ResultSeriesType.getByName("top_clones")).data;t.start("calculate");for(var C=0;C<i.length;C++){var R=i[C];for(var y in l[R])if(l[R].hasOwnProperty(y)){var I=_common.Common.roundTo(l[R][y].reduce(function(e,t){return e+t},0),4),S=(new _series2.ResultSeriesDataItem).setName(R+"-"+y).setY(I).setColor(h[R]);v.push(S);var D=(new _series2.ResultSeriesDataItem).setName(R+"-"+y).setY(1-I).setColor("rgb(0,0,0)");P.push(D)}}t.end("calculate"),(0,_classPrivateFieldGet2.default)(this,_series).push(b),t.end("parse"),t.print()}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series)}}]),r}(_parser.Parser);exports.ImmuneDbCloneCountParser=ImmuneDbCloneCountParser,module.exports={ImmuneDbCloneCountParser:ImmuneDbCloneCountParser};

},{"./common":16,"./parser":22,"./series":25,"@babel/runtime/helpers/assertThisInitialized":1,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/classPrivateFieldGet":3,"@babel/runtime/helpers/classPrivateFieldSet":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":11}],20:[function(require,module,exports){
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImmuneDbCloneCountResult=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common"),_properties=require("./properties"),_result=require("./result"),_immuneDbParser=require("./immuneDbParser");function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,i=(0,_getPrototypeOf2.default)(e);if(t){var l=(0,_getPrototypeOf2.default)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _logger=new WeakMap,_drilldownSeries=new WeakMap,_multipleSeries=new WeakMap,_defaultProperties=new WeakMap,ImmuneDbCloneCountResult=function(e){(0,_inherits2.default)(r,e);var t=_createSuper(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(0,_classCallCheck2.default)(this,r),e=t.call(this,i),_logger.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_drilldownSeries.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_multipleSeries.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_defaultProperties.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_logger,new _common.Logger("ImmuneDbCloneCountResult")),(0,_classPrivateFieldGet2.default)((0,_assertThisInitialized2.default)(e),_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_drilldownSeries,{series:[]}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_multipleSeries,!1),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_defaultProperties,(new _properties.Properties).setTitle("Fraction of Top n clones").setYLabel("Fraction (copies in subject/whole repertoire)").setStackingType("normal")),e.setParser(new _immuneDbParser.ImmuneDbCloneCountParser),e}return(0,_createClass2.default)(r,[{key:"isMultipleSeries",value:function(){return(0,_classPrivateFieldGet2.default)(this,_multipleSeries)}},{key:"preparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger).debug("preparse."),this.parser.preparse(e)}},{key:"onparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger).debug("parse."),this.parser.onparse(e)}},{key:"postparse",value:function(e){(0,_classPrivateFieldGet2.default)(this,_logger).debug("postparse.")}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting series."),this.parser.series}},{key:"drilldownSeries",get:function(){if((0,_classPrivateFieldGet2.default)(this,_logger).debug("getting drilldown series."),!this.drilldown||(0,_classPrivateFieldGet2.default)(this,_multipleSeries)){var e={series:[]};return(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(e)),e}return(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify((0,_classPrivateFieldGet2.default)(this,_drilldownSeries))),(0,_classPrivateFieldGet2.default)(this,_drilldownSeries)}},{key:"properties",get:function(){return(0,_classPrivateFieldGet2.default)(this,_defaultProperties)}}]),r}(_result.Result);exports.ImmuneDbCloneCountResult=ImmuneDbCloneCountResult,module.exports={ImmuneDbCloneCountResult:ImmuneDbCloneCountResult};

},{"./common":16,"./immuneDbParser":19,"./properties":23,"./result":24,"@babel/runtime/helpers/assertThisInitialized":1,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/classPrivateFieldGet":3,"@babel/runtime/helpers/classPrivateFieldSet":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":11}],21:[function(require,module,exports){
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Logger",{enumerable:!0,get:function(){return _common.Logger}}),Object.defineProperty(exports,"ResultSeriesType",{enumerable:!0,get:function(){return _common.ResultSeriesType}}),Object.defineProperty(exports,"GeneType",{enumerable:!0,get:function(){return _common.GeneType}}),Object.defineProperty(exports,"Properties",{enumerable:!0,get:function(){return _properties.Properties}}),Object.defineProperty(exports,"ResultSeriesDataItem",{enumerable:!0,get:function(){return _series.ResultSeriesDataItem}}),Object.defineProperty(exports,"ResultSeries",{enumerable:!0,get:function(){return _series.ResultSeries}}),Object.defineProperty(exports,"Result",{enumerable:!0,get:function(){return _result.Result}}),Object.defineProperty(exports,"VGeneStatsResult",{enumerable:!0,get:function(){return _iReceptorStatsResult.VGeneStatsResult}}),Object.defineProperty(exports,"DGeneStatsResult",{enumerable:!0,get:function(){return _iReceptorStatsResult.DGeneStatsResult}}),Object.defineProperty(exports,"JGeneStatsResult",{enumerable:!0,get:function(){return _iReceptorStatsResult.JGeneStatsResult}}),Object.defineProperty(exports,"CGeneStatsResult",{enumerable:!0,get:function(){return _iReceptorStatsResult.CGeneStatsResult}}),Object.defineProperty(exports,"JunctionLenghtStatsResult",{enumerable:!0,get:function(){return _iReceptorStatsResult.JunctionLenghtStatsResult}}),Object.defineProperty(exports,"HichartsChart",{enumerable:!0,get:function(){return _charts2.HichartsChart}}),exports.VisualizationLibrary=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common"),_properties=require("./properties"),_series=require("./series"),_result=require("./result"),_iReceptorStatsResult=require("./iReceptorStatsResult"),_immuneDbResult=require("./immuneDbResult"),_charts2=require("./charts"),_charts=new WeakMap,_logger=new WeakMap,_version=new WeakMap,_product=new WeakMap,VisualizationLibrary=function(){function e(){(0,_classCallCheck2.default)(this,e),_charts.set(this,{writable:!0,value:void 0}),_logger.set(this,{writable:!0,value:void 0}),_version.set(this,{writable:!0,value:void 0}),_product.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_logger,new _common.Logger("VisualizationLibrary")),(0,_classPrivateFieldGet2.default)(this,_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)(this,_version,"0.2.0"),(0,_classPrivateFieldSet2.default)(this,_product,"AIRR Visualization Library"),(0,_classPrivateFieldSet2.default)(this,_charts,{})}return(0,_createClass2.default)(e,[{key:"createChart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e=_properties.Properties.validOrNew(e);var t=this.get(e.id);return null==t?(t=new _charts2.HichartsChart(e),(0,_classPrivateFieldGet2.default)(this,_charts)[t.id]=t):t.properties=e,t}},{key:"createGeneStatsResult",value:function(e){var t=void 0;switch(e){case _common.GeneType.V_GENE:t=this.createVGeneStatsResult();break;case _common.GeneType.D_GENE:t=this.createDGeneStatsResult();break;case _common.GeneType.J_GENE:t=this.createJGeneStatsResult();break;case _common.GeneType.C_GENE:t=this.createCGeneStatsResult()}return t}},{key:"createVGeneStatsResult",value:function(){return new _iReceptorStatsResult.VGeneStatsResult}},{key:"createDGeneStatsResult",value:function(){return new _iReceptorStatsResult.DGeneStatsResult}},{key:"createJGeneStatsResult",value:function(){return new _iReceptorStatsResult.JGeneStatsResult}},{key:"createCGeneStatsResult",value:function(){return new _iReceptorStatsResult.CGeneStatsResult}},{key:"createImmuneDbCloneCountResult",value:function(){return new _immuneDbResult.ImmuneDbCloneCountResult}},{key:"createJunctionLengthStatsResult",value:function(){return new _iReceptorStatsResult.JunctionLenghtStatsResult}},{key:"createProperties",value:function(){return new _properties.Properties}},{key:"get",value:function(e){return(0,_classPrivateFieldGet2.default)(this,_charts)[e]}},{key:"setDebugLevel",value:function(e){_common.Logger.setDebugLevel(e)}},{key:"charts",get:function(){return(0,_classPrivateFieldGet2.default)(this,_charts)}},{key:"product",get:function(){return(0,_classPrivateFieldGet2.default)(this,_product)}},{key:"version",get:function(){return(0,_classPrivateFieldGet2.default)(this,_version)}}]),e}();exports.VisualizationLibrary=VisualizationLibrary,module.exports={VisualizationLibrary:VisualizationLibrary,HichartsChart:_charts2.HichartsChart,Result:_result.Result,VGeneStatsResult:_iReceptorStatsResult.VGeneStatsResult,DGeneStatsResult:_iReceptorStatsResult.DGeneStatsResult,JGeneStatsResult:_iReceptorStatsResult.JGeneStatsResult,CGeneStatsResult:_iReceptorStatsResult.CGeneStatsResult,JunctionLenghtStatsResult:_iReceptorStatsResult.JunctionLenghtStatsResult,ResultSeries:_series.ResultSeries,ResultSeriesDataItem:_series.ResultSeriesDataItem,Properties:_properties.Properties,GeneType:_common.GeneType,ResultSeriesType:_common.ResultSeriesType,Logger:_common.Logger},window,void 0===window.airrvisualization&&(window.airrvisualization=new VisualizationLibrary);

},{"./charts":15,"./common":16,"./iReceptorStatsResult":18,"./immuneDbResult":20,"./properties":23,"./result":24,"./series":25,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/classPrivateFieldGet":3,"@babel/runtime/helpers/classPrivateFieldSet":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":10}],22:[function(require,module,exports){
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrilldownParser=exports.Parser=void 0;var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common");function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,i=(0,_getPrototypeOf2.default)(e);if(t){var l=(0,_getPrototypeOf2.default)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _logger=new WeakMap,_series=new WeakMap,Parser=function(){function e(){(0,_classCallCheck2.default)(this,e),_logger.set(this,{writable:!0,value:void 0}),_series.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_logger,new _common.Logger("Parser")),(0,_classPrivateFieldSet2.default)(this,_series,[])}return(0,_createClass2.default)(e,[{key:"preparse",value:function(e){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this preparse() method should never execute, specializations of Result need to overload it."),"This method should not be called, implementations need to overload it."}},{key:"onparse",value:function(e){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this parse() method should never execute, specializations of Result need to overload it."),"This method should not be called, implementations need to overload it."}},{key:"postparse",value:function(e){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this preparse() method should never execute, specializations of Result need to overload it."),"This method should not be called, implementations need to overload it."}},{key:"series",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting series."),(0,_classPrivateFieldGet2.default)(this,_series)}}]),e}();exports.Parser=Parser;var _logger2=new WeakMap,_drilldownSeries=new WeakMap,DrilldownParser=function(e){(0,_inherits2.default)(r,e);var t=_createSuper(r);function r(){var e;return(0,_classCallCheck2.default)(this,r),e=t.call(this),_logger2.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),_drilldownSeries.set((0,_assertThisInitialized2.default)(e),{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_logger2,new _common.Logger("DrilldownParser")),(0,_classPrivateFieldSet2.default)((0,_assertThisInitialized2.default)(e),_drilldownSeries,[]),e}return(0,_createClass2.default)(r,[{key:"drilldownSeries",get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger2).debug("getting drilldownSeries."),(0,_classPrivateFieldGet2.default)(this,_drilldownSeries)}}]),r}(Parser);exports.DrilldownParser=DrilldownParser,module.exports={Parser:Parser,DrilldownParser:DrilldownParser};

},{"./common":16,"@babel/runtime/helpers/assertThisInitialized":1,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/classPrivateFieldGet":3,"@babel/runtime/helpers/classPrivateFieldSet":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":11}],23:[function(require,module,exports){
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.Properties=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common"),_logger=new WeakMap,_title=new WeakMap,_subtitle=new WeakMap,_xLabel=new WeakMap,_yLabel=new WeakMap,_stackingType=new WeakMap,_id=new WeakMap,_sort=new WeakMap,_chartType=new WeakMap,_animation=new WeakMap,_percentage=new WeakMap,_alpha3D=new WeakMap,_beta3D=new WeakMap,_depth3D=new WeakMap,_sort_userDefined=new WeakMap,_percentage_userDefined=new WeakMap,_chartType_userDefined=new WeakMap,_animation_userDefined=new WeakMap,_alpha3D_userDefined=new WeakMap,_beta3D_userDefined=new WeakMap,_depth3D_userDefined=new WeakMap,Properties=function(){function e(){(0,_classCallCheck2.default)(this,e),_logger.set(this,{writable:!0,value:void 0}),_title.set(this,{writable:!0,value:void 0}),_subtitle.set(this,{writable:!0,value:void 0}),_xLabel.set(this,{writable:!0,value:void 0}),_yLabel.set(this,{writable:!0,value:void 0}),_stackingType.set(this,{writable:!0,value:void 0}),_id.set(this,{writable:!0,value:void 0}),_sort.set(this,{writable:!0,value:void 0}),_chartType.set(this,{writable:!0,value:void 0}),_animation.set(this,{writable:!0,value:void 0}),_percentage.set(this,{writable:!0,value:void 0}),_alpha3D.set(this,{writable:!0,value:void 0}),_beta3D.set(this,{writable:!0,value:void 0}),_depth3D.set(this,{writable:!0,value:void 0}),_sort_userDefined.set(this,{writable:!0,value:void 0}),_percentage_userDefined.set(this,{writable:!0,value:void 0}),_chartType_userDefined.set(this,{writable:!0,value:void 0}),_animation_userDefined.set(this,{writable:!0,value:void 0}),_alpha3D_userDefined.set(this,{writable:!0,value:void 0}),_beta3D_userDefined.set(this,{writable:!0,value:void 0}),_depth3D_userDefined.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_logger,new _common.Logger("Properties")),(0,_classPrivateFieldGet2.default)(this,_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)(this,_title,void 0),(0,_classPrivateFieldSet2.default)(this,_subtitle,void 0),(0,_classPrivateFieldSet2.default)(this,_xLabel,void 0),(0,_classPrivateFieldSet2.default)(this,_yLabel,void 0),(0,_classPrivateFieldSet2.default)(this,_stackingType,void 0),(0,_classPrivateFieldSet2.default)(this,_id,_common.Common.makeid(12)),(0,_classPrivateFieldSet2.default)(this,_sort,e.SORT),(0,_classPrivateFieldSet2.default)(this,_percentage,e.PERCENTAGE),(0,_classPrivateFieldSet2.default)(this,_chartType,e.CHART_TYPE),(0,_classPrivateFieldSet2.default)(this,_animation,e.ANIMATION),(0,_classPrivateFieldSet2.default)(this,_alpha3D,e.ALPHA_3D),(0,_classPrivateFieldSet2.default)(this,_beta3D,e.BETA_3D),(0,_classPrivateFieldSet2.default)(this,_depth3D,e.DEPTH_3D),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),(0,_classPrivateFieldSet2.default)(this,_sort_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_percentage_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_chartType_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_animation_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_alpha3D_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_beta3D_userDefined,!1),(0,_classPrivateFieldSet2.default)(this,_depth3D_userDefined,!1)}return(0,_createClass2.default)(e,[{key:"setTitle",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_title,e),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setTitle."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setSubtitle",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_subtitle,e),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setSubtitle"),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setXLabel",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_xLabel,e),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setXLabel."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setYLabel",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_yLabel,e),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setYLabel."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setId",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_id,e),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setId."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),console.log(JSON.stringify(this)),this}},{key:"setStackingType",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_stackingType,e),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setStackingType."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setSort",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_sort,e),(0,_classPrivateFieldSet2.default)(this,_sort_userDefined,!0),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setSort."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setChartType",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_chartType,e),(0,_classPrivateFieldSet2.default)(this,_chartType_userDefined,!0),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setChartType."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setAnimation",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_animation,e),(0,_classPrivateFieldSet2.default)(this,_animation_userDefined,!0),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setAnimation."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setAlpha3D",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_alpha3D,e),(0,_classPrivateFieldSet2.default)(this,_alpha3D_userDefined,!0),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setAlpha3D."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setBeta3D",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_beta3D,e),(0,_classPrivateFieldSet2.default)(this,_beta3D_userDefined,!0),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setBeta3D."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setDepth3D",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_depth3D,e),(0,_classPrivateFieldSet2.default)(this,_depth3D_userDefined,!0),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setDepth3D."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"setPercentage",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_percentage,e),(0,_classPrivateFieldSet2.default)(this,_percentage_userDefined,!0),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setPercentage."),(0,_classPrivateFieldGet2.default)(this,_logger).trace(JSON.stringify(this)),this}},{key:"updateWith",value:function(e){this.title||this.setTitle(e.title),this.subtitle||this.setSubtitle(e.subtitle),this.xLabel||this.setXLabel(e.xLabel),this.yLabel||this.setYLabel(e.yLabel),this.stackingType||this.setStackingType(e.stackingType),this.id||this.setId(e.id),(0,_classPrivateFieldGet2.default)(this,_sort_userDefined)||this.setSort(e.sort),(0,_classPrivateFieldGet2.default)(this,_chartType_userDefined)||this.setChartType(e.chartType),(0,_classPrivateFieldGet2.default)(this,_animation_userDefined)||this.setAnimation(e.animation),(0,_classPrivateFieldGet2.default)(this,_alpha3D_userDefined)||this.setAlpha3D(e.alpha3D),(0,_classPrivateFieldGet2.default)(this,_beta3D_userDefined)||this.setBeta3D(e.beta3D),(0,_classPrivateFieldGet2.default)(this,_depth3D_userDefined)||this.setDepth3D(e.depth3D),(0,_classPrivateFieldGet2.default)(this,_percentage_userDefined)||this.setPercentage(e.percentage)}},{key:"title",get:function(){return(0,_classPrivateFieldGet2.default)(this,_title)},set:function(e){this.setTitle(e)}},{key:"subtitle",get:function(){return(0,_classPrivateFieldGet2.default)(this,_subtitle)},set:function(e){this.setSubtitle(e)}},{key:"xLabel",get:function(){return(0,_classPrivateFieldGet2.default)(this,_xLabel)},set:function(e){this.setXLabel(e)}},{key:"yLabel",get:function(){return(0,_classPrivateFieldGet2.default)(this,_yLabel)},set:function(e){this.setYLabel(e)}},{key:"stackingType",get:function(){return(0,_classPrivateFieldGet2.default)(this,_stackingType)},set:function(e){this.setStackingType(e)}},{key:"id",get:function(){return(0,_classPrivateFieldGet2.default)(this,_id)},set:function(e){this.setId(e)}},{key:"sort",get:function(){return(0,_classPrivateFieldGet2.default)(this,_sort)},set:function(e){this.setSort(e)}},{key:"chartType",get:function(){return(0,_classPrivateFieldGet2.default)(this,_chartType)},set:function(e){this.setChartType(e)}},{key:"animation",get:function(){return(0,_classPrivateFieldGet2.default)(this,_animation)},set:function(e){this.setAnimation(e)}},{key:"alpha3D",get:function(){return(0,_classPrivateFieldGet2.default)(this,_alpha3D)},set:function(e){this.setAlpha3D(e)}},{key:"beta3D",get:function(){return(0,_classPrivateFieldGet2.default)(this,_beta3D)},set:function(e){this.setBeta3D(e)}},{key:"depth3D",get:function(){return(0,_classPrivateFieldGet2.default)(this,_depth3D)},set:function(e){this.setDepth3D(e)}},{key:"percentage",get:function(){return(0,_classPrivateFieldGet2.default)(this,_percentage)},set:function(e){this.setPercentage(e)}}],[{key:"validOrNew",value:function(t){var i=void 0;if(null==t?(console.log("properties is null"),i=new e):t instanceof e?(console.log("properties is instance of Properties"),i=t):"string"==typeof t&&(t=JSON.parse(t)),null==i&&t.constructor==_common.Common.objectConstructor){i=new e;try{Object.seal(i),Object.assign(i,t)}catch(t){console.log(t),(0,_classPrivateFieldGet2.default)(this,_logger).error("Properties: tried to build a Object with the wrong structure. Returning an empty Properties instance."),i=new e}}return i||new e}}]),e}();exports.Properties=Properties,(0,_defineProperty2.default)(Properties,"CHART_TYPE","column"),(0,_defineProperty2.default)(Properties,"SORT",!1),(0,_defineProperty2.default)(Properties,"ANIMATION",!1),(0,_defineProperty2.default)(Properties,"PERCENTAGE",!1),(0,_defineProperty2.default)(Properties,"ALPHA_3D",20),(0,_defineProperty2.default)(Properties,"BETA_3D",0),(0,_defineProperty2.default)(Properties,"DEPTH_3D",100),module.exports={Properties:Properties};

},{"./common":16,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/classPrivateFieldGet":3,"@babel/runtime/helpers/classPrivateFieldSet":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/defineProperty":6,"@babel/runtime/helpers/interopRequireDefault":10}],24:[function(require,module,exports){
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.Result=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common"),_parser2=require("./parser"),_logger=new WeakMap,_rawResult=new WeakMap,_drilldown=new WeakMap,_parser=new WeakMap,Result=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;(0,_classCallCheck2.default)(this,e),_logger.set(this,{writable:!0,value:void 0}),_rawResult.set(this,{writable:!0,value:void 0}),_drilldown.set(this,{writable:!0,value:void 0}),_parser.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_logger,new _common.Logger("Result")),(0,_classPrivateFieldGet2.default)(this,_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)(this,_rawResult,void 0),(0,_classPrivateFieldSet2.default)(this,_drilldown,!1),(0,_classPrivateFieldSet2.default)(this,_parser,void 0),void 0!==t&&setData(t)}return(0,_createClass2.default)(e,[{key:"setData",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_rawResult,e),(0,_classPrivateFieldGet2.default)(this,_logger).debug("setData."),this.parse(),this}},{key:"setParser",value:function(e){if((0,_classPrivateFieldGet2.default)(this,_logger).debug("setParser."),!(e instanceof _parser2.Parser))throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("attribute parser must be an instance of Parser."),"parser value must be an instance of Parser.";return(0,_classPrivateFieldSet2.default)(this,_parser,e),this.parse(),this}},{key:"setDrilldown",value:function(e){if((0,_classPrivateFieldGet2.default)(this,_logger).debug("setting drilldown to "+e),"boolean"!=typeof e)throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("attribute value must be a boolean."),"drilldown value must be a boolean.";return(0,_classPrivateFieldSet2.default)(this,_drilldown,e),this}},{key:"parse",value:function(){(0,_classPrivateFieldGet2.default)(this,_rawResult)?(0,_classPrivateFieldGet2.default)(this,_parser)?(this.preparse((0,_classPrivateFieldGet2.default)(this,_rawResult)),this.onparse((0,_classPrivateFieldGet2.default)(this,_rawResult)),this.postparse((0,_classPrivateFieldGet2.default)(this,_rawResult))):(0,_classPrivateFieldGet2.default)(this,_logger).trace("Can't parse, please set the parser first. Parser should be set on a Result subclass."):(0,_classPrivateFieldGet2.default)(this,_logger).trace("Can't parse, please set the Airr Data Commons data first.")}},{key:"preparse",value:function(e){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this preparse() method should never execute, specializations of Result need to overload it."),"This method should not be called, implementations need to overload it."}},{key:"onparse",value:function(e){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this parse() method should never execute, specializations of Result need to overload it."),"This method should not be called, implementations need to overload it."}},{key:"postparse",value:function(e){throw(0,_classPrivateFieldGet2.default)(this,_logger).fatal("this preparse() method should never execute, specializations of Result need to overload it."),"This method should not be called, implementations need to overload it."}},{key:"multipleSeries",get:function(){return!1}},{key:"data",set:function(e){this.setData(e)},get:function(){return(0,_classPrivateFieldGet2.default)(this,_rawResult)}},{key:"parser",set:function(e){this.setParser(e)},get:function(){return(0,_classPrivateFieldGet2.default)(this,_parser)}},{key:"drilldown",set:function(e){this.setDrilldown(e)},get:function(){return(0,_classPrivateFieldGet2.default)(this,_logger).debug("getting drilldown."),(0,_classPrivateFieldGet2.default)(this,_drilldown)}}]),e}();exports.Result=Result,module.exports={Result:Result};

},{"./common":16,"./parser":22,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/classPrivateFieldGet":3,"@babel/runtime/helpers/classPrivateFieldSet":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":10}],25:[function(require,module,exports){
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResultSeries=exports.ResultSeriesDataItem=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classPrivateFieldGet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_common=require("./common"),_logger=new WeakMap,_name=new WeakMap,_x=new WeakMap,_y=new WeakMap,_z=new WeakMap,_color=new WeakMap,_drilldown=new WeakMap,ResultSeriesDataItem=function(){function e(){(0,_classCallCheck2.default)(this,e),_logger.set(this,{writable:!0,value:void 0}),_name.set(this,{writable:!0,value:void 0}),_x.set(this,{writable:!0,value:void 0}),_y.set(this,{writable:!0,value:void 0}),_z.set(this,{writable:!0,value:void 0}),_color.set(this,{writable:!0,value:void 0}),_drilldown.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_logger,new _common.Logger("ResultSeriesDataItem")),(0,_classPrivateFieldGet2.default)(this,_logger).debug("Constructor."),(0,_classPrivateFieldSet2.default)(this,_name,void 0),(0,_classPrivateFieldSet2.default)(this,_x,void 0),(0,_classPrivateFieldSet2.default)(this,_y,void 0),(0,_classPrivateFieldSet2.default)(this,_z,void 0),(0,_classPrivateFieldSet2.default)(this,_color,void 0),(0,_classPrivateFieldSet2.default)(this,_drilldown,void 0)}return(0,_createClass2.default)(e,[{key:"setName",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_name,e),this}},{key:"setX",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_x,e),this}},{key:"setY",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_y,e),this}},{key:"setZ",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_z,e),this}},{key:"setColor",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_color,e),this}},{key:"setDrilldown",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_drilldown,e),this}},{key:"toJSON",value:function(){var e={name:this.name,x:this.x,y:this.y,z:this.z,color:this.color,drilldown:this.drilldown};for(var t in e){if(e.hasOwnProperty(t))null==e[t]&&delete e[t]}return e}},{key:"name",get:function(){return(0,_classPrivateFieldGet2.default)(this,_name)},set:function(e){this.setName(e)}},{key:"x",get:function(){return(0,_classPrivateFieldGet2.default)(this,_x)},set:function(e){this.setX(e)}},{key:"y",get:function(){return(0,_classPrivateFieldGet2.default)(this,_y)},set:function(e){this.setY(e)}},{key:"z",get:function(){return(0,_classPrivateFieldGet2.default)(this,_z)},set:function(e){this.setZ(e)}},{key:"color",get:function(){return(0,_classPrivateFieldGet2.default)(this,_color)},set:function(e){this.setColor(e)}},{key:"drilldown",get:function(){return(0,_classPrivateFieldGet2.default)(this,_drilldown)},set:function(e){this.setDrilldown(e)}}]),e}();exports.ResultSeriesDataItem=ResultSeriesDataItem;var _logger2=new WeakMap,_repertoireId=new WeakMap,_sampleProcessingId=new WeakMap,_dataProcessingId=new WeakMap,_id=new WeakMap,_name2=new WeakMap,_fieldName=new WeakMap,_data=new WeakMap,_type=new WeakMap,_parentName=new WeakMap,_color2=new WeakMap,ResultSeries=function(){function e(){(0,_classCallCheck2.default)(this,e),_logger2.set(this,{writable:!0,value:void 0}),_repertoireId.set(this,{writable:!0,value:void 0}),_sampleProcessingId.set(this,{writable:!0,value:void 0}),_dataProcessingId.set(this,{writable:!0,value:void 0}),_id.set(this,{writable:!0,value:void 0}),_name2.set(this,{writable:!0,value:void 0}),_fieldName.set(this,{writable:!0,value:void 0}),_data.set(this,{writable:!0,value:void 0}),_type.set(this,{writable:!0,value:void 0}),_parentName.set(this,{writable:!0,value:void 0}),_color2.set(this,{writable:!0,value:void 0}),(0,_classPrivateFieldSet2.default)(this,_logger2,new _common.Logger("ResultSeries")),(0,_classPrivateFieldGet2.default)(this,_logger2).debug("Constructor."),(0,_classPrivateFieldSet2.default)(this,_repertoireId,void 0),(0,_classPrivateFieldSet2.default)(this,_sampleProcessingId,void 0),(0,_classPrivateFieldSet2.default)(this,_dataProcessingId,void 0),(0,_classPrivateFieldSet2.default)(this,_id,void 0),(0,_classPrivateFieldSet2.default)(this,_name2,void 0),(0,_classPrivateFieldSet2.default)(this,_fieldName,void 0),(0,_classPrivateFieldSet2.default)(this,_data,void 0),(0,_classPrivateFieldSet2.default)(this,_type,void 0),(0,_classPrivateFieldSet2.default)(this,_parentName,void 0),(0,_classPrivateFieldSet2.default)(this,_color2,void 0)}return(0,_createClass2.default)(e,[{key:"setRepertoireId",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_repertoireId,e),this}},{key:"setSampleProcessingId",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_sampleProcessingId,e),this}},{key:"setDataProcessingId",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_dataProcessingId,e),this}},{key:"setId",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_id,e),this}},{key:"setName",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_name2,e),this}},{key:"setFieldName",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_fieldName,e),this}},{key:"setData",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_data,e),this}},{key:"setType",value:function(e){if(!e instanceof _common.ResultSeriesType)throw"type mus be an instance of ResultSeriesType";if(!_common.ResultSeriesType.contains(e.typeCode))throw"type must exist in ResultSeriesType.types";return(0,_classPrivateFieldSet2.default)(this,_type,e),this}},{key:"setParentName",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_parentName,e),this}},{key:"setColor",value:function(e){return(0,_classPrivateFieldSet2.default)(this,_color2,e),this}},{key:"toJSON",value:function(){return{repertoireId:this.repertoireId,sampleProcessingId:this.sampleProcessingId,dataProcessingId:this.dataProcessingId,name:this.name,fieldName:this.fieldName,parentName:this.parentName,type:this.type,color:this.color,data:this.data}}},{key:"asHighchartSeries",value:function(){var e={id:this.id,name:this.name,color:this.color};for(var t in e){if(e.hasOwnProperty(t))null==e[t]&&delete e[t]}return(0,_classPrivateFieldGet2.default)(this,_data)&&(e.data=(0,_classPrivateFieldGet2.default)(this,_data).map(function(e){return e.toJSON()})),e}},{key:"repertoireId",get:function(){return(0,_classPrivateFieldGet2.default)(this,_repertoireId)},set:function(e){this.setRepertoireId(e)}},{key:"sampleProcessingId",get:function(){return(0,_classPrivateFieldGet2.default)(this,_sampleProcessingId)},set:function(e){this.setSampleProcessingId(e)}},{key:"dataProcessingId",get:function(){return(0,_classPrivateFieldGet2.default)(this,_dataProcessingId)},set:function(e){this.setDataProcessingId(e)}},{key:"id",get:function(){return(0,_classPrivateFieldGet2.default)(this,_id)},set:function(e){this.setId(e)}},{key:"name",get:function(){return(0,_classPrivateFieldGet2.default)(this,_name2)},set:function(e){this.setName(e)}},{key:"fieldName",get:function(){return(0,_classPrivateFieldGet2.default)(this,_fieldName)},set:function(e){this.setFieldName(e)}},{key:"data",get:function(){return(0,_classPrivateFieldGet2.default)(this,_data)||(0,_classPrivateFieldSet2.default)(this,_data,[]),(0,_classPrivateFieldGet2.default)(this,_data)},set:function(e){this.setData(e)}},{key:"type",get:function(){return(0,_classPrivateFieldGet2.default)(this,_type)},set:function(e){this.setType(e)}},{key:"parentName",get:function(){return(0,_classPrivateFieldGet2.default)(this,_parentName)},set:function(e){this.setParentName(e)}},{key:"color",get:function(){return(0,_classPrivateFieldGet2.default)(this,_color2)},set:function(e){this.setColor(e)}}]),e}();exports.ResultSeries=ResultSeries,module.exports={ResultSeriesDataItem:ResultSeriesDataItem,ResultSeries:ResultSeries};

},{"./common":16,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/classPrivateFieldGet":3,"@babel/runtime/helpers/classPrivateFieldSet":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":10}]},{},[21]);
